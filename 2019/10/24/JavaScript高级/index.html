<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>JavaScript 高级 | 云海雪原</title><meta name="description" content="JavaScript 高级"><meta name="keywords" content="JS"><meta name="author" content="雪海の无涯"><meta name="copyright" content="雪海の无涯"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://wuguolong.com/2019/10/24/JavaScript高级/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="JavaScript 高级"><meta name="twitter:description" content="JavaScript 高级"><meta name="twitter:image" content="http://wuguolong.com/img/js.png"><meta property="og:type" content="article"><meta property="og:title" content="JavaScript 高级"><meta property="og:url" content="http://wuguolong.com/2019/10/24/JavaScript高级/"><meta property="og:site_name" content="云海雪原"><meta property="og:description" content="JavaScript 高级"><meta property="og:image" content="http://wuguolong.com/img/js.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="MySQL" href="http://wuguolong.com/2019/10/24/MySQL基础笔记/"><link rel="next" title="H5+C3" href="http://wuguolong.com/2019/10/24/HTML+CSS笔记/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://www.wuguolong.com/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: '添加书签',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: {"languages":{"author":"作者: 雪海の无涯","link":"链接: http://wuguolong.com/2019/10/24/JavaScript高级/","source":"来源: 云海雪原","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  copy_copyright_js: true
  
}</script></head><body><canvas class="fireworks"></canvas><div id="header"> <div id="page-header"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">云海雪原</a></span><i class="fa fa-bars fa-fw toggle-menu pull-right close" aria-hidden="true"></i><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lozad avatar_img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">29</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">23</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">18</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#JavaScript-高级"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">JavaScript 高级</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#JavaScript-是什么"><span class="toc_mobile_items-number">1.0.0.1.</span> <span class="toc_mobile_items-text">JavaScript 是什么</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#JavaScript-的组成"><span class="toc_mobile_items-number">1.0.0.2.</span> <span class="toc_mobile_items-text">JavaScript 的组成</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#JavaScript-可以做什么"><span class="toc_mobile_items-number">1.0.0.3.</span> <span class="toc_mobile_items-text">JavaScript 可以做什么</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#浏览器是如何工作的"><span class="toc_mobile_items-number">1.0.1.</span> <span class="toc_mobile_items-text">浏览器是如何工作的</span></a></li></ol><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#JavaScript-面向对象编程"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">JavaScript 面向对象编程</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#面向对象介绍"><span class="toc_mobile_items-number">1.1.1.</span> <span class="toc_mobile_items-text">面向对象介绍</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#什么是对象"><span class="toc_mobile_items-number">1.1.1.1.</span> <span class="toc_mobile_items-text">什么是对象</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#什么是面向对象"><span class="toc_mobile_items-number">1.1.1.2.</span> <span class="toc_mobile_items-text">什么是面向对象</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#程序中面向对象的基本体现"><span class="toc_mobile_items-number">1.1.1.3.</span> <span class="toc_mobile_items-text">程序中面向对象的基本体现</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#创建对象"><span class="toc_mobile_items-number">1.1.2.</span> <span class="toc_mobile_items-text">创建对象</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#简单方式"><span class="toc_mobile_items-number">1.1.2.1.</span> <span class="toc_mobile_items-text">简单方式</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#构造函数"><span class="toc_mobile_items-number">1.1.3.</span> <span class="toc_mobile_items-text">构造函数</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#构造函数-1"><span class="toc_mobile_items-number">1.1.3.1.</span> <span class="toc_mobile_items-text">构造函数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#解析构造函数代码的执行"><span class="toc_mobile_items-number">1.1.3.2.</span> <span class="toc_mobile_items-text">解析构造函数代码的执行</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#构造函数和对象-实例-的关系"><span class="toc_mobile_items-number">1.1.3.3.</span> <span class="toc_mobile_items-text">构造函数和对象(实例)的关系</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#实例成员和静态成员"><span class="toc_mobile_items-number">1.1.3.4.</span> <span class="toc_mobile_items-text">实例成员和静态成员</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#构造函数的问题"><span class="toc_mobile_items-number">1.1.3.5.</span> <span class="toc_mobile_items-text">构造函数的问题</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#小结"><span class="toc_mobile_items-number">1.1.3.6.</span> <span class="toc_mobile_items-text">小结</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#原型"><span class="toc_mobile_items-number">1.1.4.</span> <span class="toc_mobile_items-text">原型</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#instanceof-判断"><span class="toc_mobile_items-number">1.1.4.1.</span> <span class="toc_mobile_items-text">instanceof 判断</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#typeof和instanceof的用法和区别"><span class="toc_mobile_items-number">1.1.4.2.</span> <span class="toc_mobile_items-text">typeof和instanceof的用法和区别</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#typeof"><span class="toc_mobile_items-number">1.1.4.2.1.</span> <span class="toc_mobile_items-text">typeof</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#instanceof"><span class="toc_mobile_items-number">1.1.4.2.2.</span> <span class="toc_mobile_items-text">instanceof</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#构造函数、实例、原型三者之间的关系"><span class="toc_mobile_items-number">1.1.4.3.</span> <span class="toc_mobile_items-text">构造函数、实例、原型三者之间的关系</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#proto"><span class="toc_mobile_items-number">1.1.4.3.1.</span> <span class="toc_mobile_items-text">proto</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#prototype"><span class="toc_mobile_items-number">1.1.4.3.2.</span> <span class="toc_mobile_items-text">prototype</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#属性成员的搜索原则：原型链"><span class="toc_mobile_items-number">1.1.4.4.</span> <span class="toc_mobile_items-text">属性成员的搜索原则：原型链</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#实例对象读写原型对象成员"><span class="toc_mobile_items-number">1.1.4.5.</span> <span class="toc_mobile_items-text">实例对象读写原型对象成员</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#更简单的原型语法"><span class="toc_mobile_items-number">1.1.4.6.</span> <span class="toc_mobile_items-text">更简单的原型语法</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#原生对象的原型"><span class="toc_mobile_items-number">1.1.4.7.</span> <span class="toc_mobile_items-text">原生对象的原型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#原型对象使用建议"><span class="toc_mobile_items-number">1.1.4.8.</span> <span class="toc_mobile_items-text">原型对象使用建议</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#案例：随机方块游戏"><span class="toc_mobile_items-number">1.1.5.</span> <span class="toc_mobile_items-text">案例：随机方块游戏</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#面向对象游戏案例：贪吃蛇"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">面向对象游戏案例：贪吃蛇</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#案例介绍"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">案例介绍</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#游戏演示"><span class="toc_mobile_items-number">1.2.1.1.</span> <span class="toc_mobile_items-text">游戏演示</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#案例目标"><span class="toc_mobile_items-number">1.2.1.2.</span> <span class="toc_mobile_items-text">案例目标</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#前置知识点"><span class="toc_mobile_items-number">1.2.1.3.</span> <span class="toc_mobile_items-text">前置知识点</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#功能实现"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">功能实现</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#搭建页面"><span class="toc_mobile_items-number">1.2.2.1.</span> <span class="toc_mobile_items-text">搭建页面</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#分析对象"><span class="toc_mobile_items-number">1.2.2.2.</span> <span class="toc_mobile_items-text">分析对象</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#创建食物对象"><span class="toc_mobile_items-number">1.2.2.3.</span> <span class="toc_mobile_items-text">创建食物对象</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#创建蛇对象"><span class="toc_mobile_items-number">1.2.2.4.</span> <span class="toc_mobile_items-text">创建蛇对象</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#创建游戏对象"><span class="toc_mobile_items-number">1.2.2.5.</span> <span class="toc_mobile_items-text">创建游戏对象</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#整理代码"><span class="toc_mobile_items-number">1.2.2.6.</span> <span class="toc_mobile_items-text">整理代码</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#继承-知道"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">继承(知道)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#什么是继承"><span class="toc_mobile_items-number">1.3.1.</span> <span class="toc_mobile_items-text">什么是继承</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#对象的”继承”"><span class="toc_mobile_items-number">1.3.2.</span> <span class="toc_mobile_items-text">对象的”继承”</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#原型继承"><span class="toc_mobile_items-number">1.3.3.</span> <span class="toc_mobile_items-text">原型继承</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#借用构造函数"><span class="toc_mobile_items-number">1.3.4.</span> <span class="toc_mobile_items-text">借用构造函数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#组合继承：原型继承-借用构造函数继承"><span class="toc_mobile_items-number">1.3.5.</span> <span class="toc_mobile_items-text">组合继承：原型继承+借用构造函数继承</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#函数进阶"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">函数进阶</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#函数的定义方式"><span class="toc_mobile_items-number">1.4.1.</span> <span class="toc_mobile_items-text">函数的定义方式</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#函数声明"><span class="toc_mobile_items-number">1.4.1.1.</span> <span class="toc_mobile_items-text">函数声明</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#函数表达式"><span class="toc_mobile_items-number">1.4.1.2.</span> <span class="toc_mobile_items-text">函数表达式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#new-Function"><span class="toc_mobile_items-number">1.4.1.3.</span> <span class="toc_mobile_items-text">new Function</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#函数声明与函数表达式的区别"><span class="toc_mobile_items-number">1.4.1.4.</span> <span class="toc_mobile_items-text">函数声明与函数表达式的区别</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#函数的调用方式"><span class="toc_mobile_items-number">1.4.2.</span> <span class="toc_mobile_items-text">函数的调用方式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#函数内-this-指向的不同场景"><span class="toc_mobile_items-number">1.4.3.</span> <span class="toc_mobile_items-text">函数内 this 指向的不同场景</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#函数也是对象"><span class="toc_mobile_items-number">1.4.4.</span> <span class="toc_mobile_items-text">函数也是对象</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#改变函数中的this"><span class="toc_mobile_items-number">1.4.5.</span> <span class="toc_mobile_items-text">改变函数中的this</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#call"><span class="toc_mobile_items-number">1.4.5.1.</span> <span class="toc_mobile_items-text">call</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#apply"><span class="toc_mobile_items-number">1.4.5.2.</span> <span class="toc_mobile_items-text">apply</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#bind"><span class="toc_mobile_items-number">1.4.5.3.</span> <span class="toc_mobile_items-text">bind</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#小结-1"><span class="toc_mobile_items-number">1.4.5.4.</span> <span class="toc_mobile_items-text">小结</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#函数的其它成员"><span class="toc_mobile_items-number">1.4.6.</span> <span class="toc_mobile_items-text">函数的其它成员</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#高阶函数"><span class="toc_mobile_items-number">1.4.7.</span> <span class="toc_mobile_items-text">高阶函数</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#作为参数"><span class="toc_mobile_items-number">1.4.7.1.</span> <span class="toc_mobile_items-text">作为参数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#作为返回值"><span class="toc_mobile_items-number">1.4.7.2.</span> <span class="toc_mobile_items-text">作为返回值</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#作用域、作用域链、预解析"><span class="toc_mobile_items-number">1.4.7.3.</span> <span class="toc_mobile_items-text">作用域、作用域链、预解析</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#什么是闭包"><span class="toc_mobile_items-number">1.4.7.4.</span> <span class="toc_mobile_items-text">什么是闭包</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#一些关于闭包的例子"><span class="toc_mobile_items-number">1.4.7.5.</span> <span class="toc_mobile_items-text">一些关于闭包的例子</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#闭包的思考题"><span class="toc_mobile_items-number">1.4.7.6.</span> <span class="toc_mobile_items-text">闭包的思考题</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#小结-2"><span class="toc_mobile_items-number">1.4.7.7.</span> <span class="toc_mobile_items-text">小结</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#递归"><span class="toc_mobile_items-number">1.4.8.</span> <span class="toc_mobile_items-text">递归</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#递归执行模型"><span class="toc_mobile_items-number">1.4.8.1.</span> <span class="toc_mobile_items-text">递归执行模型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#举个栗子：计算阶乘的递归函数"><span class="toc_mobile_items-number">1.4.8.2.</span> <span class="toc_mobile_items-text">举个栗子：计算阶乘的递归函数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#递归应用场景【深拷贝】"><span class="toc_mobile_items-number">1.4.8.3.</span> <span class="toc_mobile_items-text">递归应用场景【深拷贝】</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#正则表达式"><span class="toc_mobile_items-number">1.5.</span> <span class="toc_mobile_items-text">正则表达式</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#正则表达式简介"><span class="toc_mobile_items-number">1.5.1.</span> <span class="toc_mobile_items-text">正则表达式简介</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#什么是正则表达式"><span class="toc_mobile_items-number">1.5.1.1.</span> <span class="toc_mobile_items-text">什么是正则表达式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#正则表达式的作用"><span class="toc_mobile_items-number">1.5.1.2.</span> <span class="toc_mobile_items-text">正则表达式的作用</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#正则表达式的特点"><span class="toc_mobile_items-number">1.5.1.3.</span> <span class="toc_mobile_items-text">正则表达式的特点</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#正则表达式的测试"><span class="toc_mobile_items-number">1.5.2.</span> <span class="toc_mobile_items-text">正则表达式的测试</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#正则表达式的组成"><span class="toc_mobile_items-number">1.5.3.</span> <span class="toc_mobile_items-text">正则表达式的组成</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#元字符"><span class="toc_mobile_items-number">1.5.4.</span> <span class="toc_mobile_items-text">元字符</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#常用元字符串"><span class="toc_mobile_items-number">1.5.4.1.</span> <span class="toc_mobile_items-text">常用元字符串</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#限定符"><span class="toc_mobile_items-number">1.5.4.2.</span> <span class="toc_mobile_items-text">限定符</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#其它"><span class="toc_mobile_items-number">1.5.4.3.</span> <span class="toc_mobile_items-text">其它</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#案例"><span class="toc_mobile_items-number">1.5.5.</span> <span class="toc_mobile_items-text">案例</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#JavaScript-中使用正则表达式"><span class="toc_mobile_items-number">1.6.</span> <span class="toc_mobile_items-text">JavaScript 中使用正则表达式</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#创建正则对象"><span class="toc_mobile_items-number">1.6.1.</span> <span class="toc_mobile_items-text">创建正则对象</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#参数"><span class="toc_mobile_items-number">1.6.1.1.</span> <span class="toc_mobile_items-text">参数</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#正则匹配"><span class="toc_mobile_items-number">1.6.2.</span> <span class="toc_mobile_items-text">正则匹配</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#RegExpObject-test-string"><span class="toc_mobile_items-number">1.6.2.0.0.1.</span> <span class="toc_mobile_items-text">RegExpObject.test(string)</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#正则提取"><span class="toc_mobile_items-number">1.6.3.</span> <span class="toc_mobile_items-text">正则提取</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#String-match"><span class="toc_mobile_items-number">1.6.3.0.0.1.</span> <span class="toc_mobile_items-text">String.match()</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#正则替换"><span class="toc_mobile_items-number">1.6.4.</span> <span class="toc_mobile_items-text">正则替换</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#String-replace"><span class="toc_mobile_items-number">1.6.4.0.0.1.</span> <span class="toc_mobile_items-text">String.replace()</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#案例：表单验证"><span class="toc_mobile_items-number">1.6.5.</span> <span class="toc_mobile_items-text">案例：表单验证</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#附录"><span class="toc_mobile_items-number">1.7.</span> <span class="toc_mobile_items-text">附录</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#A-代码规范"><span class="toc_mobile_items-number">1.7.1.</span> <span class="toc_mobile_items-text">A 代码规范</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#代码风格"><span class="toc_mobile_items-number">1.7.1.1.</span> <span class="toc_mobile_items-text">代码风格</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#校验工具"><span class="toc_mobile_items-number">1.7.1.2.</span> <span class="toc_mobile_items-text">校验工具</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#B-Chrome-开发者工具"><span class="toc_mobile_items-number">1.7.2.</span> <span class="toc_mobile_items-text">B Chrome 开发者工具</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#C-文档相关工具"><span class="toc_mobile_items-number">1.7.3.</span> <span class="toc_mobile_items-text">C 文档相关工具</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#网页线上编程网站"><span class="toc_mobile_items-number">1.7.3.1.</span> <span class="toc_mobile_items-text">网页线上编程网站</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#面试常问题解答"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">面试常问题解答</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#typeof和instanceof的用法和区别-1"><span class="toc_mobile_items-number">2.0.0.1.</span> <span class="toc_mobile_items-text">typeof和instanceof的用法和区别</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#typeof-1"><span class="toc_mobile_items-number">2.0.0.1.1.</span> <span class="toc_mobile_items-text">typeof</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#instanceof-1"><span class="toc_mobile_items-number">2.0.0.1.2.</span> <span class="toc_mobile_items-text">instanceof</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#数组和原型toSting-区别"><span class="toc_mobile_items-number">2.0.0.2.</span> <span class="toc_mobile_items-text">数组和原型toSting()区别</span></a></li></ol></li></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaScript-高级"><span class="toc-number">1.</span> <span class="toc-text">JavaScript 高级</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#JavaScript-是什么"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">JavaScript 是什么</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JavaScript-的组成"><span class="toc-number">1.0.0.2.</span> <span class="toc-text">JavaScript 的组成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JavaScript-可以做什么"><span class="toc-number">1.0.0.3.</span> <span class="toc-text">JavaScript 可以做什么</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#浏览器是如何工作的"><span class="toc-number">1.0.1.</span> <span class="toc-text">浏览器是如何工作的</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript-面向对象编程"><span class="toc-number">1.1.</span> <span class="toc-text">JavaScript 面向对象编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#面向对象介绍"><span class="toc-number">1.1.1.</span> <span class="toc-text">面向对象介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是对象"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">什么是对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是面向对象"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">什么是面向对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#程序中面向对象的基本体现"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">程序中面向对象的基本体现</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建对象"><span class="toc-number">1.1.2.</span> <span class="toc-text">创建对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#简单方式"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">简单方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构造函数"><span class="toc-number">1.1.3.</span> <span class="toc-text">构造函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#构造函数-1"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">构造函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#解析构造函数代码的执行"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">解析构造函数代码的执行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#构造函数和对象-实例-的关系"><span class="toc-number">1.1.3.3.</span> <span class="toc-text">构造函数和对象(实例)的关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#实例成员和静态成员"><span class="toc-number">1.1.3.4.</span> <span class="toc-text">实例成员和静态成员</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#构造函数的问题"><span class="toc-number">1.1.3.5.</span> <span class="toc-text">构造函数的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#小结"><span class="toc-number">1.1.3.6.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#原型"><span class="toc-number">1.1.4.</span> <span class="toc-text">原型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#instanceof-判断"><span class="toc-number">1.1.4.1.</span> <span class="toc-text">instanceof 判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#typeof和instanceof的用法和区别"><span class="toc-number">1.1.4.2.</span> <span class="toc-text">typeof和instanceof的用法和区别</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#typeof"><span class="toc-number">1.1.4.2.1.</span> <span class="toc-text">typeof</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#instanceof"><span class="toc-number">1.1.4.2.2.</span> <span class="toc-text">instanceof</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#构造函数、实例、原型三者之间的关系"><span class="toc-number">1.1.4.3.</span> <span class="toc-text">构造函数、实例、原型三者之间的关系</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#proto"><span class="toc-number">1.1.4.3.1.</span> <span class="toc-text">proto</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#prototype"><span class="toc-number">1.1.4.3.2.</span> <span class="toc-text">prototype</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#属性成员的搜索原则：原型链"><span class="toc-number">1.1.4.4.</span> <span class="toc-text">属性成员的搜索原则：原型链</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#实例对象读写原型对象成员"><span class="toc-number">1.1.4.5.</span> <span class="toc-text">实例对象读写原型对象成员</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#更简单的原型语法"><span class="toc-number">1.1.4.6.</span> <span class="toc-text">更简单的原型语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#原生对象的原型"><span class="toc-number">1.1.4.7.</span> <span class="toc-text">原生对象的原型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#原型对象使用建议"><span class="toc-number">1.1.4.8.</span> <span class="toc-text">原型对象使用建议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#案例：随机方块游戏"><span class="toc-number">1.1.5.</span> <span class="toc-text">案例：随机方块游戏</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#面向对象游戏案例：贪吃蛇"><span class="toc-number">1.2.</span> <span class="toc-text">面向对象游戏案例：贪吃蛇</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#案例介绍"><span class="toc-number">1.2.1.</span> <span class="toc-text">案例介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#游戏演示"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">游戏演示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#案例目标"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">案例目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#前置知识点"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">前置知识点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#功能实现"><span class="toc-number">1.2.2.</span> <span class="toc-text">功能实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#搭建页面"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">搭建页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分析对象"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">分析对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建食物对象"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">创建食物对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建蛇对象"><span class="toc-number">1.2.2.4.</span> <span class="toc-text">创建蛇对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建游戏对象"><span class="toc-number">1.2.2.5.</span> <span class="toc-text">创建游戏对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#整理代码"><span class="toc-number">1.2.2.6.</span> <span class="toc-text">整理代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#继承-知道"><span class="toc-number">1.3.</span> <span class="toc-text">继承(知道)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是继承"><span class="toc-number">1.3.1.</span> <span class="toc-text">什么是继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对象的”继承”"><span class="toc-number">1.3.2.</span> <span class="toc-text">对象的”继承”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#原型继承"><span class="toc-number">1.3.3.</span> <span class="toc-text">原型继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#借用构造函数"><span class="toc-number">1.3.4.</span> <span class="toc-text">借用构造函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#组合继承：原型继承-借用构造函数继承"><span class="toc-number">1.3.5.</span> <span class="toc-text">组合继承：原型继承+借用构造函数继承</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数进阶"><span class="toc-number">1.4.</span> <span class="toc-text">函数进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#函数的定义方式"><span class="toc-number">1.4.1.</span> <span class="toc-text">函数的定义方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#函数声明"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">函数声明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#函数表达式"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">函数表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#new-Function"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">new Function</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#函数声明与函数表达式的区别"><span class="toc-number">1.4.1.4.</span> <span class="toc-text">函数声明与函数表达式的区别</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数的调用方式"><span class="toc-number">1.4.2.</span> <span class="toc-text">函数的调用方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数内-this-指向的不同场景"><span class="toc-number">1.4.3.</span> <span class="toc-text">函数内 this 指向的不同场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数也是对象"><span class="toc-number">1.4.4.</span> <span class="toc-text">函数也是对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#改变函数中的this"><span class="toc-number">1.4.5.</span> <span class="toc-text">改变函数中的this</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#call"><span class="toc-number">1.4.5.1.</span> <span class="toc-text">call</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#apply"><span class="toc-number">1.4.5.2.</span> <span class="toc-text">apply</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bind"><span class="toc-number">1.4.5.3.</span> <span class="toc-text">bind</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#小结-1"><span class="toc-number">1.4.5.4.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数的其它成员"><span class="toc-number">1.4.6.</span> <span class="toc-text">函数的其它成员</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#高阶函数"><span class="toc-number">1.4.7.</span> <span class="toc-text">高阶函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#作为参数"><span class="toc-number">1.4.7.1.</span> <span class="toc-text">作为参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#作为返回值"><span class="toc-number">1.4.7.2.</span> <span class="toc-text">作为返回值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#作用域、作用域链、预解析"><span class="toc-number">1.4.7.3.</span> <span class="toc-text">作用域、作用域链、预解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是闭包"><span class="toc-number">1.4.7.4.</span> <span class="toc-text">什么是闭包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#一些关于闭包的例子"><span class="toc-number">1.4.7.5.</span> <span class="toc-text">一些关于闭包的例子</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#闭包的思考题"><span class="toc-number">1.4.7.6.</span> <span class="toc-text">闭包的思考题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#小结-2"><span class="toc-number">1.4.7.7.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#递归"><span class="toc-number">1.4.8.</span> <span class="toc-text">递归</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#递归执行模型"><span class="toc-number">1.4.8.1.</span> <span class="toc-text">递归执行模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#举个栗子：计算阶乘的递归函数"><span class="toc-number">1.4.8.2.</span> <span class="toc-text">举个栗子：计算阶乘的递归函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#递归应用场景【深拷贝】"><span class="toc-number">1.4.8.3.</span> <span class="toc-text">递归应用场景【深拷贝】</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#正则表达式"><span class="toc-number">1.5.</span> <span class="toc-text">正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#正则表达式简介"><span class="toc-number">1.5.1.</span> <span class="toc-text">正则表达式简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是正则表达式"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">什么是正则表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#正则表达式的作用"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">正则表达式的作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#正则表达式的特点"><span class="toc-number">1.5.1.3.</span> <span class="toc-text">正则表达式的特点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#正则表达式的测试"><span class="toc-number">1.5.2.</span> <span class="toc-text">正则表达式的测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#正则表达式的组成"><span class="toc-number">1.5.3.</span> <span class="toc-text">正则表达式的组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#元字符"><span class="toc-number">1.5.4.</span> <span class="toc-text">元字符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#常用元字符串"><span class="toc-number">1.5.4.1.</span> <span class="toc-text">常用元字符串</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#限定符"><span class="toc-number">1.5.4.2.</span> <span class="toc-text">限定符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其它"><span class="toc-number">1.5.4.3.</span> <span class="toc-text">其它</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#案例"><span class="toc-number">1.5.5.</span> <span class="toc-text">案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript-中使用正则表达式"><span class="toc-number">1.6.</span> <span class="toc-text">JavaScript 中使用正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建正则对象"><span class="toc-number">1.6.1.</span> <span class="toc-text">创建正则对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#参数"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#正则匹配"><span class="toc-number">1.6.2.</span> <span class="toc-text">正则匹配</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#RegExpObject-test-string"><span class="toc-number">1.6.2.0.0.1.</span> <span class="toc-text">RegExpObject.test(string)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#正则提取"><span class="toc-number">1.6.3.</span> <span class="toc-text">正则提取</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#String-match"><span class="toc-number">1.6.3.0.0.1.</span> <span class="toc-text">String.match()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#正则替换"><span class="toc-number">1.6.4.</span> <span class="toc-text">正则替换</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#String-replace"><span class="toc-number">1.6.4.0.0.1.</span> <span class="toc-text">String.replace()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#案例：表单验证"><span class="toc-number">1.6.5.</span> <span class="toc-text">案例：表单验证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#附录"><span class="toc-number">1.7.</span> <span class="toc-text">附录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#A-代码规范"><span class="toc-number">1.7.1.</span> <span class="toc-text">A 代码规范</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#代码风格"><span class="toc-number">1.7.1.1.</span> <span class="toc-text">代码风格</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#校验工具"><span class="toc-number">1.7.1.2.</span> <span class="toc-text">校验工具</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#B-Chrome-开发者工具"><span class="toc-number">1.7.2.</span> <span class="toc-text">B Chrome 开发者工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-文档相关工具"><span class="toc-number">1.7.3.</span> <span class="toc-text">C 文档相关工具</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#网页线上编程网站"><span class="toc-number">1.7.3.1.</span> <span class="toc-text">网页线上编程网站</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#面试常问题解答"><span class="toc-number">2.</span> <span class="toc-text">面试常问题解答</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#typeof和instanceof的用法和区别-1"><span class="toc-number">2.0.0.1.</span> <span class="toc-text">typeof和instanceof的用法和区别</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#typeof-1"><span class="toc-number">2.0.0.1.1.</span> <span class="toc-text">typeof</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#instanceof-1"><span class="toc-number">2.0.0.1.2.</span> <span class="toc-text">instanceof</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数组和原型toSting-区别"><span class="toc-number">2.0.0.2.</span> <span class="toc-text">数组和原型toSting()区别</span></a></li></ol></li></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/js.png)"><div id="post-info"><div id="post-title"><div class="posttitle">JavaScript 高级</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-10-24<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2019-11-24</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/JS/">JS</a></span><div class="post-meta-wordcount"><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="JavaScript-高级"><a href="#JavaScript-高级" class="headerlink" title="JavaScript 高级"></a>JavaScript 高级</h1><ul>
<li>理解面向对象开发思想</li>
<li>了解 JavaScript 面向对象开发相关模式</li>
<li>掌握 JavaScript 的高级语法</li>
<li>掌握在 JavaScript 中使用正则表达式</li>
</ul>
<h4 id="JavaScript-是什么"><a href="#JavaScript-是什么" class="headerlink" title="JavaScript 是什么"></a>JavaScript 是什么</h4><ul>
<li><p>解析执行：轻量级解释型的 </p>
<p>解释执行 JavaScript  PHP    每一行代码都要先解释再执行 – 慢，灵活<br>​    var a = 10;<br>​    var b = 20;<br>​    console.log(a, b);  </p>
<p>编译执行  C#  Java         一次性编译，然后再一行一行执行  – 快</p>
</li>
<li><p>语言特点：动态，头等函数 (First-class Function)</p>
<ul>
<li>又称函数是 JavaScript 中的一等公民</li>
</ul>
</li>
<li><p>执行环境：在宿主环境（host environment）下运行，浏览器是最常见的 JavaScript 宿主环境</p>
<ul>
<li>但是在很多非浏览器环境中也使用 JavaScript ，例如 node.js</li>
</ul>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="noopener">MDN-JavaScript</a></p>
<a id="more"></a>
<h4 id="JavaScript-的组成"><a href="#JavaScript-的组成" class="headerlink" title="JavaScript 的组成"></a>JavaScript 的组成</h4></li>
<li><p>ECMAScript  - 语法规范</p>
<ul>
<li>变量、数据类型、类型转换、操作符</li>
<li>流程控制语句：判断、循环语句</li>
<li>数组、函数、作用域、预解析</li>
<li>对象、属性、方法、简单类型和复杂类型的区别</li>
<li>内置对象：Math、Date、Array，基本包装类型String、Number、Boolean</li>
</ul>
</li>
<li>Web APIs<ul>
<li>BOM<ul>
<li>onload页面加载事件，window顶级对象</li>
<li>定时器</li>
<li>location、history</li>
</ul>
</li>
<li>DOM<ul>
<li>获取页面元素，注册事件</li>
<li>属性操作，样式操作</li>
<li>节点属性，节点层级</li>
<li>动态创建元素</li>
<li>事件：注册事件的方式、事件的三个阶段、事件对象 </li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="JavaScript-可以做什么"><a href="#JavaScript-可以做什么" class="headerlink" title="JavaScript 可以做什么"></a>JavaScript 可以做什么</h4><blockquote>
<p>阿特伍德定律：  stackoverflow</p>
<p>Any application that can be written in JavaScript, will eventually be written in JavaScript.  </p>
<p>任何可以用<em>JavaScript</em>来写的应用，最终都将用<em>JavaScript</em>来写。阿特伍德 stackoverflow的创始人之一</p>
<p>掘金    微信公众号：前端大全</p>
</blockquote>
<ul>
<li><a href="https://www.zhihu.com/question/20796866" target="_blank" rel="noopener">知乎 - JavaScript 能做什么，该做什么？</a></li>
<li><a href="https://github.com/phodal/articles/issues/1" target="_blank" rel="noopener">最流行的编程语言 JavaScript 能做什么？</a></li>
</ul>
<h3 id="浏览器是如何工作的"><a href="#浏览器是如何工作的" class="headerlink" title="浏览器是如何工作的"></a>浏览器是如何工作的</h3><p><img alt data-src="JavaScript高级/jszxgc.png" class="lozad"><br><img data-src="/2019/10/24/JavaScript高级/jszxgc.png" class="lozad"><br><a href="http://www.2cto.com/kf/201202/118111.html" target="_blank" rel="noopener">参考链接</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">User Interface  用户界面，我们所看到的浏览器</span><br><span class="line">Browser engine  浏览器引擎，用来查询和操作渲染引擎</span><br><span class="line">*Rendering engine 用来显示请求的内容，负责解析HTML、CSS，并把解析的内容显示出来。</span><br><span class="line">				负责把HTML文档解释成DOM树</span><br><span class="line">Networking   网络，负责发送网络请求</span><br><span class="line">*JavaScript Interpreter(解析者)   JavaScript解析器，负责执行JavaScript的代码</span><br><span class="line">UI Backend   UI后端，用来绘制类似组合框和弹出窗口</span><br><span class="line">Data Persistence(持久化)  数据持久化，数据存储  cookie、HTML5中的sessionStorage</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="JavaScript-面向对象编程"><a href="#JavaScript-面向对象编程" class="headerlink" title="JavaScript 面向对象编程"></a>JavaScript 面向对象编程</h2><h3 id="面向对象介绍"><a href="#面向对象介绍" class="headerlink" title="面向对象介绍"></a>面向对象介绍</h3><h4 id="什么是对象"><a href="#什么是对象" class="headerlink" title="什么是对象"></a>什么是对象</h4><blockquote>
<p>Everything is object （万物皆对象）</p>
</blockquote>
<p>对象到底是什么，我们可以从两次层次来理解。</p>
<ul>
<li><p><strong>现实世界中的对象</strong></p>
<p>对象是单个事 物的抽象。</p>
<p>一本书、一辆汽车、一个人都可以是对象，一个数据库、一张网页、一个与远程服务器的连接也可以是对象。当实物被抽象成对象，实物之间的关系就变成了对象之间的关系，从而就可以模拟现实情况，针对对象进行编程。</p>
</li>
<li><p><strong>程序世界中的对象</strong></p>
<p>obj = { name: ‘’ , sayHi: function()}</p>
<p>对象是一个容器，封装了属性（property）和方法（method）。</p>
<ul>
<li>属性是对象的状态，方法是对象的行为（完成某种任务）。<ul>
<li>比如：我们可以把动物抽象为animal对象，使用“属性”记录具体是那一种动物，使用“方法”表示动物的某种行为（奔跑、捕猎、休息等等）。</li>
</ul>
</li>
<li>对象是一个抽象的概念，可以将其简单理解为：<strong>数据集或功能集</strong>。</li>
<li>ECMAScript-262 把对象定义为：<strong>无序属性的集合，其属性可以包含基本值、对象或者函数</strong>。</li>
</ul>
<blockquote>
<p>提示：每个对象都是基于一个引用类型创建的，这些类型可以是系统内置的原生类型，也可以是开发人员自定义的类型。</p>
<p>Array</p>
<p>var arr = new Array();</p>
</blockquote>
<p>Student  一类事物  类型</p>
<p>var s = new Student();  通过类型，创建了一个具体的对象</p>
</li>
</ul>
<h4 id="什么是面向对象"><a href="#什么是面向对象" class="headerlink" title="什么是面向对象"></a>什么是面向对象</h4><blockquote>
<p>面向对象不是新的东西，它只是过程式代码的一种高度封装，目的在于<strong>提高</strong>代码的<strong>开发效率</strong>和<strong>可维护性</strong>。</p>
</blockquote>
<ul>
<li><p>面向对象编程</p>
<p> Object Oriented Programming，简称 OOP ，是一种编程开发思想。它将真实世界各种复杂的关系，抽象为一个个对象，然后由对象之间的分工与合作，完成对真实世界的模拟。</p>
</li>
<li><p>在面向对象程序开发思想中，每一个对象都是功能中心，具有<strong>明确分工</strong>，可以完成接受信息、处理数据、发出信息等任务。对象要<strong>职责分明</strong></p>
</li>
</ul>
<blockquote>
<p> 因此，面向对象编程具有灵活、代码可复用、高度模块化等特点，容易维护和开发，比起由一系列函数或指令组成的传统的过程式编程（procedural programming），更适合多人合作的大型软件项目。</p>
</blockquote>
<p>面向对象与面向过程： </p>
<ul>
<li>面向过程就是亲力亲为，事无巨细，面面俱到，步步紧跟，有条不紊</li>
<li>面向对象就是找一个对象，指挥得结果</li>
<li>面向对象将执行者转变成指挥者</li>
<li><strong>面向对象不是面向过程的替代，而是面向过程的封装</strong></li>
</ul>
<p><strong>面向对象的特性</strong>：</p>
<ul>
<li>封装性 </li>
<li>继承性</li>
<li>[多态性]抽象</li>
</ul>
<p>扩展阅读：</p>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1" target="_blank" rel="noopener">维基百科 - 面向对象程序设计</a></li>
<li><a href="https://www.zhihu.com/question/19854505" target="_blank" rel="noopener">知乎：如何用一句话说明什么是面向对象思想？</a></li>
<li><a href="https://www.zhihu.com/question/31021366" target="_blank" rel="noopener">知乎：什么是面向对象编程思想？</a></li>
</ul>
<h4 id="程序中面向对象的基本体现"><a href="#程序中面向对象的基本体现" class="headerlink" title="程序中面向对象的基本体现"></a>程序中面向对象的基本体现</h4><p>在 JavaScript 中，所有数据类型都可以视为对象，当然也可以自定义对象。<br>自定义的对象数据类型就是面向对象中的类（ Class ）的概念。</p>
<p>我们以一个例子来说明面向过程和面向对象在程序流程上的不同之处。</p>
<p>假设我们要处理学生的成绩表，为了表示一个学生的成绩，面向过程的程序可以用一个对象表示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> std1 = &#123; <span class="attr">name</span>: <span class="string">'Michael'</span>, <span class="attr">score</span>: <span class="number">98</span> &#125;</span><br><span class="line"><span class="keyword">var</span> std2 = &#123; <span class="attr">name</span>: <span class="string">'Bob'</span>, <span class="attr">score</span>: <span class="number">81</span> &#125;</span><br></pre></td></tr></table></figure>
<p>而处理学生成绩可以通过函数实现，比如打印学生的成绩：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printScore</span> (<span class="params">student</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'姓名：'</span> + student.name + <span class="string">'  '</span> + <span class="string">'成绩：'</span> + student.score)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果采用面向对象的程序设计思想，我们首选思考的不是程序的执行流程，<br>而是 <code>Student</code> 这种数据类型应该被视为一个对象，这个对象拥有 <code>name</code> 和 <code>score</code> 这两个属性（Property）。<br>如果要打印一个学生的成绩，首先必须创建出这个学生对应的对象，然后，给对象发一个 <code>printScore</code> 消息，让对象自己把自己的数据打印出来。</p>
<p>抽象数据行为模板（Class）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, score</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.score = score;</span><br><span class="line">  <span class="keyword">this</span>.printScore = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'姓名：'</span> + <span class="keyword">this</span>.name + <span class="string">'  '</span> + <span class="string">'成绩：'</span> + <span class="keyword">this</span>.score);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>根据模板创建具体实例对象（Instance）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> std1 = <span class="keyword">new</span> Student(<span class="string">'Michael'</span>, <span class="number">98</span>)</span><br><span class="line"><span class="keyword">var</span> std2 = <span class="keyword">new</span> Student(<span class="string">'Bob'</span>, <span class="number">81</span>)</span><br></pre></td></tr></table></figure>
<p>实例对象具有自己的具体行为（给对象发消息）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">std1.printScore() <span class="comment">// =&gt; 姓名：Michael  成绩：98</span></span><br><span class="line">std2.printScore() <span class="comment">// =&gt; 姓名：Bob  成绩 81</span></span><br></pre></td></tr></table></figure>
<p>面向对象的设计思想是从自然界中来的，因为在自然界中，类（Class）和实例（Instance）的概念是很自然的。<br>Class 是一种抽象概念，比如我们定义的 Class——Student ，是指学生这个概念，<br>而实例（Instance）则是一个个具体的 Student ，比如， Michael 和 Bob 是两个具体的 Student 。</p>
<p>所以，面向对象的设计思想是：</p>
<ul>
<li>抽象出 Class(构造函数)</li>
<li>根据 Class(构造函数) 创建 Instance</li>
<li>指挥 Instance 得结果</li>
</ul>
<p>面向对象的抽象程度又比函数要高，因为一个 Class 既包含数据，又包含操作数据的方法。</p>
<h3 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h3><h4 id="简单方式"><a href="#简单方式" class="headerlink" title="简单方式"></a>简单方式</h4><p>我们可以直接通过 <code>new Object()</code> 创建：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">person.name = <span class="string">'Jack'</span></span><br><span class="line">person.age = <span class="number">18</span></span><br><span class="line"></span><br><span class="line">person.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>每次创建通过 <code>new Object()</code> 比较麻烦，所以可以通过它的简写形式对象字面量来创建：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  name: <span class="string">'Jack'</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  sayName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于上面的写法固然没有问题，但是假如我们要生成两个 <code>person</code> 实例对象呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person1 = &#123;</span><br><span class="line">  name: <span class="string">'Jack'</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  sayName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person2 = &#123;</span><br><span class="line">  name: <span class="string">'Mike'</span>,</span><br><span class="line">  age: <span class="number">16</span>,</span><br><span class="line">  sayName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过上面的代码我们不难看出，这样写的代码太过冗余，重复性太高。</p>
<h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><p>内容引导：</p>
<ul>
<li>构造函数语法</li>
<li>分析构造函数</li>
<li>构造函数和实例对象的关系<ul>
<li>实例的 constructor 属性</li>
<li>instanceof 操作符</li>
</ul>
</li>
<li>普通函数调用和构造函数调用的区别</li>
<li>构造函数的问题</li>
</ul>
<h4 id="构造函数-1"><a href="#构造函数-1" class="headerlink" title="构造函数"></a>构造函数</h4><p>构造函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'Jack'</span>, <span class="number">18</span>);</span><br><span class="line">p1.sayName(); <span class="comment">// =&gt; Jack</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">'Mike'</span>, <span class="number">23</span>)</span><br><span class="line">p2.sayName(); <span class="comment">// =&gt; Mike</span></span><br></pre></td></tr></table></figure>
<h4 id="解析构造函数代码的执行"><a href="#解析构造函数代码的执行" class="headerlink" title="解析构造函数代码的执行"></a>解析构造函数代码的执行</h4><p>而要创建 <code>Person</code> 实例，则必须使用 <code>new</code> 操作符。<br>以这种方式调用构造函数会经历以下 4 个步骤：</p>
<ol>
<li>创建一个新对象</li>
<li>将构造函数的作用域赋给新对象（因此 this 就指向了这个新对象）</li>
<li>执行构造函数中的代码</li>
<li>返回新对象</li>
</ol>
<p>下面是具体的伪代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 当使用 new 操作符调用 Person() 的时候，实际上这里会先创建一个对象</span></span><br><span class="line">  <span class="comment">// var instance = &#123;&#125;</span></span><br><span class="line">  <span class="comment">// 然后让内部的 this 指向 instance 对象</span></span><br><span class="line">  <span class="comment">// this = instance</span></span><br><span class="line">  <span class="comment">// 接下来所有针对 this 的操作实际上操作的就是 instance</span></span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// 在函数的结尾处会将 this 返回，也就是 instance</span></span><br><span class="line">  <span class="comment">// return this</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="构造函数和对象-实例-的关系"><a href="#构造函数和对象-实例-的关系" class="headerlink" title="构造函数和对象(实例)的关系"></a>构造函数和对象(实例)的关系</h4><p>在每一个实例对象中同时有一个 <code>constructor</code> 属性，该属性指向创建该实例的构造函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(p1.constructor === Person); <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log(p2.constructor === Person); <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log(p1.constructor === p2.constructor); <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<p>对象的 <code>constructor</code> 属性最初是用来标识对象类型的，<br>但是，如果要检测对象的类型，还是使用 <code>instanceof</code> 操作符更可靠一些：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(p1 <span class="keyword">instanceof</span> Person); <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log(p2 <span class="keyword">instanceof</span> Person); <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<p>总结：</p>
<ul>
<li>构造函数是根据具体的事物抽象出来的抽象<strong>模板</strong></li>
<li>实例对象是根据抽象的构造函数模板得到的具体实例对象</li>
<li>每一个实例对象都具有一个 <code>constructor</code> 属性，指向创建该实例的构造函数<ul>
<li>注意： <code>constructor</code> 是实例的属性的说法不严谨，具体后面的原型会讲到</li>
</ul>
</li>
<li>可以通过实例的 <code>constructor</code> 属性判断实例和构造函数之间的关系<ul>
<li>注意：这种方式不严谨，推荐使用 <code>instanceof</code> 操作符，后面学原型会解释为什么</li>
</ul>
</li>
</ul>
<h4 id="实例成员和静态成员"><a href="#实例成员和静态成员" class="headerlink" title="实例成员和静态成员"></a>实例成员和静态成员</h4><ul>
<li><p>实例成员</p>
<p>属于对象的成员，每一个对象都具有的成员，但是每个对象具有的这个成员的值是不同的。</p>
<p>例如：p.name。通过Person构造函数创建的对象的name属性的值是不同的</p>
</li>
<li><p>静态成员</p>
<p>属于构造函数的成员，所有对象都共享</p>
<p>Person.verson = ‘1.0’;  </p>
</li>
</ul>
<h4 id="构造函数的问题"><a href="#构造函数的问题" class="headerlink" title="构造函数的问题"></a>构造函数的问题</h4><p>使用构造函数带来的最大的好处就是创建对象更方便了，但是其本身也存在一个浪费内存的问题：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.type = <span class="string">'human'</span>;</span><br><span class="line">  <span class="keyword">this</span>.sayHello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'hello '</span> + <span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'Tom'</span>, <span class="number">18</span>);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">'Jack'</span>, <span class="number">16</span>);</span><br></pre></td></tr></table></figure>
<p>在该示例中，从表面上好像没什么问题，但是实际上这样做，有一个很大的弊端。<br>那就是对于每一个实例对象，<code>type</code> 和 <code>sayHello</code> 都是一模一样的内容，<br>每一次生成一个实例，都必须为重复的内容，多占用一些内存，如果实例对象很多，会造成极大的内存浪费。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(p1.sayHello === p2.sayHello); <span class="comment">// =&gt; false</span></span><br></pre></td></tr></table></figure>
<p>对于这种问题我们可以把需要共享的函数定义到构造函数外部：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span> = <span class="title">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello '</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.type = <span class="string">'human'</span>;</span><br><span class="line">  <span class="keyword">this</span>.sayHello = sayHello;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'Top'</span>, <span class="number">18</span>)</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">'Jack'</span>, <span class="number">16</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p1.sayHello === p2.sayHello) <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<p>这样确实可以了，但是如果有多个需要共享的函数的话就会造成全局命名空间冲突的问题。</p>
<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><ul>
<li>构造函数语法</li>
<li>new执行的四个步骤</li>
<li>构造函数和实例对象的关系<ul>
<li>实例的 constructor 属性</li>
<li>instanceof 操作符  只能判断，不能获取</li>
</ul>
</li>
<li>构造函数的问题</li>
</ul>
<h3 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h3><ul>
<li><strong>构造函数的原型</strong></li>
</ul>
<p>更好的解决对象中方法占用内容的方式的方案： <strong>prototype</strong></p>
<p>JavaScript 规定，每一个<strong>(构造)函数</strong>都有一个 <strong>prototype</strong> 属性，指向另一个对象。<br><strong>这个对象的所有属性和方法，都会被构造函数的对象所拥有</strong>。</p>
<p>这也就意味着，我们可以把所有对象实例需要共享的属性和方法直接定义在 <code>prototype</code> 对象上。</p>
<p>这时所有实例的 <code>type</code> 属性和 <code>sayName()</code> 方法，其实都是同一个内存地址，指向 <strong>prototype</strong> 对象，因此就提高了运行效率。</p>
<ul>
<li><p><strong>对象的原型</strong></p>
<p>每一个对象都有一个<strong>__proto__</strong>的属性，此属性指向构造函数的<strong>prototype</strong></p>
<blockquote>
<p><strong>注意</strong>：<code>__proto__</code> 是非标准属性。</p>
</blockquote>
</li>
</ul>
<h4 id="instanceof-判断"><a href="#instanceof-判断" class="headerlink" title="instanceof 判断"></a>instanceof 判断</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;;</span><br><span class="line">Person.prototype.type = <span class="string">'human'</span>;</span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">'zhansan'</span>, <span class="number">13</span>);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> Person(<span class="string">'lisi'</span>, <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p1.sayName === p2.sayName) <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log(p1 <span class="keyword">instanceof</span> Person)  <span class="comment">// =&gt; true, 判断p1的构造行数是否是Person</span></span><br><span class="line">* 用继承的方式来解释的话，<span class="keyword">instanceof</span> 判断一个构造函数是否是原型链上的函数</span><br></pre></td></tr></table></figure>
<h4 id="typeof和instanceof的用法和区别"><a href="#typeof和instanceof的用法和区别" class="headerlink" title="typeof和instanceof的用法和区别"></a>typeof和instanceof的用法和区别</h4><h5 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h5><p>作用：用于判断一个一个表达式，（对象或者原始值），返回一个字符串。</p>
<p>返回的可能的值（摘自mdn）</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>Undefined</td>
<td>“undefined”</td>
</tr>
<tr>
<td>Null</td>
<td>“object” (历史遗留问题)</td>
</tr>
<tr>
<td>Boolean</td>
<td>“boolean”</td>
</tr>
<tr>
<td>Number</td>
<td>“number”</td>
</tr>
<tr>
<td>String</td>
<td>“string”</td>
</tr>
<tr>
<td>Symbol (ECMAScript 6 新增)</td>
<td>“symbol”</td>
</tr>
<tr>
<td>宿主对象(由JS环境提供)</td>
<td>Implementation-dependent</td>
</tr>
<tr>
<td>函数对象 ( [[Call]] 在ECMA-262条款中实现了)</td>
<td>“function”</td>
</tr>
</tbody>
</table>
<h5 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h5><p>instanceof 运算符用来测试一个对象在其原型链中是否存在一个构造函数的 prototype 属性。</p>
<p>使用规则：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">object <span class="keyword">instanceof</span> <span class="keyword">constructor</span></span><br></pre></td></tr></table></figure>
<p>要求前面是个对象，后面是一个构造函数。而且返回的是布尔型的，不是true就是false。 </p>
<p>常用使用：</p>
<p>由于typeof只能判断类型，所以，数组和对象返回的都是object，这时就需要使用instanceof来判断是否是</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[] <span class="keyword">instanceof</span> <span class="built_in">Array</span> <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>所以，我们可以通过这两种方式封装一个函数专门进行类型判断：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDataType</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(obj === <span class="literal">null</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"null"</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> obj === <span class="string">"object"</span>)&#123;</span><br><span class="line">  	<span class="keyword">if</span>(obj <span class="keyword">instanceof</span> <span class="built_in">Array</span>)&#123;</span><br><span class="line">  		<span class="keyword">return</span> <span class="string">"array"</span>;</span><br><span class="line">  	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  		<span class="keyword">return</span> <span class="string">"object"</span>;</span><br><span class="line">  	&#125;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  	<span class="keyword">return</span> <span class="keyword">typeof</span> obj;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以下是对每个类型的测试</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="number">111</span>)); 	<span class="comment">//number</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="string">"fasd"</span>));	<span class="comment">//string</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="literal">true</span>));	<span class="comment">//boolean</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;));	<span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType([]));	<span class="comment">//array</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(&#123;&#125;));	<span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="literal">null</span>));	<span class="comment">//null</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="literal">undefined</span>));	<span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="regexp">/\n/</span>));	<span class="comment">//object</span></span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line">  <span class="built_in">console</span>.log(getDataType(a));	<span class="comment">//undefined 如果传入没有声明的变量会直接报错</span></span><br></pre></td></tr></table></figure>
<h4 id="构造函数、实例、原型三者之间的关系"><a href="#构造函数、实例、原型三者之间的关系" class="headerlink" title="构造函数、实例、原型三者之间的关系"></a>构造函数、实例、原型三者之间的关系</h4><p><img alt data-src="JavaScript高级/构造函数-实例-原型之间的关系.png" class="lozad"><br><img data-src="/2019/10/24/JavaScript高级/构造函数-实例-原型之间的关系.png" class="lozad"></p>
<h5 id="proto"><a href="#proto" class="headerlink" title="proto"></a><strong>proto</strong></h5><p><em>proto</em>下划线表示私有属性</p>
<p>只能同过浏览器控制台输出对象的构造函数，不能在html文档中使用输出，结果undefined</p>
<h5 id="prototype"><a href="#prototype" class="headerlink" title="prototype"></a><strong>prototype</strong></h5><p>任何函数都具有一个 <strong>prototype</strong> 属性，该属性是一个对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">F</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(F.prototype) <span class="comment">// =&gt; object</span></span><br><span class="line"></span><br><span class="line">F.prototype.sayHi = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hi!'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>构造函数的 <code>prototype</code> 对象默认都有一个 <strong>constructor</strong> 属性，指向 <strong>prototype</strong> 对象所在函数。</p>
<blockquote>
<p>运用可以获取该对象是由哪个构造函数创建的，一般在原型里</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(F.prototype.constructor === F) <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<p>通过构造函数得到的实例对象内部会包含一个指向构造函数的 <code>prototype</code> 对象的指针 <code>__proto__</code>。</p>
<blockquote>
<p>属性有下滑线 “_”，表示私有属性【默认共识】</p>
<p>编程是避免使用该属性，多使用prototype</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> F()</span><br><span class="line"><span class="built_in">console</span>.log(instance.__proto__ === F.prototype) <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<p>实例对象可以直接访问原型对象成员。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">instance.sayHi() <span class="comment">// =&gt; hi!</span></span><br></pre></td></tr></table></figure>
<p>总结：</p>
<ul>
<li>任何函数都具有一个 <code>prototype</code> 属性，该属性是一个对象</li>
<li><code>prototype</code> 对象默认都有一个 <code>constructor</code> 属性，指向 <code>prototype</code> 对象所在函数</li>
<li>通过构造函数得到的实例对象内部会包含一个指向构造函数的 <code>prototype</code> 对象的指针 <code>__proto__</code></li>
<li>所有实例都直接或间接继承了原型对象的成员</li>
</ul>
<h4 id="属性成员的搜索原则：原型链"><a href="#属性成员的搜索原则：原型链" class="headerlink" title="属性成员的搜索原则：原型链"></a>属性成员的搜索原则：原型链</h4><p>了解了 <strong>构造函数-实例-原型对象</strong> 三者之间的关系后，接下来我们来解释一下为什么实例对象可以访问原型对象中的成员。</p>
<p>每当代码读取某个对象的某个属性时，都会执行一次搜索，目标是具有给定名字的属性</p>
<ul>
<li>搜索首先从对象实例本身开始</li>
<li>如果在实例中找到了具有给定名字的属性，则返回该属性的值</li>
<li>如果没有找到，则继续搜索指针指向的原型对象，在原型对象中查找具有给定名字的属性</li>
<li>如果在原型对象中找到了这个属性，则返回该属性的值</li>
</ul>
<p>也就是说，在我们调用 <code>person1.sayName()</code> 的时候，会先后执行两次搜索：</p>
<ul>
<li>首先，解析器会问：“实例 person1 有 sayName 属性吗？”答：“没有。</li>
<li>”然后，它继续搜索，再问：“ person1 的原型有 sayName 属性吗？”答：“有。</li>
<li>”于是，它就读取那个保存在原型对象中的函数。</li>
<li>当我们调用 person2.sayName() 时，将会重现相同的搜索过程，得到相同的结果。</li>
</ul>
<p>而这正是多个对象实例共享原型所保存的属性和方法的基本原理。</p>
<p>总结：</p>
<ul>
<li>先在自己身上找，找到即返回</li>
<li>自己身上找不到，则沿着原型链向上查找，找到即返回</li>
<li>如果一直到原型链的末端还没有找到<ul>
<li>如果是属性则返回 <code>undefined</code></li>
<li>如果是方法会报错</li>
</ul>
</li>
</ul>
<h4 id="实例对象读写原型对象成员"><a href="#实例对象读写原型对象成员" class="headerlink" title="实例对象读写原型对象成员"></a>实例对象读写原型对象成员</h4><p>读取：</p>
<ul>
<li>先在自己身上找，找到即返回</li>
<li>自己身上找不到，则沿着原型链向上查找，找到即返回</li>
<li>如果一直到原型链的末端还没有找到<ul>
<li>如果是属性则返回 <code>undefined</code></li>
<li>如果是方法会报错</li>
</ul>
</li>
</ul>
<p>写入：</p>
<ul>
<li>当实例期望重写原型对象中的某个普通数据成员时实际上会把该成员添加到自己身上</li>
<li>也就是说该行为实际上会屏蔽掉对原型对象成员的访问</li>
</ul>
<h4 id="更简单的原型语法"><a href="#更简单的原型语法" class="headerlink" title="更简单的原型语法"></a>更简单的原型语法</h4><p>我们注意到，前面例子中每添加一个属性和方法就要敲一遍 <code>Person.prototype</code> 。<br>为减少不必要的输入，更常见的做法是用一个包含所有属性和方法的对象字面量来重写整个原型对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">  type: <span class="string">'human'</span>,</span><br><span class="line">  sayHello: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'我叫'</span> + <span class="keyword">this</span>.name + <span class="string">'，我今年'</span> + <span class="keyword">this</span>.age + <span class="string">'岁了'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在该示例中，我们将 <code>Person.prototype</code> 重置到了一个新的对象。<br>这样做的好处就是为 <code>Person.prototype</code> 添加成员简单了，但是也会带来一个问题，那就是原型对象丢失了 <code>constructor</code> 成员。</p>
<p>所以，我们为了保持 <code>constructor</code> 的指向正确，建议的写法是：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype = &#123;</span><br><span class="line">  <span class="keyword">constructor</span>: Person, // =&gt; 手动将 <span class="keyword">constructor</span> 指向正确的构造函数</span><br><span class="line">  type: 'human',</span><br><span class="line">  sayHello: function () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'我叫'</span> + <span class="keyword">this</span>.name + <span class="string">'，我今年'</span> + <span class="keyword">this</span>.age + <span class="string">'岁了'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在以上两步之后，如果再想给原型对象中添加大量属性，则只能一个个添加</span></span><br><span class="line">简单方法就是再重新定义一个对象，然后遍历这个对象，一项项添加到原型对象中</span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">    属性<span class="number">1</span>： 值，</span><br><span class="line">    属性<span class="number">2</span>： 值</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> object) &#123;</span><br><span class="line">    Person.prototype.key = object[key];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>原型图：</p>
<p><img alt data-src="JavaScript高级\对象原型图解析.png" class="lozad"><br><img data-src="/2019/10/24/JavaScript高级/对象原型图解析.png" class="lozad"></p>
<h4 id="原生对象的原型"><a href="#原生对象的原型" class="headerlink" title="原生对象的原型"></a>原生对象的原型</h4><p>  所有函数都有 prototype 属性对象。</p>
<ul>
<li>Object.prototype</li>
<li>Function.prototype</li>
<li>Array.prototype</li>
<li>String.prototype</li>
<li>Number.prototype</li>
<li>Date.prototype</li>
<li>…</li>
</ul>
<p>练习：为数组对象和字符串对象扩展原型方法。</p>
<blockquote>
<p><strong>注意</strong>：内置对象的<strong>prototype</strong>属性(只读属性)不能够直接复制</p>
</blockquote>
<h4 id="原型对象使用建议"><a href="#原型对象使用建议" class="headerlink" title="原型对象使用建议"></a>原型对象使用建议</h4><ul>
<li>属性（一般就是非函数成员）放到构造函数中</li>
<li>方法（一般就是函数）放到原型对象中</li>
<li>如果重置了 <code>prototype</code> 记得修正 <code>constructor</code> 的指向</li>
</ul>
<h3 id="案例：随机方块游戏"><a href="#案例：随机方块游戏" class="headerlink" title="案例：随机方块游戏"></a>案例：随机方块游戏</h3><ul>
<li><p>分析对象：方块对象 Box</p>
</li>
<li><p>分析属性和方法</p>
<ul>
<li>属性 <ul>
<li>left、top  方块的坐标</li>
<li>size         方块的大小（方块是正方形的）</li>
<li>color        方块的颜色</li>
<li>_div           方块对应的div</li>
</ul>
</li>
<li>方法<ul>
<li>random    随机生成位置</li>
</ul>
</li>
</ul>
</li>
<li><p>构造函数</p>
<p>构造函数中设置方块的属性，创建div</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Box</span>(<span class="params">map</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.left = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">this</span>.top = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">this</span>.size = <span class="number">20</span>;</span><br><span class="line">  <span class="keyword">this</span>.color = <span class="string">'red'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  map.appendChild(<span class="keyword">this</span>.div);</span><br><span class="line">  <span class="keyword">this</span>.div.className = <span class="string">'box'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>随机方块的位置</p>
<ol>
<li>随机生成方块的坐标，范围在map中</li>
<li>随机生成方块的颜色</li>
<li>设置div的样式属性</li>
<li>构造函数中调用random</li>
<li>新建app.js创建方块进行测试</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Box.prototype.random = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1. 随机生成坐标</span></span><br><span class="line">  <span class="keyword">var</span> maxX = <span class="number">800</span> / <span class="keyword">this</span>.size - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">var</span> maxY = <span class="number">600</span> / <span class="keyword">this</span>.size - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">this</span>.left = getRandom(<span class="number">0</span>, maxX) * <span class="number">20</span>;</span><br><span class="line">  <span class="keyword">this</span>.top = getRandom(<span class="number">0</span>, maxY) * <span class="number">20</span>;</span><br><span class="line">  <span class="comment">// 2. 随机生成颜色</span></span><br><span class="line">  <span class="keyword">var</span> r = getRandom(<span class="number">0</span>, <span class="number">255</span>);</span><br><span class="line">  <span class="keyword">var</span> g = getRandom(<span class="number">0</span>, <span class="number">255</span>);</span><br><span class="line">  <span class="keyword">var</span> b = getRandom(<span class="number">0</span>, <span class="number">255</span>);</span><br><span class="line">  <span class="keyword">this</span>.color = <span class="string">'rgb('</span>+ r +<span class="string">', '</span>+ g +<span class="string">', '</span>+ b +<span class="string">')'</span>;</span><br><span class="line">  <span class="comment">// 3. 设置div的样式属性</span></span><br><span class="line">  <span class="keyword">this</span>.div.style.left = <span class="keyword">this</span>.left + <span class="string">'px'</span>;</span><br><span class="line">  <span class="keyword">this</span>.div.style.top = <span class="keyword">this</span>.top + <span class="string">'px'</span>;</span><br><span class="line">  <span class="keyword">this</span>.div.style.width = <span class="keyword">this</span>.size + <span class="string">'px'</span>;</span><br><span class="line">  <span class="keyword">this</span>.div.style.height = <span class="keyword">this</span>.size + <span class="string">'px'</span>;  </span><br><span class="line">  <span class="keyword">this</span>.div.style.backgroundColor = <span class="keyword">this</span>.color;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>随机生成[min, max]之间的整数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandom</span>(<span class="params">min, max</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)) + min;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>游戏主逻辑</p>
<ol>
<li><p>创建方块对象</p>
</li>
<li><p>开启定时器，定时随机方块的位置</p>
</li>
<li><p>点击map，判断鼠标的位置是否在方块上</p>
<p>3.1 获取鼠标在map中的坐标</p>
<p>3.2 判断鼠标的位置是否在方块上，如果赢了，停止定时器</p>
</li>
</ol>
</li>
</ul>
<hr>
<h2 id="面向对象游戏案例：贪吃蛇"><a href="#面向对象游戏案例：贪吃蛇" class="headerlink" title="面向对象游戏案例：贪吃蛇"></a>面向对象游戏案例：贪吃蛇</h2><h3 id="案例介绍"><a href="#案例介绍" class="headerlink" title="案例介绍"></a>案例介绍</h3><h4 id="游戏演示"><a href="#游戏演示" class="headerlink" title="游戏演示"></a>游戏演示</h4><p>演示：<a href="snake/index.html">贪吃蛇</a></p>
<h4 id="案例目标"><a href="#案例目标" class="headerlink" title="案例目标"></a>案例目标</h4><p>游戏的目的是用来体会js高级语法的使用 不需要具备抽象对象的能力，使用面向对象的方式分析问题，需要一个漫长的过程。</p>
<h4 id="前置知识点"><a href="#前置知识点" class="headerlink" title="前置知识点"></a>前置知识点</h4><ul>
<li><p>自调用函数</p>
<ul>
<li><p>解决变量冲突的问题</p>
</li>
<li><p>问题：演示不加分号的问题</p>
</li>
<li><p>语法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  	<span class="keyword">var</span> msg = <span class="string">'你猜谁能访问我'</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(msg);</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="built_in">console</span>.log(msg);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：</p>
<ul>
<li>函数要使用()包含起来，把函数变成表达式</li>
<li>后面的小括号是函数调用</li>
</ul>
</blockquote>
</li>
<li><p>问题</p>
<ul>
<li><p>问题1：如果存在多个自调用函数要用分号分割，否则语法错误</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;)()</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;)()</span><br><span class="line">不加 “;” 这里执行只执行前边的函数， <span class="comment">// 结果:1，之后报错</span></span><br><span class="line">解释：会自动把后边的小括号提到上个函数的小括号后边，后边的函数就会被当做参数。</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确</span></span><br><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;)();</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
</li>
<li><p>问题2：当自调用函数 前面有函数声明时，会出错。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 所以建议自调用函数前，加上;</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">'11'</span>);</span><br><span class="line">&#125;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">'22'</span>);</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="comment">// 结果：11，之后报错</span></span><br><span class="line">道理同问题<span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>bind改变函数中的this</p>
<ul>
<li><p>定时器中的this指向谁？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>如何把定时器中的this改变成其它对象？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">'zs'</span>,</span><br><span class="line">    age: <span class="number">18</span></span><br><span class="line">&#125;;</span><br><span class="line">setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;.bind(obj), <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>bind() 可以改变函数内部的this的指向，并返回一个新的函数</p>
</blockquote>
</li>
</ul>
<h3 id="功能实现"><a href="#功能实现" class="headerlink" title="功能实现"></a>功能实现</h3><h4 id="搭建页面"><a href="#搭建页面" class="headerlink" title="搭建页面"></a>搭建页面</h4><p>放一个容器盛放游戏场景 div#map，设置样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#map</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: lightgray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="分析对象"><a href="#分析对象" class="headerlink" title="分析对象"></a>分析对象</h4><ul>
<li>游戏对象</li>
<li>蛇对象</li>
<li>食物对象</li>
</ul>
<h4 id="创建食物对象"><a href="#创建食物对象" class="headerlink" title="创建食物对象"></a>创建食物对象</h4><ul>
<li><p>Food</p>
<ul>
<li><p>属性</p>
<ul>
<li>left   横坐标</li>
<li>top   纵坐标</li>
<li>div   食物对应的div</li>
</ul>
</li>
<li>方法<ul>
<li>random()  随机设置食物的位置 </li>
</ul>
</li>
</ul>
</li>
<li>创建Food的构造函数<ul>
<li>设置属性</li>
<li>创建食物对应的div</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Food</span>(<span class="params">map</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.left = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">this</span>.top = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">this</span>.div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  <span class="keyword">this</span>.div.className = <span class="string">'food'</span>;</span><br><span class="line">  map.appendChild(<span class="keyword">this</span>.div);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>通过原型设置random方法，实现随机设置食物的位置<ul>
<li>随机生成食物的位置</li>
<li>设置食物对象对应div的位置</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Food.prototype.random = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> maxY = <span class="number">800</span> / <span class="number">20</span> - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">var</span> maxX = <span class="number">600</span> / <span class="number">20</span> - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">this</span>.left = getRandom(<span class="number">0</span>, maxX) * <span class="number">20</span>;</span><br><span class="line">  <span class="keyword">this</span>.top = getRandom(<span class="number">0</span>, maxY) * <span class="number">20</span>;</span><br><span class="line">  <span class="keyword">this</span>.div.style.left = <span class="keyword">this</span>.left + <span class="string">'px'</span>;</span><br><span class="line">  <span class="keyword">this</span>.div.style.top = <span class="keyword">this</span>.top + <span class="string">'px'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成min到max之间的随机整数，范围[min, max]</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; min </span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; max </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandom</span>(<span class="params">min, max</span>) </span>&#123; </span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)  + min);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>通过自调用函数，进行封装，通过window暴露Food对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.Food = Food;</span><br></pre></td></tr></table></figure>
<h4 id="创建蛇对象"><a href="#创建蛇对象" class="headerlink" title="创建蛇对象"></a>创建蛇对象</h4><ul>
<li><p>Snake</p>
</li>
<li><p>属性</p>
<ul>
<li>body     数组，蛇的头部和身体，第一个位置是蛇头</li>
<li>direction    蛇运动的方向  默认right  可以是 left  top bottom</li>
<li>map    地图对象</li>
</ul>
</li>
<li><p>方法</p>
<ul>
<li>headLocation   蛇移动的过程或者新增蛇头的时候，计算蛇头的位置</li>
<li>insertHead       新增蛇头</li>
<li>isDead              蛇移动的过程中判断蛇是否撞墙</li>
<li>move                蛇移动</li>
</ul>
</li>
<li><p>Snake构造函数</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Snake</span>(<span class="params">map</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 蛇运动的方向</span></span><br><span class="line">  <span class="keyword">this</span>.direction = <span class="string">'right'</span>;</span><br><span class="line">  <span class="comment">// 存储蛇的头和身体，第一个元素是蛇头 (存储的是蛇对应的div元素)</span></span><br><span class="line">  <span class="keyword">this</span>.body = [];</span><br><span class="line">  <span class="keyword">this</span>.map = map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>insertHead方法插入蛇头，传入蛇头的新的位置<ul>
<li>作用：1. 初始化的时候创建蛇。2. 蛇吃到食物之后新加一节</li>
<li>步骤：<ul>
<li>获取当前的蛇头，修改类样式标记为蛇身体。初始化的时候没有蛇头设置为空对象。</li>
<li>创建新的蛇头-div，设置类样式和位置并追加到map中</li>
<li>把新的蛇头通过数组的unshift方法，放到body数组中的第一个元素</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Snake.prototype.insertHead = <span class="function"><span class="keyword">function</span> (<span class="params">location</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1. 获取当前的蛇头，标记为身体</span></span><br><span class="line">  <span class="keyword">var</span> head = <span class="keyword">this</span>.body[<span class="number">0</span>] || &#123;&#125;;</span><br><span class="line">  <span class="comment">// 因为要插入一个蛇头，所以这节该为body</span></span><br><span class="line">  head.className = <span class="string">'snake-body'</span>;</span><br><span class="line">  <span class="comment">// 2. 创建新的蛇头</span></span><br><span class="line">  <span class="keyword">var</span> newHead = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">  newHead.className = <span class="string">'snake-head'</span>;</span><br><span class="line">  newHead.style.top = location.top + <span class="string">'px'</span>;</span><br><span class="line">  newHead.style.left = location.left + <span class="string">'px'</span>;</span><br><span class="line">  <span class="keyword">this</span>._map.appendChild(newHead);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 把元素插入到数组的第一个位置</span></span><br><span class="line">  <span class="keyword">this</span>.body.unshift(newHead);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>headLocation方法<ul>
<li>作用：插入蛇头之前计算蛇头的位置，蛇在移动过程中计算蛇头的新位置</li>
<li>步骤：<ul>
<li>如果body数组的长度为0，返回0坐标</li>
<li>如果body数组不为空，取出第一个元素(蛇头)，获取蛇头当前的坐标</li>
<li>根据蛇运动的方向，设置新坐标</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Snake.prototype.headLocation = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1. 如果蛇的body属性长度为0，第一个放进入的认为是蛇头</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.body.length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="attr">left</span>: <span class="number">0</span>, <span class="attr">top</span>: <span class="number">0</span>&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 2. 如果蛇不为空，取出蛇头的位置</span></span><br><span class="line">  <span class="keyword">var</span> head = <span class="keyword">this</span>.body[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">var</span> left = head.offsetLeft;</span><br><span class="line">  <span class="keyword">var</span> top = head.offsetTop;</span><br><span class="line">  <span class="keyword">var</span> step = <span class="number">20</span>;</span><br><span class="line">  <span class="comment">// 3. 判断蛇运动的方向</span></span><br><span class="line">  <span class="keyword">switch</span> (<span class="keyword">this</span>.direction) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'right'</span>: </span><br><span class="line">      left += step;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'left'</span>:</span><br><span class="line">      left -= step;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'top'</span>: </span><br><span class="line">      top -= step;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'bottom'</span>:</span><br><span class="line">      top += step;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="attr">left</span>: left, <span class="attr">top</span>: top&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>isDead方法</p>
<p>蛇移动的过程中判断蛇是否撞墙</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断蛇是否死亡</span></span><br><span class="line">Snake.prototype.isDead = <span class="function"><span class="keyword">function</span> (<span class="params">location</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (location.left &lt; <span class="number">0</span> || </span><br><span class="line">          location.top &lt; <span class="number">0</span> || </span><br><span class="line">          location.left &gt;= <span class="number">800</span> || </span><br><span class="line">          location.top &gt;= <span class="number">600</span></span><br><span class="line">         );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>move方法<ul>
<li>作用：蛇移动的方法，传入food对象(蛇移动的过程中判断是否死亡，是否吃到食物)</li>
<li>步骤：<ul>
<li>获取蛇头移动之后的位置</li>
<li>判断蛇是否死亡，如果蛇撞墙，返回true，游戏结束</li>
<li>判断蛇肉位置和食物位置是否相等<ul>
<li>如果相等插入一个蛇肉</li>
<li>随机食物位置</li>
<li>返回false，游戏没有结束</li>
</ul>
</li>
<li>蛇移动<ul>
<li>获取当前蛇头，通过类样式标记为蛇身体</li>
<li>从body中弹出蛇的最后一个身体作为新的蛇头，通过类样式标记为蛇头，设置新位置</li>
<li>把新的蛇头，放到body数组的第一个元素之前</li>
<li>返回false，游戏没有结束</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Snake.prototype.move = <span class="function"><span class="keyword">function</span> (<span class="params">food</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 获取蛇头的新位置</span></span><br><span class="line">  <span class="keyword">var</span> location = <span class="keyword">this</span>.headLocation();</span><br><span class="line">  <span class="comment">// 1. 判断蛇是否死亡</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.isDead(location)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 2. 蛇移动的过程中判断是否吃到食物</span></span><br><span class="line">  <span class="keyword">if</span> (location.left === food.left &amp;&amp; location.top === food.top) &#123;</span><br><span class="line">    <span class="comment">// 吃到食物，加蛇肉，重新生成食物的位置</span></span><br><span class="line">    <span class="keyword">this</span>.insertHead(location);</span><br><span class="line">    food.random();</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. 蛇移动</span></span><br><span class="line">  <span class="keyword">var</span> currentHead = <span class="keyword">this</span>.body[<span class="number">0</span>];</span><br><span class="line">  currentHead.className = <span class="string">'snake-body'</span>;</span><br><span class="line">  <span class="keyword">var</span> currentTail = <span class="keyword">this</span>.body.pop();</span><br><span class="line">  currentTail.className = <span class="string">'snake-head'</span>;</span><br><span class="line">  currentTail.style.left = location.left + <span class="string">'px'</span>;</span><br><span class="line">  currentTail.style.top = location.top + <span class="string">'px'</span>;</span><br><span class="line">  <span class="keyword">this</span>.body.unshift(currentTail);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>在自调用函数中暴露Snake对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.Snake = Snake;</span><br></pre></td></tr></table></figure>
<h4 id="创建游戏对象"><a href="#创建游戏对象" class="headerlink" title="创建游戏对象"></a>创建游戏对象</h4><p>游戏对象，用来管理游戏中的所有对象和开始游戏</p>
<ul>
<li><p>Game</p>
<ul>
<li><p>属性</p>
<ul>
<li><p>food</p>
</li>
<li><p>snake</p>
</li>
</ul>
</li>
<li><p>方法</p>
<ul>
<li>start            开始游戏（绘制所有游戏对象）</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>构造函数</p>
<ul>
<li>创建食物属性，随机食物位置</li>
<li>创建蛇属性</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Game</span>(<span class="params">map</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.food = <span class="keyword">new</span> Food(map);</span><br><span class="line">  <span class="keyword">this</span>.food.random();</span><br><span class="line">  <span class="keyword">this</span>.snake = <span class="keyword">new</span> Snake(map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>开始游戏，渲染食物对象和蛇对象<ul>
<li>开启定时器，调用蛇移动的方法</li>
<li>判断游戏是否结束，如果结束，清除定时器</li>
<li>给文档注册键盘监听事件，监听用户按下的上下左右，改变蛇移动的方向</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">Game.prototype.start = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> game = <span class="keyword">this</span>;</span><br><span class="line">  <span class="comment">// 开启定时器，移动蛇</span></span><br><span class="line">  <span class="keyword">var</span> timerId = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> gameOver = game.snake.move(game.food);</span><br><span class="line">    <span class="keyword">if</span> (gameOver) &#123;</span><br><span class="line">      alert(<span class="string">'游戏结束'</span>);</span><br><span class="line">      clearInterval(timerId);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">document</span>.onkeydown = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 37 左 38 上 39 右 40 下</span></span><br><span class="line">    <span class="built_in">console</span>.log(e.keyCode);</span><br><span class="line">    <span class="keyword">switch</span> (e.keyCode) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">37</span>:</span><br><span class="line">        <span class="keyword">if</span> (game.snake.direction === <span class="string">'right'</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        game.snake.direction = <span class="string">'left'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">38</span>:</span><br><span class="line">        <span class="keyword">if</span> (game.snake.direction === <span class="string">'bottom'</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        game.snake.direction = <span class="string">'top'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">39</span>:</span><br><span class="line">        <span class="keyword">if</span> (game.snake.direction === <span class="string">'left'</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        game.snake.direction = <span class="string">'right'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">40</span>:</span><br><span class="line">        <span class="keyword">if</span> (game.snake.direction === <span class="string">'top'</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        game.snake.direction = <span class="string">'bottom'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="整理代码"><a href="#整理代码" class="headerlink" title="整理代码"></a>整理代码</h4><p>现在的代码结构清晰，谁出问题就找到对应的js文件即可。<br>通过自调用函数，已经防止了变量命名污染的问题</p>
<p>但是，由于js文件数较多，需要在页面上引用，会产生文件依赖的问题(先引入那个js，再引入哪个js)<br>将来通过工具把js文件合并并压缩。现在手工合并js文件演示</p>
<hr>
<h2 id="继承-知道"><a href="#继承-知道" class="headerlink" title="继承(知道)"></a>继承(知道)</h2><p>后续react课程使用到了继承</p>
<p>方便以后跟其他程序员沟通</p>
<h3 id="什么是继承"><a href="#什么是继承" class="headerlink" title="什么是继承"></a>什么是继承</h3><ul>
<li>现实生活中的继承</li>
<li>程序中的继承<ul>
<li>子类型继承父类型的成员，让代码重用</li>
</ul>
</li>
</ul>
<h3 id="对象的”继承”"><a href="#对象的”继承”" class="headerlink" title="对象的”继承”"></a>对象的”继承”</h3><p>1、可以用jQuery中的extend()方法</p>
<p>2、通过遍历把一个对象的所有成员拷贝给另一个对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对象的拷贝</span></span><br><span class="line">自己模仿jQuery浅拷贝对象，通过遍历一个对象将属性拷贝到另一个对象</span><br><span class="line"><span class="comment">// 复制对象的成员给另一个对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">parent, child</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> parent) &#123;</span><br><span class="line">    <span class="comment">// 不复制同名的属性</span></span><br><span class="line">    <span class="keyword">if</span> (child[key]) &#123;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    child[key] = parent[key];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="原型继承"><a href="#原型继承" class="headerlink" title="原型继承"></a>原型继承</h3><ul>
<li>继承：类型和类型之间的关系</li>
<li>学生类型  老师类型  -&gt; Person类型</li>
<li>继承目的： 把子类型中共同的成员提取到父类型中，代码重用</li>
<li>可以方便的基础父类型的原型中的方法，但是属性的继承无意义</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'zs'</span>;</span><br><span class="line">  <span class="keyword">this</span>.age = <span class="number">18</span>;</span><br><span class="line">  <span class="keyword">this</span>.sex = <span class="string">'男'</span>;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'大家好，我是'</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.score = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype = <span class="keyword">new</span> Person();</span><br><span class="line">Student.prototype.constructor = Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> Student();</span><br><span class="line"><span class="built_in">console</span>.log(s1.constructor);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：当设置了构造函数的prototype之后，别忘记设置constructor</p>
<p>问题：原型继承，无法设置构造函数的参数<strong>Student.prototype = new Person();</strong>只执行一次，无法给属性传值</p>
</blockquote>
<h3 id="借用构造函数"><a href="#借用构造函数" class="headerlink" title="借用构造函数"></a>借用构造函数</h3><ul>
<li><p>前置知识 call</p>
<p>使用call可以改变函数中的this，并且可以立即调用函数</p>
<p>和bind不同的是，bind会返回一个新函数，而call是直接调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(x + y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  name: <span class="string">'zs'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// call()  改变函数中的this，直接调用函数</span></span><br><span class="line">fn.call(o, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>借用构造函数</p>
<p>可以方便的继承父类型的属性，但是无法继承原型中的方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.sayHi = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, sex, score</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>, name, age, sex);</span><br><span class="line">  <span class="keyword">this</span>.score = score;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s1 = <span class="keyword">new</span> Student(<span class="string">'zs'</span>, <span class="number">18</span>, <span class="string">'男'</span>, <span class="number">100</span>);</span><br><span class="line"><span class="built_in">console</span>.dir(s1);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>借用构造函数继承的问题：无法继承方法</p>
</blockquote>
</li>
</ul>
<h3 id="组合继承：原型继承-借用构造函数继承"><a href="#组合继承：原型继承-借用构造函数继承" class="headerlink" title="组合继承：原型继承+借用构造函数继承"></a>组合继承：原型继承+借用构造函数继承</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.sex = sex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.sayHi = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'大家好，我是'</span> + <span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, sex, score</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 借用构造函数</span></span><br><span class="line">  Person.call(<span class="keyword">this</span>, name, age, sex);</span><br><span class="line">  <span class="keyword">this</span>.score = score;</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype = Person.prototype;</span><br><span class="line">Student.prototype.constructor = Student;</span><br><span class="line"><span class="comment">// 学生特有的方法</span></span><br><span class="line">Student.prototype.exam = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'考试'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>小结</strong>：</p>
<p>继承：子类型所有对象具有父类型的成员</p>
<p>关于继承要记住下面两句代码</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Student.prototype = Person.prototype;</span><br><span class="line">Student.prototype.constructor = Student;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="函数进阶"><a href="#函数进阶" class="headerlink" title="函数进阶"></a>函数进阶</h2><h3 id="函数的定义方式"><a href="#函数的定义方式" class="headerlink" title="函数的定义方式"></a>函数的定义方式</h3><ul>
<li>函数声明</li>
<li>函数表达式</li>
<li><code>new Function</code></li>
</ul>
<h4 id="函数声明"><a href="#函数声明" class="headerlink" title="函数声明"></a>函数声明</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="函数表达式"><a href="#函数表达式" class="headerlink" title="函数表达式"></a>函数表达式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="new-Function"><a href="#new-Function" class="headerlink" title="new Function"></a><strong>new Function</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fn = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'return a + b;'</span>);</span><br><span class="line"><span class="keyword">var</span> sum = fn(<span class="number">5</span>, <span class="number">6</span>);</span><br><span class="line"><span class="built_in">console</span>.log(sum);</span><br></pre></td></tr></table></figure>
<h4 id="函数声明与函数表达式的区别"><a href="#函数声明与函数表达式的区别" class="headerlink" title="函数声明与函数表达式的区别"></a>函数声明与函数表达式的区别</h4><ul>
<li>函数声明必须有名字</li>
<li><strong>函数声明会函数提升</strong>，在预解析阶段就已创建，声明前后都可以调用</li>
<li>函数表达式类似于变量赋值，提升的仅仅是变量声明</li>
<li>函数表达式可以没有名字，例如匿名函数</li>
<li>函数表达式没有变量提升，在执行阶段创建，必须在表达式执行之后才可以调用</li>
</ul>
<p>下面是一个根据条件定义函数的例子(了解)：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">f</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码执行结果在不同浏览器中结果不一致。有些浏览器里不会进行函数提升(Chrome)，有些浏览器中会函数提升。</p>
<p>不过我们可以使用函数表达式解决上面的问题：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  f = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">  &#125;;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  f = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="函数的调用方式"><a href="#函数的调用方式" class="headerlink" title="函数的调用方式"></a>函数的调用方式</h3><ul>
<li>普通函数</li>
<li>构造函数</li>
<li>对象方法</li>
</ul>
<h3 id="函数内-this-指向的不同场景"><a href="#函数内-this-指向的不同场景" class="headerlink" title="函数内 this 指向的不同场景"></a>函数内 <code>this</code> 指向的不同场景</h3><p>函数的调用方式决定了 <code>this</code> 指向的不同：</p>
<table>
<thead>
<tr>
<th>调用方式</th>
<th>非严格模式</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>普通函数调用</td>
<td>window</td>
<td>严格模式下是 undefined</td>
</tr>
<tr>
<td>构造函数调用</td>
<td>实例对象</td>
<td>原型方法中 this 也是实例对象</td>
</tr>
<tr>
<td>对象方法调用</td>
<td>该方法所属对象</td>
<td>紧挨着的对象</td>
</tr>
<tr>
<td>事件绑定方法</td>
<td>绑定事件对象</td>
<td></td>
</tr>
<tr>
<td>定时器函数</td>
<td>window</td>
</tr>
</tbody>
</table>
<p>这就是对函数内部 this 指向的基本整理，写代码写多了自然而然就熟悉了。</p>
<blockquote>
<p><strong>注意</strong>：<strong>函数内部的this，是由函数的调用方式决定的。</strong></p>
</blockquote>
<h3 id="函数也是对象"><a href="#函数也是对象" class="headerlink" title="函数也是对象"></a>函数也是对象</h3><ul>
<li>所有函数都是 <code>Function</code> 的实例</li>
</ul>
<h3 id="改变函数中的this"><a href="#改变函数中的this" class="headerlink" title="改变函数中的this"></a>改变函数中的this</h3><ul>
<li><p>为什么要改变函数内部的this</p>
<p>例如：我们经常在定时器外部备份 this 引用，然后在定时器函数内部使用外部 this 的引用。</p>
</li>
<li><p><strong>函数有三个方法</strong>可以改变内部的this：call、apply、bind。</p>
</li>
</ul>
<h4 id="call"><a href="#call" class="headerlink" title="call"></a>call</h4><p><code>call()</code> 方法调用一个函数, 其具有一个指定的 <code>this</code> 值和分别地提供的参数(参数的列表)。</p>
<p>粗略理解： 我函数有一个方法call，我调用这个方法，就可以改变我的this指向，这个指向的值就是第一个参数</p>
<p>语法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.call(thisArg[, arg1[, arg2[, ...]]])</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<ul>
<li><p><code>thisArg</code></p>
<ul>
<li>在 fun 函数运行时指定的 this 值</li>
<li>如果指定了 null 或者 undefined 则内部 this 指向 window</li>
</ul>
</li>
<li><p><code>arg1, arg2, ...</code></p>
<ul>
<li>指定的参数列表</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">// 函数的方法call</span></span><br><span class="line">   <span class="comment">// 1. 改变函数内部的this</span></span><br><span class="line">   <span class="comment">// 2. 立即调用函数 </span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">     <span class="built_in">console</span>.log(a + b);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">window</span>.fn(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">   <span class="keyword">var</span> obj = &#123;</span><br><span class="line">     age: <span class="number">18</span></span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="comment">// call的参数</span></span><br><span class="line">   <span class="comment">// 第一个参数  改变的this的指向</span></span><br><span class="line">   <span class="comment">// 第二个参数...   是调用的函数fn的参数列表</span></span><br><span class="line">   fn.call(obj, <span class="number">4</span>, <span class="number">6</span>);</span><br><span class="line">结果：</span><br><span class="line">   	<span class="comment">// 首先调用函数fn，默认为window顶级函数在调用，得出结果：</span></span><br><span class="line">       <span class="built_in">window</span></span><br><span class="line">       <span class="number">3</span></span><br><span class="line">	<span class="comment">// 其次通过call改变函数内部this指向到obj对象，然后调用函数，结果：</span></span><br><span class="line">       <span class="built_in">Object</span></span><br><span class="line">       <span class="number">10</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>应用：</p>
<ol>
<li><p>借用构造函数</p>
</li>
<li><p>借用其他对象的方法</p>
<p>列如：数组的 .push()方法【也是函数】，也拥有call()，，这三个方法。</p>
<p>默认是数组调用 .push()，push()里的this就指向调用的那个数组。</p>
<p>通过调用call()这个方法，传入obj对象，那么数组再次调用 .push()，push()里的this就指向调用的这个obj</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 伪数组</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="number">0</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="number">1</span>: <span class="number">10</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="number">11</span>,</span><br><span class="line">  <span class="number">3</span>: <span class="number">20</span>,</span><br><span class="line">  length: <span class="number">4</span></span><br><span class="line">&#125;;</span><br><span class="line">obj.push(<span class="number">40</span>); <span class="comment">// 伪数组直接push就会报错</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.push.call(obj, <span class="number">30</span>); </span><br><span class="line"><span class="built_in">console</span>.log(obj);	<span class="comment">// 多了4:30这个单元，push成功</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">Array</span>.prototype.splice.call(obj, <span class="number">0</span>, <span class="number">3</span>); </span><br><span class="line"><span class="built_in">console</span>.log(a);  <span class="comment">// 输出：[100, 10, 11] , splice拿取数组从零开始3个元素</span></span><br><span class="line"><span class="built_in">console</span>.log(obj)  <span class="comment">// 输出：&#123;0: 20, 1: 30, length: 2&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 借用Object的toString()</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">5</span>, <span class="number">9</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.toString());  <span class="comment">// 普通的转换为字符串： 5, 9</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(arr));</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h4><p>当需要call()方法需要使用多个参数的时候，不方便，就可用apply() 方法传递一个数组。</p>
<p><code>apply()</code> 方法调用一个函数, 其具有一个指定的 <code>this</code> 值，以及作为一个数组（或类似数组的对象）提供的参数。</p>
<p>语法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.apply(thisArg, [argsArray])</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<ul>
<li><code>thisArg</code></li>
<li><code>argsArray</code></li>
</ul>
<p><code>apply()</code> 与 <code>call()</code> 非常相似，<strong>不同之处在于提供参数</strong>的方式。<br><code>apply()</code> 使用参数数组而不是一组参数列表。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.apply(<span class="keyword">this</span>, [<span class="string">'eat'</span>, <span class="string">'bananas'</span>])</span><br></pre></td></tr></table></figure>
<p><strong>应用：把数组展开</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Math.max(3, 5, 6);</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">5</span>, <span class="number">10</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>];</span><br><span class="line"><span class="comment">// Math.max不能求数组中的最大值</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, arr));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.max.apply(<span class="built_in">Math</span>, arr));</span><br><span class="line"><span class="comment">// console.log(1, 2, 3);</span></span><br><span class="line"><span class="comment">// console.log(arr);</span></span><br><span class="line"><span class="built_in">console</span>.log.apply(<span class="literal">null</span>, arr);</span><br><span class="line"><span class="built_in">console</span>.log.apply(<span class="built_in">console</span>, arr);</span><br></pre></td></tr></table></figure>
<h4 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h4><ul>
<li>bind不会调用函数，会返回一个新的函数</li>
<li>新函数内部的this是bind的第一个参数</li>
<li>原函数中的参数，通过第二个参数传递</li>
</ul>
<p>语法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.bind(thisArg[, arg1[, arg2[, ...]]])</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<ul>
<li><p>thisArg</p>
<ul>
<li>当绑定函数被调用时，该参数会作为原函数运行时的 this 指向。当使用new 操作符调用绑定函数时，该参数无效。</li>
</ul>
</li>
<li><p>arg1, arg2, …</p>
<ul>
<li>当绑定函数被调用时，这些参数将置于实参之前传递给被绑定的方法。</li>
</ul>
</li>
</ul>
<p>返回值：</p>
<p>返回由指定的this值和初始化参数改造的原函数拷贝。</p>
<p>示例1：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  name: <span class="string">'zs'</span>,</span><br><span class="line">  fun: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">    &#125;.bind(<span class="keyword">this</span>), <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.fun();  此函数中的<span class="keyword">this</span>指的是对象的<span class="keyword">this</span>，而不是在计时器中的<span class="keyword">this</span>【<span class="built_in">window</span>】</span><br></pre></td></tr></table></figure>
<p>示例2：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 事件处理函数中的this  是触发该事件的对象</span></span><br><span class="line">  <span class="comment">// 通过bind 改变事件处理函数中this的指向</span></span><br><span class="line">&#125;.bind(obj);</span><br></pre></td></tr></table></figure>
<h4 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h4><ul>
<li><p>call 和 apply 特性一样</p>
<ul>
<li>都是用来调用函数，而且是立即调用</li>
<li>但是可以在调用函数的同时，通过第一个参数指定函数内部 <code>this</code> 的指向</li>
<li>call 调用的时候，参数必须以参数列表的形式进行传递，也就是以逗号分隔的方式依次传递即可</li>
<li>apply 调用的时候，参数必须是一个数组，然后在执行的时候，会将数组内部的元素一个一个拿出来，与形参一一对应进行传递</li>
<li>如果第一个参数指定了 <code>null</code> 或者 <code>undefined</code> 则内部 this 指向 window</li>
</ul>
</li>
<li><p>bind</p>
<ul>
<li>可以用来指定内部 this 的指向，然后生成一个改变了 this 指向的新的函数</li>
<li>它和 call、apply 最大的区别是：bind 不会调用</li>
<li>bind 支持传递参数，它的传参方式比较特殊，一共有两个位置可以传递<ul>
<li><ol>
<li>在 bind 的同时，以参数列表的形式进行传递</li>
</ol>
</li>
<li><ol start="2">
<li>在调用的时候，以参数列表的形式进行传递</li>
</ol>
</li>
<li>那到底以谁 bind 的时候传递的参数为准呢还是以调用的时候传递的参数为准</li>
<li>两者合并：bind 的时候传递的参数和调用的时候传递的参数会合并到一起，传递到函数内部</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="函数的其它成员"><a href="#函数的其它成员" class="headerlink" title="函数的其它成员"></a>函数的其它成员</h3><ul>
<li>arguments<ul>
<li>实参集合</li>
</ul>
</li>
<li>caller<ul>
<li>函数的调用者</li>
</ul>
</li>
<li>length<ul>
<li>形参的个数</li>
</ul>
</li>
<li>name<ul>
<li>函数的名称</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x, y, z</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(fn.length) <span class="comment">// =&gt; 形参的个数</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>) <span class="comment">// 伪数组实参参数集合</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.callee === fn) <span class="comment">// 函数本身</span></span><br><span class="line">  <span class="built_in">console</span>.log(fn.caller) <span class="comment">// 函数的调用者  输出结果：function f() &#123; fn (10, 20, 30) &#125;;</span></span><br><span class="line">  <span class="built_in">console</span>.log(fn.name) <span class="comment">// =&gt; 函数的名字</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  fn(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f()</span><br></pre></td></tr></table></figure>
<h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><ul>
<li>函数可以作为参数</li>
<li>函数可以作为返回值</li>
</ul>
<h4 id="作为参数"><a href="#作为参数" class="headerlink" title="作为参数"></a>作为参数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eat</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'吃完了'</span>);</span><br><span class="line">    callback();</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line">eat(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'去唱歌'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 结果：吃完饭去唱歌！</span></span><br></pre></td></tr></table></figure>
<h4 id="作为返回值"><a href="#作为返回值" class="headerlink" title="作为返回值"></a>作为返回值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">genFun</span> (<span class="params">type</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) === type;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> isArray = genFun(<span class="string">'[object Array]'</span>);</span><br><span class="line"><span class="keyword">var</span> isObject = genFun(<span class="string">'[object Object]'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(isArray([])); <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="built_in">console</span>.log(isArray(&#123;&#125;)); <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<h4 id="作用域、作用域链、预解析"><a href="#作用域、作用域链、预解析" class="headerlink" title="作用域、作用域链、预解析"></a>作用域、作用域链、预解析</h4><ul>
<li>全局作用域</li>
<li>函数作用域</li>
<li><strong>没有块级作用域</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> foo = <span class="string">'bar'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(foo);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure>
<p>作用域链示例代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> c = <span class="number">30</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(a + b + c);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn2</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> d = <span class="number">40</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(c + d);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  fn1();</span><br><span class="line">  fn2();</span><br><span class="line">&#125;</span><br><span class="line">fn(); </span><br><span class="line">结果： <span class="number">60</span></span><br><span class="line">	  c is not defined</span><br></pre></td></tr></table></figure>
<ul>
<li>内层作用域可以访问外层作用域，反之不行</li>
</ul>
<h4 id="什么是闭包"><a href="#什么是闭包" class="headerlink" title="什么是闭包"></a>什么是闭包</h4><p><strong>闭包</strong>：闭包是函数和声明该函数的词法环境的组合。</p>
<ul>
<li>闭包就是能够读取其他函数内部变量的函数，</li>
<li>闭包就是将函数内部和函数外部连接起来的一座桥梁。</li>
</ul>
<p>闭包的用途：</p>
<ul>
<li>可以在函数外部读取函数内部成员</li>
<li>让函数内成员始终存活在内存中</li>
</ul>
<h4 id="一些关于闭包的例子"><a href="#一些关于闭包的例子" class="headerlink" title="一些关于闭包的例子"></a>一些关于闭包的例子</h4><p>闭包演示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> n = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = fn();</span><br><span class="line"><span class="built_in">console</span>.log(f());</span><br></pre></td></tr></table></figure>
<p>案例1：第一次调用生成一个随机数，以后每次调用都返回这个随机数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandom</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> random = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * <span class="number">10</span>) + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> random; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fn = getRandom();</span><br><span class="line"><span class="built_in">console</span>.log(fn());</span><br><span class="line"><span class="built_in">console</span>.log(fn());</span><br></pre></td></tr></table></figure>
<p>案例2：写一个函数返回一个函数，返回的函数可以实现1+m,  100+m, 1000+m</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFun</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">m</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n + m;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 求 100 + m</span></span><br><span class="line"><span class="keyword">var</span> fn100 = getFun(<span class="number">100</span>);</span><br><span class="line"><span class="comment">// 求 1000 + m</span></span><br><span class="line"><span class="keyword">var</span> fn1000 = getFun(<span class="number">1000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(fn100(<span class="number">1</span>));</span><br><span class="line"><span class="built_in">console</span>.log(fn1000(<span class="number">1</span>));</span><br></pre></td></tr></table></figure>
<p>案例3：闭包的经典案例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> heroes = <span class="built_in">document</span>.getElementById(<span class="string">'heroes'</span>);</span><br><span class="line"><span class="keyword">var</span> list = heroes.children;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">  <span class="keyword">var</span> li = list[i];</span><br><span class="line"> </span><br><span class="line">  (<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line">    li.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 点击li的时候输出当前li对应的索引</span></span><br><span class="line">      <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>案例4：点击按钮设置文档字体大小</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个函数，设置body的字体大小</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeFun</span>(<span class="params">size</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.body.style.fontSize = size + <span class="string">'px'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">btn1.onclick = makeFun(<span class="number">12</span>);</span><br><span class="line">btn2.onclick = makeFun(<span class="number">14</span>);</span><br><span class="line">btn3.onclick = makeFun(<span class="number">16</span>);</span><br></pre></td></tr></table></figure>
<p>案例5：定时器输出循环变量i</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'start'</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(i);</span><br><span class="line">    &#125;, <span class="number">0</span>);</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'end'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><p>setTimeout的执行原理</p>
<p>所有的js代码都在执行栈上执行，定时器和注册事件的函数会放到一个任务队列上。</p>
<p>当执行栈上的代码执行完毕后，才会执行任务队列上的任务。</p>
</li>
</ul>
<h4 id="闭包的思考题"><a href="#闭包的思考题" class="headerlink" title="闭包的思考题"></a>闭包的思考题</h4><p>思考题 1：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"The Window"</span>;</span><br><span class="line"><span class="keyword">var</span> object = &#123;</span><br><span class="line">  name: <span class="string">"My Object"</span>,</span><br><span class="line">  getNameFunc: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(object.getNameFunc()())</span><br></pre></td></tr></table></figure>
<p>思考题 2：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">"The Window"</span>;　　</span><br><span class="line"><span class="keyword">var</span> object = &#123;　　　　</span><br><span class="line">  name: <span class="string">"My Object"</span>,</span><br><span class="line">  getNameFunc: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> that.name;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(object.getNameFunc()())</span><br></pre></td></tr></table></figure>
<h4 id="小结-2"><a href="#小结-2" class="headerlink" title="小结"></a>小结</h4><h3 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h3><ul>
<li>什么是递归<ul>
<li>函数自己调用自己</li>
<li>递归需要有结束的条件</li>
</ul>
</li>
</ul>
<h4 id="递归执行模型"><a href="#递归执行模型" class="headerlink" title="递归执行模型"></a>递归执行模型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">111</span>)</span><br><span class="line">  fn2()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'fn1'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">222</span>)</span><br><span class="line">  fn3()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'fn2'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn3</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">333</span>)</span><br><span class="line">  fn4()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'fn3'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn4</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">444</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'fn4'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn1()</span><br></pre></td></tr></table></figure>
<h4 id="举个栗子：计算阶乘的递归函数"><a href="#举个栗子：计算阶乘的递归函数" class="headerlink" title="举个栗子：计算阶乘的递归函数"></a>举个栗子：计算阶乘的递归函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span> (<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (num &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> num * factorial(num - <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="递归应用场景【深拷贝】"><a href="#递归应用场景【深拷贝】" class="headerlink" title="递归应用场景【深拷贝】"></a>递归应用场景【深拷贝】</h4><ul>
<li><p>深拷贝</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 深拷贝</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">o1, o2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> o1) &#123;</span><br><span class="line">    <span class="keyword">if</span> (o1[key] <span class="keyword">instanceof</span> <span class="built_in">Array</span>) &#123;</span><br><span class="line">      <span class="comment">// 如果key是数组类型 Array？   []</span></span><br><span class="line">      o2[key] = [];</span><br><span class="line">      deepCopy(o1[key], o2[key]);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (o1[key] <span class="keyword">instanceof</span> <span class="built_in">Object</span>) &#123;</span><br><span class="line">      <span class="comment">// 如果key是复杂类型 Object？  &#123;&#125;</span></span><br><span class="line">      o2[key] = &#123;&#125;;</span><br><span class="line">      deepCopy(o1[key], o2[key]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 如果key这个属性 是基本类型</span></span><br><span class="line">      o2[key] = o1[key];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>遍历 DOM 树</li>
</ul>
<hr>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><ul>
<li>了解正则表达式基本语法</li>
<li>能够使用JavaScript的正则对象</li>
</ul>
<h3 id="正则表达式简介"><a href="#正则表达式简介" class="headerlink" title="正则表达式简介"></a>正则表达式简介</h3><h4 id="什么是正则表达式"><a href="#什么是正则表达式" class="headerlink" title="什么是正则表达式"></a>什么是正则表达式</h4><p>正则表达式：用于<strong>匹配规律规则</strong>的表达式，正则表达式最初是科学家对人类神经系统的工作原理的早期研究，现在在编程语言中有广泛的应用。正则表通常被用来检索、替换那些符合某个模式(<strong>规则</strong>)的文本。<br>正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个<strong>规则</strong> ==》“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑【规则】。</p>
<h4 id="正则表达式的作用"><a href="#正则表达式的作用" class="headerlink" title="正则表达式的作用"></a>正则表达式的作用</h4><ol>
<li>给定的字符串是否符合正则表达式的过滤逻辑(匹配)</li>
<li>可以通过正则表达式，从字符串中获取我们想要的特定部分(提取)</li>
<li>强大的字符串替换能力(替换)</li>
</ol>
<h4 id="正则表达式的特点"><a href="#正则表达式的特点" class="headerlink" title="正则表达式的特点"></a>正则表达式的特点</h4><ol>
<li>灵活性、逻辑性和功能性非常的强</li>
<li>可以迅速地用极简单的方式达到字符串的复杂控制</li>
<li>对于刚接触的人来说，比较晦涩难懂</li>
</ol>
<h3 id="正则表达式的测试"><a href="#正则表达式的测试" class="headerlink" title="正则表达式的测试"></a>正则表达式的测试</h3><ul>
<li><a href="https://c.runoob.com/front-end/854" target="_blank" rel="noopener">在线测试正则</a></li>
<li>工具中使用正则表达式<ul>
<li>sublime/vscode/word</li>
<li>演示替换所有的数字</li>
</ul>
</li>
</ul>
<h3 id="正则表达式的组成"><a href="#正则表达式的组成" class="headerlink" title="正则表达式的组成"></a>正则表达式的组成</h3><ul>
<li>普通字符abc  123</li>
<li>特殊字符(元字符)：正则表达式中有特殊意义的字符\d  \w</li>
</ul>
<p>示例演示：</p>
<ul>
<li><code>\d</code> 匹配数字   </li>
<li><code>ab\d</code> 匹配 ab1、ab2</li>
</ul>
<h3 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h3><p>通过测试工具演示下面元字符的使用</p>
<blockquote>
<p> 这些元字符一次只能匹配一个字符</p>
<p>如果是双写如：\d\d  这种一次可以匹配2个字符，一次类推有几个匹配几个。</p>
</blockquote>
<h4 id="常用元字符串"><a href="#常用元字符串" class="headerlink" title="常用元字符串"></a>常用元字符串</h4><table>
<thead>
<tr>
<th>元字符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td>\D</td>
<td>匹配任意非数字的字符</td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母或数字或下划线</td>
</tr>
<tr>
<td>\W</td>
<td>匹配任意不是字母，数字，下划线</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任意的空白符</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任意不是空白符的字符</td>
</tr>
<tr>
<td>.</td>
<td>匹配除换行符以外的任意单个字符</td>
</tr>
<tr>
<td>^</td>
<td>表示匹配行首的文本(以谁开始)</td>
</tr>
<tr>
<td>$</td>
<td>表示匹配行尾的文本(以谁结束)</td>
</tr>
<tr>
<td></td>
</tr>
</tbody>
</table>
<h4 id="限定符"><a href="#限定符" class="headerlink" title="限定符"></a>限定符</h4><p>修饰前边的条件，对条件进行补充</p>
<p>如：找一个字符串中的ab，写成ab{3} ，意思：匹配ab中的b，有3次重复的。匹配到abbb</p>
<table>
<thead>
<tr>
<th>限定符</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>重复零次或更多次【也就是重复任意多次】</td>
</tr>
<tr>
<td>+</td>
<td>重复一次或更多次【也就是重复任意多次，不包括0次】</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或一次</td>
</tr>
<tr>
<td>{n}</td>
<td>重复n次</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复n次或更多次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复n到m次</td>
</tr>
</tbody>
</table>
<h4 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[] 字符串用中括号括起来，表示匹配其中的任一字符，相当于或的意思</span><br><span class="line">[^]  匹配除中括号以内的内容</span><br><span class="line">\ 转义符</span><br><span class="line">| 或者，选择两者中的一个。注意|将左右两边分为两部分，而不管左右两边有多长多乱</span><br><span class="line">() 从两个直接量中选择一个，分组</span><br><span class="line">   eg：gr(a|e)y匹配gray和grey</span><br><span class="line">[\u4e00-\u9fa5]  匹配汉字</span><br></pre></td></tr></table></figure>
<h3 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h3><p>验证手机号：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^\d&#123;<span class="number">11</span>&#125;$</span><br></pre></td></tr></table></figure>
<p>验证邮编：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^\d&#123;<span class="number">6</span>&#125;$</span><br></pre></td></tr></table></figure>
<p>验证日期 2012-5-01 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^\d&#123;<span class="number">4</span>&#125;-\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;-\d&#123;<span class="number">1</span>,<span class="number">2</span>&#125;$</span><br></pre></td></tr></table></figure>
<p>验证邮箱 <a href="mailto:xxx@itcast.cn" target="_blank" rel="noopener">xxx@itcast.cn</a>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^\w+@\w+\.\w+$</span><br></pre></td></tr></table></figure>
<p>验证IP地址 192.168.1.10</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^\d&#123;<span class="number">1</span>,<span class="number">3</span>&#125;\(.\d&#123;<span class="number">1</span>,<span class="number">3</span>&#125;)&#123;<span class="number">3</span>&#125;$</span><br></pre></td></tr></table></figure>
<h2 id="JavaScript-中使用正则表达式"><a href="#JavaScript-中使用正则表达式" class="headerlink" title="JavaScript 中使用正则表达式"></a>JavaScript 中使用正则表达式</h2><h3 id="创建正则对象"><a href="#创建正则对象" class="headerlink" title="创建正则对象"></a>创建正则对象</h3><p>方式1：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'\d'</span>, <span class="string">'i'</span>);</span><br><span class="line"><span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'\d'</span>, <span class="string">'gi'</span>);</span><br></pre></td></tr></table></figure>
<p>方式2：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d/i</span>; <span class="comment">// i为参数</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/\d/gi</span>;  <span class="comment">// gi为参数</span></span><br></pre></td></tr></table></figure>
<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><table>
<thead>
<tr>
<th>标志</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td>忽略大小写</td>
</tr>
<tr>
<td>g</td>
<td>全局匹配</td>
</tr>
<tr>
<td>gi</td>
<td>全局匹配+忽略大小写</td>
</tr>
</tbody>
</table>
<h3 id="正则匹配"><a href="#正则匹配" class="headerlink" title="正则匹配"></a>正则匹配</h3><h6 id="RegExpObject-test-string"><a href="#RegExpObject-test-string" class="headerlink" title="RegExpObject.test(string)"></a><strong>RegExpObject.test(string)</strong></h6><p>通过自己设置正则（<strong>正确</strong>匹配字符串的<strong>规则</strong>）的text()方法，来匹配符合规则的一段字符串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 匹配日期</span></span><br><span class="line"><span class="keyword">var</span> dateStr = <span class="string">'2015-10-10'</span>;</span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;$/</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(dateStr));</span><br></pre></td></tr></table></figure>
<h3 id="正则提取"><a href="#正则提取" class="headerlink" title="正则提取"></a>正则提取</h3><h6 id="String-match"><a href="#String-match" class="headerlink" title="String.match()"></a><strong>String.match()</strong></h6><p>通过字符串方法返回<strong>符合规则</strong>的字符串数组</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 提取工资</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"张三：1000，李四：5000，王五：8000。"</span>;</span><br><span class="line"><span class="keyword">var</span> array = str.match(<span class="regexp">/\d+/g</span>);</span><br><span class="line"><span class="built_in">console</span>.log(array); </span><br><span class="line">结果: [<span class="string">"1000"</span>, <span class="string">"5000"</span>, <span class="string">"8000"</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 提取email地址</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"123123@xx.com,fangfang@valuedopinions.cn 286669312@qq.com 2、emailenglish@emailenglish.englishtown.com 286669312@qq.com..."</span>;</span><br><span class="line"><span class="keyword">var</span> array = str.match(<span class="regexp">/\w+@\w+\.\w+(\.\w+)?/g</span>);</span><br><span class="line"><span class="built_in">console</span>.log(array);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 分组提取  </span></span><br><span class="line"><span class="comment">// 3. 提取日期中的年部分  2015-5-10</span></span><br><span class="line"><span class="keyword">var</span> dateStr = <span class="string">'2016-1-5'</span>;</span><br><span class="line"><span class="comment">// 正则表达式中的()作为分组来使用，获取分组匹配到的结果用Regex.$1 $2 $3....来获取</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/(\d&#123;4&#125;)-\d&#123;1,2&#125;-\d&#123;1,2&#125;/</span>;</span><br><span class="line"><span class="keyword">if</span> (reg.test(dateStr)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 提取邮件中的每一部分</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/(\w+)@(\w+)\.(\w+)(\.\w+)?/</span>;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"123123@xx.com"</span>;</span><br><span class="line"><span class="keyword">if</span> (reg.test(str)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">1</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">2</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. 提取空格后的任意字符</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"年份: 2018年"</span>; </span><br><span class="line">str = str.match(<span class="regexp">/\s(\S*)/</span>)[<span class="number">1</span>];</span><br><span class="line"><span class="comment">// str = str.split(":")[1].trim();</span></span><br><span class="line"><span class="built_in">console</span>.log(str); </span><br><span class="line">结果:<span class="number">2018</span>年</span><br></pre></td></tr></table></figure>
<h3 id="正则替换"><a href="#正则替换" class="headerlink" title="正则替换"></a>正则替换</h3><h6 id="String-replace"><a href="#String-replace" class="headerlink" title="String.replace()"></a>String.replace()</h6><p>字符串方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 替换所有空白</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"   123AD  asadf   asadfasf  adf "</span>;</span><br><span class="line">str = str.replace(<span class="regexp">/\s/g</span>,<span class="string">"xx"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 替换所有,|，</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">"abc,efg,123，abc,123，a"</span>;</span><br><span class="line">str = str.replace(<span class="regexp">/,|，/g</span>, <span class="string">"."</span>);</span><br><span class="line"><span class="built_in">console</span>.log(str);</span><br></pre></td></tr></table></figure>
<h3 id="案例：表单验证"><a href="#案例：表单验证" class="headerlink" title="案例：表单验证"></a>案例：表单验证</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">QQ号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"txtQQ"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">邮箱：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"txtEMail"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">手机：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"txtPhone"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">生日：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"txtBirthday"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"txtName"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取文本框</span></span><br><span class="line"><span class="keyword">var</span> txtQQ = <span class="built_in">document</span>.getElementById(<span class="string">"txtQQ"</span>);</span><br><span class="line"><span class="keyword">var</span> txtEMail = <span class="built_in">document</span>.getElementById(<span class="string">"txtEMail"</span>);</span><br><span class="line"><span class="keyword">var</span> txtPhone = <span class="built_in">document</span>.getElementById(<span class="string">"txtPhone"</span>);</span><br><span class="line"><span class="keyword">var</span> txtBirthday = <span class="built_in">document</span>.getElementById(<span class="string">"txtBirthday"</span>);</span><br><span class="line"><span class="keyword">var</span> txtName = <span class="built_in">document</span>.getElementById(<span class="string">"txtName"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">txtQQ.onblur = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//获取当前文本框对应的span</span></span><br><span class="line">  <span class="keyword">var</span> span = <span class="keyword">this</span>.nextElementSibling;</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="regexp">/^\d&#123;5,12&#125;$/</span>;</span><br><span class="line">  <span class="comment">//判断验证是否成功</span></span><br><span class="line">  <span class="keyword">if</span>(!reg.test(<span class="keyword">this</span>.value) )&#123;</span><br><span class="line">    <span class="comment">//验证不成功</span></span><br><span class="line">    span.innerText = <span class="string">"请输入正确的QQ号"</span>;</span><br><span class="line">    span.style.color = <span class="string">"red"</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">//验证成功</span></span><br><span class="line">    span.innerText = <span class="string">""</span>;</span><br><span class="line">    span.style.color = <span class="string">""</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//txtEMail</span></span><br><span class="line">txtEMail.onblur = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//获取当前文本框对应的span</span></span><br><span class="line">  <span class="keyword">var</span> span = <span class="keyword">this</span>.nextElementSibling;</span><br><span class="line">  <span class="keyword">var</span> reg = <span class="regexp">/^\w+@\w+\.\w+(\.\w+)?$/</span>;</span><br><span class="line">  <span class="comment">//判断验证是否成功</span></span><br><span class="line">  <span class="keyword">if</span>(!reg.test(<span class="keyword">this</span>.value) )&#123;</span><br><span class="line">    <span class="comment">//验证不成功</span></span><br><span class="line">    span.innerText = <span class="string">"请输入正确的EMail地址"</span>;</span><br><span class="line">    span.style.color = <span class="string">"red"</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">//验证成功</span></span><br><span class="line">    span.innerText = <span class="string">""</span>;</span><br><span class="line">    span.style.color = <span class="string">""</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>表单验证部分，封装成函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> regBirthday = <span class="regexp">/^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;$/</span>;</span><br><span class="line">addCheck(txtBirthday, regBirthday, <span class="string">"请输入正确的出生日期"</span>);</span><br><span class="line"><span class="comment">//给文本框添加验证</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addCheck</span>(<span class="params">element, reg, tip</span>) </span>&#123;</span><br><span class="line">  element.onblur = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//获取当前文本框对应的span</span></span><br><span class="line">    <span class="keyword">var</span> span = <span class="keyword">this</span>.nextElementSibling;</span><br><span class="line">    <span class="comment">//判断验证是否成功</span></span><br><span class="line">    <span class="keyword">if</span>(!reg.test(<span class="keyword">this</span>.value) )&#123;</span><br><span class="line">      <span class="comment">//验证不成功</span></span><br><span class="line">      span.innerText = tip;</span><br><span class="line">      span.style.color = <span class="string">"red"</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">//验证成功</span></span><br><span class="line">      span.innerText = <span class="string">""</span>;</span><br><span class="line">      span.style.color = <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过给元素增加自定义验证属性对表单进行验证：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">"frm"</span>&gt;</span></span><br><span class="line">  QQ号：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"txtQQ"</span> <span class="attr">data-rule</span>=<span class="string">"qq"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  邮箱：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"txtEMail"</span> <span class="attr">data-rule</span>=<span class="string">"email"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  手机：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"txtPhone"</span> <span class="attr">data-rule</span>=<span class="string">"phone"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  生日：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"txtBirthday"</span> <span class="attr">data-rule</span>=<span class="string">"date"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"txtName"</span> <span class="attr">data-rule</span>=<span class="string">"cn"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 所有的验证规则</span></span><br><span class="line"><span class="keyword">var</span> rules = [</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'qq'</span>,</span><br><span class="line">    reg: <span class="regexp">/^\d&#123;5,12&#125;$/</span>,</span><br><span class="line">    tip: <span class="string">"请输入正确的QQ"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'email'</span>,</span><br><span class="line">    reg: <span class="regexp">/^\w+@\w+\.\w+(\.\w+)?$/</span>,</span><br><span class="line">    tip: <span class="string">"请输入正确的邮箱地址"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'phone'</span>,</span><br><span class="line">    reg: <span class="regexp">/^\d&#123;11&#125;$/</span>,</span><br><span class="line">    tip: <span class="string">"请输入正确的手机号码"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'date'</span>,</span><br><span class="line">    reg: <span class="regexp">/^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;$/</span>,</span><br><span class="line">    tip: <span class="string">"请输入正确的出生日期"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'cn'</span>,</span><br><span class="line">    reg: <span class="regexp">/^[\u4e00-\u9fa5]&#123;2,4&#125;$/</span>,</span><br><span class="line">    tip: <span class="string">"请输入正确的姓名"</span></span><br><span class="line">  &#125;];</span><br><span class="line"></span><br><span class="line">addCheck(<span class="string">'frm'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//给文本框添加验证</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addCheck</span>(<span class="params">formId</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">0</span>,</span><br><span class="line">      len = <span class="number">0</span>,</span><br><span class="line">      frm =<span class="built_in">document</span>.getElementById(formId);</span><br><span class="line">  len = frm.children.length;</span><br><span class="line">  <span class="keyword">for</span> (; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> element = frm.children[i];</span><br><span class="line">    <span class="comment">// 表单元素中有name属性的元素添加验证</span></span><br><span class="line">    <span class="keyword">if</span> (element.name) &#123;</span><br><span class="line">      element.onblur = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 使用dataset获取data-自定义属性的值</span></span><br><span class="line">        <span class="keyword">var</span> ruleName = <span class="keyword">this</span>.dataset.rule;</span><br><span class="line">        <span class="keyword">var</span> rule =getRuleByRuleName(rules, ruleName);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> span = <span class="keyword">this</span>.nextElementSibling;</span><br><span class="line">        <span class="comment">//判断验证是否成功</span></span><br><span class="line">        <span class="keyword">if</span>(!rule.reg.test(<span class="keyword">this</span>.value) )&#123;</span><br><span class="line">          <span class="comment">//验证不成功</span></span><br><span class="line">          span.innerText = rule.tip;</span><br><span class="line">          span.style.color = <span class="string">"red"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          <span class="comment">//验证成功</span></span><br><span class="line">          span.innerText = <span class="string">""</span>;</span><br><span class="line">          span.style.color = <span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据规则的名称获取规则对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRuleByRuleName</span>(<span class="params">rules, ruleName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">0</span>,</span><br><span class="line">      len = rules.length;</span><br><span class="line">  <span class="keyword">var</span> rule = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">for</span> (; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (rules[i].name == ruleName) &#123;</span><br><span class="line">      rule = rules[i];</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> rule;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="A-代码规范"><a href="#A-代码规范" class="headerlink" title="A 代码规范"></a>A 代码规范</h3><h4 id="代码风格"><a href="#代码风格" class="headerlink" title="代码风格"></a>代码风格</h4><ul>
<li><a href="https://github.com/feross/standard" target="_blank" rel="noopener">JavaScript Standard Style </a></li>
<li><a href="https://github.com/airbnb/javascript" target="_blank" rel="noopener">Airbnb JavaScript Style Guide() {</a></li>
</ul>
<h4 id="校验工具"><a href="#校验工具" class="headerlink" title="校验工具"></a>校验工具</h4><ul>
<li><a href="https://github.com/douglascrockford/JSLint" target="_blank" rel="noopener">JSLint</a></li>
<li><a href="https://github.com/jshint/jshint" target="_blank" rel="noopener">JSHint</a></li>
<li><a href="https://github.com/eslint/eslint" target="_blank" rel="noopener">ESLint</a></li>
</ul>
<h3 id="B-Chrome-开发者工具"><a href="#B-Chrome-开发者工具" class="headerlink" title="B Chrome 开发者工具"></a>B Chrome 开发者工具</h3><h3 id="C-文档相关工具"><a href="#C-文档相关工具" class="headerlink" title="C 文档相关工具"></a>C 文档相关工具</h3><ul>
<li>电子文档制作工具: <a href="https://github.com/egoist/docute" target="_blank" rel="noopener">docute</a></li>
<li>流程图工具：<a href="http://logicnet.dk/DiagramDesigner/" target="_blank" rel="noopener">DiagramDesigner</a></li>
</ul>
<h4 id="网页线上编程网站"><a href="#网页线上编程网站" class="headerlink" title="网页线上编程网站"></a>网页线上编程网站</h4><p><a href="https://kodcloud.com/xx" target="_blank" rel="noopener">https://kodcloud.com/xx</a></p>
<h1 id="面试常问题解答"><a href="#面试常问题解答" class="headerlink" title="面试常问题解答"></a>面试常问题解答</h1><h4 id="typeof和instanceof的用法和区别-1"><a href="#typeof和instanceof的用法和区别-1" class="headerlink" title="typeof和instanceof的用法和区别"></a>typeof和instanceof的用法和区别</h4><h5 id="typeof-1"><a href="#typeof-1" class="headerlink" title="typeof"></a>typeof</h5><p>作用：用于判断一个一个表达式，（对象或者原始值），返回一个字符串。</p>
<p>返回的可能的值（摘自mdn）</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>Undefined</td>
<td>“undefined”</td>
</tr>
<tr>
<td>Null</td>
<td>“object” (历史遗留问题)</td>
</tr>
<tr>
<td>Boolean</td>
<td>“boolean”</td>
</tr>
<tr>
<td>Number</td>
<td>“number”</td>
</tr>
<tr>
<td>String</td>
<td>“string”</td>
</tr>
<tr>
<td>Symbol (ECMAScript 6 新增)</td>
<td>“symbol”</td>
</tr>
<tr>
<td>宿主对象(由JS环境提供)</td>
<td>Implementation-dependent</td>
</tr>
<tr>
<td>函数对象 ( [[Call]] 在ECMA-262条款中实现了)</td>
<td>“function”</td>
</tr>
</tbody>
</table>
<h5 id="instanceof-1"><a href="#instanceof-1" class="headerlink" title="instanceof"></a>instanceof</h5><p>instanceof 运算符用来测试一个对象在其原型链中是否存在一个构造函数的 prototype 属性。</p>
<p>使用规则：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">object <span class="keyword">instanceof</span> <span class="keyword">constructor</span></span><br></pre></td></tr></table></figure>
<p>要求前面是个对象，后面是一个构造函数。而且返回的是布尔型的，不是true就是false。 </p>
<p>常用使用：</p>
<p>由于typeof只能判断类型，所以，数组和对象返回的都是object，这时就需要使用instanceof来判断是否是</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[] <span class="keyword">instanceof</span> <span class="built_in">Array</span> <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<p>所以，我们可以通过这两种方式封装一个函数专门进行类型判断：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDataType</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(obj === <span class="literal">null</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"null"</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> obj === <span class="string">"object"</span>)&#123;</span><br><span class="line">  	<span class="keyword">if</span>(obj <span class="keyword">instanceof</span> <span class="built_in">Array</span>)&#123;</span><br><span class="line">  		<span class="keyword">return</span> <span class="string">"array"</span>;</span><br><span class="line">  	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  		<span class="keyword">return</span> <span class="string">"object"</span>;</span><br><span class="line">  	&#125;</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  	<span class="keyword">return</span> <span class="keyword">typeof</span> obj;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以下是对每个类型的测试</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="number">111</span>)); 	<span class="comment">//number</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="string">"fasd"</span>));	<span class="comment">//string</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="literal">true</span>));	<span class="comment">//boolean</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;));	<span class="comment">//function</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType([]));	<span class="comment">//array</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(&#123;&#125;));	<span class="comment">//object</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="literal">null</span>));	<span class="comment">//null</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="literal">undefined</span>));	<span class="comment">//undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(getDataType(<span class="regexp">/\n/</span>));	<span class="comment">//object</span></span><br><span class="line"><span class="keyword">var</span> a;</span><br><span class="line">  <span class="built_in">console</span>.log(getDataType(a));	<span class="comment">//undefined 如果传入没有声明的变量会直接报错</span></span><br></pre></td></tr></table></figure>
<h4 id="数组和原型toSting-区别"><a href="#数组和原型toSting-区别" class="headerlink" title="数组和原型toSting()区别"></a>数组和原型toSting()区别</h4><p>数组中的toSting()和Object.prototype原型中的toString()的区别</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">日常表现：</span><br><span class="line"><span class="keyword">var</span> arr=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">toString.call(arr); <span class="comment">// 结果：[object Array] </span></span><br><span class="line">arr.toString();    <span class="comment">// 结果：“1,2,3”</span></span><br><span class="line">进一步：</span><br><span class="line"><span class="keyword">var</span> arr=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(arr); <span class="comment">// 结果：[object Array] </span></span><br><span class="line"><span class="built_in">Array</span>.prototype.toString.call(arr);  <span class="comment">// 结果：“1,2,3”</span></span><br></pre></td></tr></table></figure>
<p>根据原型链的概念，当我们使用<code>arr.toString()</code>时，不能进行复杂数据类型的判断，因为它调用的是<code>Array.prototype.toString</code>，虽然<code>Array</code>也继承自<code>Object</code>，但js在<code>Array.prototype</code>上重写了<code>toString</code>，而我们通过<code>toString.call(arr)</code>实际上是通过原型链调用了<code>Object.prototype.toString</code>。 </p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">雪海の无涯</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://wuguolong.com/2019/10/24/JavaScript高级/">http://wuguolong.com/2019/10/24/JavaScript高级/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://wuguolong.com">云海雪原</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JS/">JS    </a></div><div class="post_share"><div class="social-share" data-image="/img/js.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2019/10/24/MySQL基础笔记/"><img class="prev_cover lozad" data-src="https://s2.ax1x.com/2019/10/24/KUV0KS.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>MySQL</span></div></a></div><div class="next-post pull-right"><a href="/2019/10/24/HTML+CSS笔记/"><img class="next_cover lozad" data-src="https://s2.ax1x.com/2019/10/24/KUV0KS.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>H5+C3</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/10/24/jQuery笔记/" title="jQuery"><img class="relatedPosts_cover lozad" data-src="https://s2.ax1x.com/2019/10/24/KUV0KS.jpg"><div class="relatedPosts_title">jQuery</div></a></div><div class="relatedPosts_item"><a href="/2019/10/24/javascript基础/" title="js基础"><img class="relatedPosts_cover lozad" data-src="/img/timg.gif"><div class="relatedPosts_title">js基础</div></a></div><div class="relatedPosts_item"><a href="/2019/10/24/WebAPI基础笔记/" title="WebAPI"><img class="relatedPosts_cover lozad" data-src="/img/webapi.png"><div class="relatedPosts_title">WebAPI</div></a></div><div class="relatedPosts_item"><a href="/2019/10/24/《ECMAScript 6入门 》/《ECMAScript 6入门 》/" title="ES6"><img class="relatedPosts_cover lozad" data-src="/img/ES6.jpg"><div class="relatedPosts_title">ES6</div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = false == true ? true : false;
var verify = false == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'QOWvG4y52wLGETHWOBorduMj-gzGzoHsz',
  appKey:'92vutIllr4PBQhRIlGCkGJPU',
  placeholder:'Please leave your footprints',
  avatar:'monsterid',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></div><footer><div id="footer"><div class="copyright">&copy;2018 - 2020 By 雪海の无涯</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换">繁</a><i class="nightshift fa fa-moon-o" id="nightshift" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="/js/nightshift.js"></script><script color="0,0,255" opacity="0.7" zindex="-1" count="99" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/js/canvas-nest.js"></script><script src="/js/baidupush.js"> </script><script src="/js/activate-power-mode.js"></script><script>POWERMODE.colorful = true; // make power mode colorful
POWERMODE.shake = true; // turn off shake
document.body.addEventListener('input', POWERMODE);
</script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();
</script></body></html>