<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>微信小程序 | 云海雪原</title><meta name="description" content="微信小程序"><meta name="keywords" content="小程序"><meta name="author" content="雪海の无涯"><meta name="copyright" content="雪海の无涯"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://wuguolong.com/2019/10/24/微信小程序笔记/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="微信小程序"><meta name="twitter:description" content="微信小程序"><meta name="twitter:image" content="http://wuguolong.com/img/xiaochengxu.jpg"><meta property="og:type" content="article"><meta property="og:title" content="微信小程序"><meta property="og:url" content="http://wuguolong.com/2019/10/24/微信小程序笔记/"><meta property="og:site_name" content="云海雪原"><meta property="og:description" content="微信小程序"><meta property="og:image" content="http://wuguolong.com/img/xiaochengxu.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="ES6" href="http://wuguolong.com/2019/10/24/《ECMAScript 6入门 》/《ECMAScript 6入门 》/"><link rel="next" title="webpack" href="http://wuguolong.com/2019/10/24/webpack基本配置/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://www.wuguolong.com/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: '添加书签',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: {"languages":{"author":"作者: 雪海の无涯","link":"链接: http://wuguolong.com/2019/10/24/微信小程序笔记/","source":"来源: 云海雪原","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  copy_copyright_js: true
  
}</script></head><body><canvas class="fireworks"></canvas><div id="header"> <div id="page-header"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">云海雪原</a></span><i class="fa fa-bars fa-fw toggle-menu pull-right close" aria-hidden="true"></i><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lozad avatar_img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">29</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">23</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">18</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#背景介绍"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">背景介绍</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#开发环境"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">开发环境</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-账号申请"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">1. 账号申请</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-绑定开发者"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">2. 绑定开发者</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-获取AppID"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text">3. 获取AppID</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-开发工具"><span class="toc_mobile_items-number">2.4.</span> <span class="toc_mobile_items-text">4. 开发工具</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#5-开发文档"><span class="toc_mobile_items-number">2.5.</span> <span class="toc_mobile_items-text">5. 开发文档</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#快速体验"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">快速体验</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#创建小程序"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">创建小程序</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#预览小程序"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text">预览小程序</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#编辑小程序"><span class="toc_mobile_items-number">3.3.</span> <span class="toc_mobile_items-text">编辑小程序</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#结构分析"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">结构分析</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#1-目录"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">1. 目录</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-配置"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">2. 配置</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#全局配置"><span class="toc_mobile_items-number">4.2.1.</span> <span class="toc_mobile_items-text">全局配置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#页面配置"><span class="toc_mobile_items-number">4.2.2.</span> <span class="toc_mobile_items-text">页面配置</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-布局"><span class="toc_mobile_items-number">4.3.</span> <span class="toc_mobile_items-text">3. 布局</span></a></li></ol></li></ol><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#二、开发文档"><span class="toc_mobile_items-number"></span> <span class="toc_mobile_items-text">二、开发文档</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#布局"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">布局</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#适配"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">适配</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#样式"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">样式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#组件"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">组件</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#弹性盒子"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">弹性盒子</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#数据"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">数据</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#数据绑定"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">数据绑定</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#简单数据-data"><span class="toc_mobile_items-number">2.1.1.</span> <span class="toc_mobile_items-text">简单数据(data)</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#data中的数据获取"><span class="toc_mobile_items-number">2.1.1.1.</span> <span class="toc_mobile_items-text">data中的数据获取</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-6"><a class="toc_mobile_items-link" href="#Page-prototype-setData-Object-data-Function-callback"><span class="toc_mobile_items-number">2.1.1.1.1.</span> <span class="toc_mobile_items-text">Page.prototype.setData(Object data, Function callback)</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#参数说明"><span class="toc_mobile_items-number">2.1.2.</span> <span class="toc_mobile_items-text">参数说明</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#列表数据"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">列表数据</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#条件数据"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text">条件数据</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#共同属性"><span class="toc_mobile_items-number">2.4.</span> <span class="toc_mobile_items-text">共同属性</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#事件"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">事件</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#页面-Page"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">页面 Page</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#Page-Object-构造器"><span class="toc_mobile_items-number">3.1.1.</span> <span class="toc_mobile_items-text">Page(Object) 构造器</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#data"><span class="toc_mobile_items-number">3.1.1.1.</span> <span class="toc_mobile_items-text">data</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#生命周期回调函数"><span class="toc_mobile_items-number">3.1.2.</span> <span class="toc_mobile_items-text">生命周期回调函数</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#onLoad-Object-query"><span class="toc_mobile_items-number">3.1.2.1.</span> <span class="toc_mobile_items-text">onLoad(Object query)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#onShow"><span class="toc_mobile_items-number">3.1.2.2.</span> <span class="toc_mobile_items-text">onShow()</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#onReady"><span class="toc_mobile_items-number">3.1.2.3.</span> <span class="toc_mobile_items-text">onReady()</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#onHide"><span class="toc_mobile_items-number">3.1.2.4.</span> <span class="toc_mobile_items-text">onHide()</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#onUnload"><span class="toc_mobile_items-number">3.1.2.5.</span> <span class="toc_mobile_items-text">onUnload()</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#页面事件处理函数"><span class="toc_mobile_items-number">3.1.3.</span> <span class="toc_mobile_items-text">页面事件处理函数</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#onPullDownRefresh"><span class="toc_mobile_items-number">3.1.3.1.</span> <span class="toc_mobile_items-text">onPullDownRefresh()</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#onReachBottom"><span class="toc_mobile_items-number">3.1.3.2.</span> <span class="toc_mobile_items-text">onReachBottom()</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#onPageScroll-Object"><span class="toc_mobile_items-number">3.1.3.3.</span> <span class="toc_mobile_items-text">onPageScroll(Object)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#onShareAppMessage-Object"><span class="toc_mobile_items-number">3.1.3.4.</span> <span class="toc_mobile_items-text">onShareAppMessage(Object)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#onResize-object"><span class="toc_mobile_items-number">3.1.3.5.</span> <span class="toc_mobile_items-text">onResize(object)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#onTabItemTap-Object"><span class="toc_mobile_items-number">3.1.3.6.</span> <span class="toc_mobile_items-text">onTabItemTap(Object)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#组件事件处理函数"><span class="toc_mobile_items-number">3.1.4.</span> <span class="toc_mobile_items-text">组件事件处理函数</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Page-route"><span class="toc_mobile_items-number">3.1.4.1.</span> <span class="toc_mobile_items-text">Page.route</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#Page-prototype-setData-Object-data-Function-callback-1"><span class="toc_mobile_items-number">3.1.4.2.</span> <span class="toc_mobile_items-text">Page.prototype.setData(Object data, Function callback)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#参数说明-1"><span class="toc_mobile_items-number">3.1.4.3.</span> <span class="toc_mobile_items-text">参数说明</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#事件监听"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text">事件监听</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#事件冒泡"><span class="toc_mobile_items-number">3.3.</span> <span class="toc_mobile_items-text">事件冒泡</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#事件对象"><span class="toc_mobile_items-number">3.4.</span> <span class="toc_mobile_items-text">事件对象</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#生命周期"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">生命周期</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#三、开发实战"><span class="toc_mobile_items-number"></span> <span class="toc_mobile_items-text">三、开发实战</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#创建项目"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">创建项目</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#配置"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">配置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#电影"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">电影</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#首页"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">首页</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#四、小程序API和公众号"><span class="toc_mobile_items-number"></span> <span class="toc_mobile_items-text">四、小程序API和公众号</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#小程序API"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">小程序API</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#界面交互"><span class="toc_mobile_items-number">1.0.1.</span> <span class="toc_mobile_items-text">界面交互</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#网络请求"><span class="toc_mobile_items-number">1.0.2.</span> <span class="toc_mobile_items-text">网络请求</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#地理定位"><span class="toc_mobile_items-number">1.0.3.</span> <span class="toc_mobile_items-text">地理定位</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#其它"><span class="toc_mobile_items-number">1.0.4.</span> <span class="toc_mobile_items-text">其它</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#数据缓存"><span class="toc_mobile_items-number">1.0.4.1.</span> <span class="toc_mobile_items-text">数据缓存</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#设备信息"><span class="toc_mobile_items-number">1.0.4.2.</span> <span class="toc_mobile_items-text">设备信息</span></a></li></ol></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#公众平台"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">公众平台</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#1-申请账号"><span class="toc_mobile_items-number">2.0.1.</span> <span class="toc_mobile_items-text">1. 申请账号</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-账号管理"><span class="toc_mobile_items-number">2.0.2.</span> <span class="toc_mobile_items-text">2. 账号管理</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#粉丝管理"><span class="toc_mobile_items-number">2.0.2.1.</span> <span class="toc_mobile_items-text">粉丝管理</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#自动回复"><span class="toc_mobile_items-number">2.0.2.2.</span> <span class="toc_mobile_items-text">自动回复</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#自定义菜单"><span class="toc_mobile_items-number">2.0.2.3.</span> <span class="toc_mobile_items-text">自定义菜单</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#关联小程序"><span class="toc_mobile_items-number">2.0.2.4.</span> <span class="toc_mobile_items-text">关联小程序</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#3-开发配置"><span class="toc_mobile_items-number">2.0.3.</span> <span class="toc_mobile_items-text">3. 开发配置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#4-接口权限"><span class="toc_mobile_items-number">2.0.4.</span> <span class="toc_mobile_items-text">4. 接口权限</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#5-测试账号"><span class="toc_mobile_items-number">2.0.5.</span> <span class="toc_mobile_items-text">5. 测试账号</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#6-JSSDK"><span class="toc_mobile_items-number">2.0.6.</span> <span class="toc_mobile_items-text">6. JSSDK</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#绑定域名"><span class="toc_mobile_items-number">2.0.6.1.</span> <span class="toc_mobile_items-text">绑定域名</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#验证配置"><span class="toc_mobile_items-number">2.0.6.2.</span> <span class="toc_mobile_items-text">验证配置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#调用接口"><span class="toc_mobile_items-number">2.0.6.3.</span> <span class="toc_mobile_items-text">调用接口</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#其它接口"><span class="toc_mobile_items-number">2.0.6.4.</span> <span class="toc_mobile_items-text">其它接口</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#7-WeUI"><span class="toc_mobile_items-number">2.0.7.</span> <span class="toc_mobile_items-text">7. WeUI</span></a></li></ol></li></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#背景介绍"><span class="toc-number">1.</span> <span class="toc-text">背景介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开发环境"><span class="toc-number">2.</span> <span class="toc-text">开发环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-账号申请"><span class="toc-number">2.1.</span> <span class="toc-text">1. 账号申请</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-绑定开发者"><span class="toc-number">2.2.</span> <span class="toc-text">2. 绑定开发者</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-获取AppID"><span class="toc-number">2.3.</span> <span class="toc-text">3. 获取AppID</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-开发工具"><span class="toc-number">2.4.</span> <span class="toc-text">4. 开发工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-开发文档"><span class="toc-number">2.5.</span> <span class="toc-text">5. 开发文档</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#快速体验"><span class="toc-number">3.</span> <span class="toc-text">快速体验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建小程序"><span class="toc-number">3.1.</span> <span class="toc-text">创建小程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#预览小程序"><span class="toc-number">3.2.</span> <span class="toc-text">预览小程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编辑小程序"><span class="toc-number">3.3.</span> <span class="toc-text">编辑小程序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结构分析"><span class="toc-number">4.</span> <span class="toc-text">结构分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-目录"><span class="toc-number">4.1.</span> <span class="toc-text">1. 目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-配置"><span class="toc-number">4.2.</span> <span class="toc-text">2. 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#全局配置"><span class="toc-number">4.2.1.</span> <span class="toc-text">全局配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#页面配置"><span class="toc-number">4.2.2.</span> <span class="toc-text">页面配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-布局"><span class="toc-number">4.3.</span> <span class="toc-text">3. 布局</span></a></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#二、开发文档"><span class="toc-number"></span> <span class="toc-text">二、开发文档</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#布局"><span class="toc-number">1.</span> <span class="toc-text">布局</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#适配"><span class="toc-number">1.1.</span> <span class="toc-text">适配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#样式"><span class="toc-number">1.2.</span> <span class="toc-text">样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#组件"><span class="toc-number">1.3.</span> <span class="toc-text">组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#弹性盒子"><span class="toc-number">1.4.</span> <span class="toc-text">弹性盒子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据"><span class="toc-number">2.</span> <span class="toc-text">数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数据绑定"><span class="toc-number">2.1.</span> <span class="toc-text">数据绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#简单数据-data"><span class="toc-number">2.1.1.</span> <span class="toc-text">简单数据(data)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#data中的数据获取"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">data中的数据获取</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Page-prototype-setData-Object-data-Function-callback"><span class="toc-number">2.1.1.1.1.</span> <span class="toc-text">Page.prototype.setData(Object data, Function callback)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#参数说明"><span class="toc-number">2.1.2.</span> <span class="toc-text">参数说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#列表数据"><span class="toc-number">2.2.</span> <span class="toc-text">列表数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#条件数据"><span class="toc-number">2.3.</span> <span class="toc-text">条件数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#共同属性"><span class="toc-number">2.4.</span> <span class="toc-text">共同属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事件"><span class="toc-number">3.</span> <span class="toc-text">事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#页面-Page"><span class="toc-number">3.1.</span> <span class="toc-text">页面 Page</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Page-Object-构造器"><span class="toc-number">3.1.1.</span> <span class="toc-text">Page(Object) 构造器</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#data"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">data</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#生命周期回调函数"><span class="toc-number">3.1.2.</span> <span class="toc-text">生命周期回调函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#onLoad-Object-query"><span class="toc-number">3.1.2.1.</span> <span class="toc-text">onLoad(Object query)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#onShow"><span class="toc-number">3.1.2.2.</span> <span class="toc-text">onShow()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#onReady"><span class="toc-number">3.1.2.3.</span> <span class="toc-text">onReady()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#onHide"><span class="toc-number">3.1.2.4.</span> <span class="toc-text">onHide()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#onUnload"><span class="toc-number">3.1.2.5.</span> <span class="toc-text">onUnload()</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#页面事件处理函数"><span class="toc-number">3.1.3.</span> <span class="toc-text">页面事件处理函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#onPullDownRefresh"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">onPullDownRefresh()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#onReachBottom"><span class="toc-number">3.1.3.2.</span> <span class="toc-text">onReachBottom()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#onPageScroll-Object"><span class="toc-number">3.1.3.3.</span> <span class="toc-text">onPageScroll(Object)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#onShareAppMessage-Object"><span class="toc-number">3.1.3.4.</span> <span class="toc-text">onShareAppMessage(Object)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#onResize-object"><span class="toc-number">3.1.3.5.</span> <span class="toc-text">onResize(object)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#onTabItemTap-Object"><span class="toc-number">3.1.3.6.</span> <span class="toc-text">onTabItemTap(Object)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#组件事件处理函数"><span class="toc-number">3.1.4.</span> <span class="toc-text">组件事件处理函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Page-route"><span class="toc-number">3.1.4.1.</span> <span class="toc-text">Page.route</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Page-prototype-setData-Object-data-Function-callback-1"><span class="toc-number">3.1.4.2.</span> <span class="toc-text">Page.prototype.setData(Object data, Function callback)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#参数说明-1"><span class="toc-number">3.1.4.3.</span> <span class="toc-text">参数说明</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事件监听"><span class="toc-number">3.2.</span> <span class="toc-text">事件监听</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事件冒泡"><span class="toc-number">3.3.</span> <span class="toc-text">事件冒泡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事件对象"><span class="toc-number">3.4.</span> <span class="toc-text">事件对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#生命周期"><span class="toc-number">4.</span> <span class="toc-text">生命周期</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三、开发实战"><span class="toc-number"></span> <span class="toc-text">三、开发实战</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#创建项目"><span class="toc-number">1.</span> <span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置"><span class="toc-number">2.</span> <span class="toc-text">配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#电影"><span class="toc-number">3.</span> <span class="toc-text">电影</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#首页"><span class="toc-number">3.1.</span> <span class="toc-text">首页</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四、小程序API和公众号"><span class="toc-number"></span> <span class="toc-text">四、小程序API和公众号</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#小程序API"><span class="toc-number">1.</span> <span class="toc-text">小程序API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#界面交互"><span class="toc-number">1.0.1.</span> <span class="toc-text">界面交互</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#网络请求"><span class="toc-number">1.0.2.</span> <span class="toc-text">网络请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#地理定位"><span class="toc-number">1.0.3.</span> <span class="toc-text">地理定位</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其它"><span class="toc-number">1.0.4.</span> <span class="toc-text">其它</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#数据缓存"><span class="toc-number">1.0.4.1.</span> <span class="toc-text">数据缓存</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#设备信息"><span class="toc-number">1.0.4.2.</span> <span class="toc-text">设备信息</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#公众平台"><span class="toc-number">2.</span> <span class="toc-text">公众平台</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-申请账号"><span class="toc-number">2.0.1.</span> <span class="toc-text">1. 申请账号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-账号管理"><span class="toc-number">2.0.2.</span> <span class="toc-text">2. 账号管理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#粉丝管理"><span class="toc-number">2.0.2.1.</span> <span class="toc-text">粉丝管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#自动回复"><span class="toc-number">2.0.2.2.</span> <span class="toc-text">自动回复</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#自定义菜单"><span class="toc-number">2.0.2.3.</span> <span class="toc-text">自定义菜单</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#关联小程序"><span class="toc-number">2.0.2.4.</span> <span class="toc-text">关联小程序</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-开发配置"><span class="toc-number">2.0.3.</span> <span class="toc-text">3. 开发配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-接口权限"><span class="toc-number">2.0.4.</span> <span class="toc-text">4. 接口权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-测试账号"><span class="toc-number">2.0.5.</span> <span class="toc-text">5. 测试账号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-JSSDK"><span class="toc-number">2.0.6.</span> <span class="toc-text">6. JSSDK</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#绑定域名"><span class="toc-number">2.0.6.1.</span> <span class="toc-text">绑定域名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#验证配置"><span class="toc-number">2.0.6.2.</span> <span class="toc-text">验证配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#调用接口"><span class="toc-number">2.0.6.3.</span> <span class="toc-text">调用接口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#其它接口"><span class="toc-number">2.0.6.4.</span> <span class="toc-text">其它接口</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-WeUI"><span class="toc-number">2.0.7.</span> <span class="toc-text">7. WeUI</span></a></li></ol></li></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/xiaochengxu.jpg)"><div id="post-info"><div id="post-title"><div class="posttitle">微信小程序</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-10-24<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2019-11-24</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/小程序/">小程序</a></span><div class="post-meta-wordcount"><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><blockquote>
<p>微信是一个生态圈，包括即时通信、移动支付、社交媒体、游戏娱乐等多个领域，彼此之间紧密联系、互为支撑形成了一个强大的微信帝国。日常交流中所提到的微信更多是指的<strong>即时通信</strong>和<strong>移动支付</strong>，而我们即将学习的<strong>微信小程序属于社交媒体的组成部分</strong>。</p>
</blockquote>
<p><em>注：除了有微信小程序外，支付宝也如法炮制了小程序，文中提到的小程序如无特别说明，特指微信小程序。</em><br><a id="more"></a><br><img alt data-src="微信小程序笔记/img-1.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-1.jpg" class="lozad"><br>人们越来越多的将时间花费在了移动设备上，移动互联势不可挡。</p>
<p><img alt data-src="微信小程序笔记/img-2.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-2.jpg" class="lozad"><br>伴随而来的移动开发技术层出不穷：</p>
<ul>
<li><p>H5（Web App）</p>
<p>即运行于移动设备浏览器的<strong>网页</strong>，使用html5、css3等技术实现，可以跨平台。</p>
</li>
<li><p>原生应用（Native App）</p>
<p>即所谓的 Android 和 IOS 开发，可以直接与底层操作系统通信，可扩展性非常强，不可跨平台。</p>
</li>
<li><p>混合应用（Hybrid App）</p>
<p>混合了Web App 和 Native App开发技术，一般展示类内容使用 Web App技术，交互性较强的使用 Native App技术，可以跨平台。</p>
</li>
</ul>
<p><img alt data-src="微信小程序笔记/img-4.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-4.jpg" class="lozad"><br>然而不同的开发技术间各有优势，下图列举了各开发技术间的差异：</p>
<p><img alt data-src="微信小程序笔记/img-5.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-5.jpg" class="lozad"><br>小程序是一种新型的轻量的开发技术，”微信之父” 张晓龙是这样定义小程序的：</p>
<p><img alt data-src="微信小程序笔记/img-3.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-3.jpg" class="lozad"></p>
<h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><h3 id="1-账号申请"><a href="#1-账号申请" class="headerlink" title="1. 账号申请"></a>1. <a href="https://mp.weixin.qq.com/cgi-bin/registermidpage?action=index&amp;lang=zh_CN" target="_blank" rel="noopener">账号申请</a></h3><ol>
<li>选择注册账号类型</li>
</ol>
<p><img alt data-src="微信小程序笔记/img-6.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-6.jpg" class="lozad"></p>
<ol>
<li>账号信息</li>
</ol>
<p><img alt data-src="微信小程序笔记/img-7.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-7.jpg" class="lozad"></p>
<ol>
<li>邮箱激活</li>
</ol>
<p><img alt data-src="微信小程序笔记/img-8.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-8.jpg" class="lozad"></p>
<ol>
<li>信息登记</li>
</ol>
<p><img alt data-src="微信小程序笔记/img-9.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-9.jpg" class="lozad"></p>
<h3 id="2-绑定开发者"><a href="#2-绑定开发者" class="headerlink" title="2. 绑定开发者"></a>2. 绑定开发者</h3><ol>
<li><a href="https://mp.weixin.qq.com/" target="_blank" rel="noopener">登录小程序</a></li>
</ol>
<p><img alt data-src="微信小程序笔记/img-10.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-10.jpg" class="lozad"></p>
<ol>
<li>管理员授权</li>
</ol>
<p><img alt data-src="微信小程序笔记/img-11.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-11.jpg" class="lozad"></p>
<ol>
<li>添加成员</li>
</ol>
<p><img alt data-src="微信小程序笔记/img-12.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-12.jpg" class="lozad"></p>
<h3 id="3-获取AppID"><a href="#3-获取AppID" class="headerlink" title="3. 获取AppID"></a>3. 获取AppID</h3><p><img alt data-src="微信小程序笔记/img-13.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-13.jpg" class="lozad"></p>
<h3 id="4-开发工具"><a href="#4-开发工具" class="headerlink" title="4. 开发工具"></a>4. 开发工具</h3><ol>
<li><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html" target="_blank" rel="noopener">下载</a></li>
</ol>
<p><img alt data-src="微信小程序笔记/img-14.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-14.jpg" class="lozad"></p>
<ol>
<li>扫码登录</li>
</ol>
<p><img alt data-src="微信小程序笔记/img-15.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-15.jpg" class="lozad"></p>
<ol>
<li>小程序</li>
</ol>
<p><img alt data-src="微信小程序笔记/img-16.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-16.jpg" class="lozad"></p>
<ol>
<li>创建小程序</li>
</ol>
<p><img alt data-src="微信小程序笔记/img-17.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-17.jpg" class="lozad"></p>
<ol>
<li>开发界面</li>
</ol>
<p><img alt data-src="微信小程序笔记/img-18.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-18.jpg" class="lozad"></p>
<h3 id="5-开发文档"><a href="#5-开发文档" class="headerlink" title="5. 开发文档"></a>5. 开发文档</h3><p>俗话说的好：好记性不如烂笔头，小程序开发过程中参考<a href="https://developers.weixin.qq.com/miniprogram/dev/index.html?t=2018413" target="_blank" rel="noopener">官方文档</a>是最佳实践！</p>
<h2 id="快速体验"><a href="#快速体验" class="headerlink" title="快速体验"></a>快速体验</h2><h3 id="创建小程序"><a href="#创建小程序" class="headerlink" title="创建小程序"></a>创建小程序</h3><ol>
<li>创建一个目录，例如 demo</li>
<li>打开开发工具</li>
<li>选择第1步创建的目录</li>
</ol>
<p><img alt data-src="微信小程序笔记/img-19.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-19.jpg" class="lozad"></p>
<ol>
<li>填定AppID、名称，并选择<strong>建立普通快速启动模板</strong></li>
</ol>
<p><img alt data-src="微信小程序笔记/img-20.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-20.jpg" class="lozad"></p>
<h3 id="预览小程序"><a href="#预览小程序" class="headerlink" title="预览小程序"></a>预览小程序</h3><p>使用绑定的开发者微信用户扫描二维码，便可以在微信中打开小程序了</p>
<p><img alt data-src="微信小程序笔记/img-23.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-23.jpg" class="lozad"></p>
<h3 id="编辑小程序"><a href="#编辑小程序" class="headerlink" title="编辑小程序"></a>编辑小程序</h3><p>微信官方的开发工具自带了编辑器功能，可以对小程序代码进行编辑，如下图</p>
<p><img alt data-src="微信小程序笔记/img-24.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-24.jpg" class="lozad"></p>
<p>使用官方开发工具编辑小程序并不是唯一方式，开发者也可以根据自已喜好自由选择任意编辑工具，如 sublime_text、WebStorm、VS Code等。</p>
<h2 id="结构分析"><a href="#结构分析" class="headerlink" title="结构分析"></a>结构分析</h2><h3 id="1-目录"><a href="#1-目录" class="headerlink" title="1. 目录"></a>1. 目录</h3><blockquote>
<p>小程序包含一个描述整体程序的 app 和多个描述各自页面的 page。</p>
</blockquote>
<ul>
<li>主体 app</li>
</ul>
<p>一个小程序主体部分由三个文件组成，必须放在项目的根目录，如下：</p>
<table>
<thead>
<tr>
<th>文件类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>app.js</td>
<td>是</td>
<td>小程序入口</td>
</tr>
<tr>
<td>app.json</td>
<td>是</td>
<td>小程序全局配置</td>
</tr>
<tr>
<td>app.wxss</td>
<td>否</td>
<td>小程序全局样式</td>
</tr>
</tbody>
</table>
<ul>
<li>页面 page</li>
</ul>
<p>一个小程序页面由四个文件组成，分别是：</p>
<table>
<thead>
<tr>
<th>文件后缀</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>.js</td>
<td>是</td>
<td>页面逻辑</td>
</tr>
<tr>
<td>.wxml</td>
<td>是</td>
<td>页面布局结构</td>
</tr>
<tr>
<td>.wxss</td>
<td>否</td>
<td>局部布局样式</td>
</tr>
<tr>
<td>.json</td>
<td>否</td>
<td>局部配置</td>
</tr>
</tbody>
</table>
<p><strong>wxml</strong> 指的是 <strong>W</strong>ei <strong>X</strong>in <strong>M</strong>arkup <strong>L</strong>anguage，微信团队以 XML 为基础，而定义的一套用以实现小程序页面布局的标记语言，与HTML非常类似。</p>
<p><strong>wxss</strong> 指的是 <strong>W</strong>ei <strong>X</strong>in <strong>S</strong>tyle <strong>S</strong>heet，微信团队定义的一套用以实现小程序布局样式的层叠样式表，与CSS非常接近。</p>
<p>以下是小程序的基本目录结构，也可以根据需要任意添加其它目录，如资源目录 assets、第三方库vendors、扩展目录 extends等。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">├── app.js ...................................................... 小程序入口文件</span><br><span class="line">├── app.json .................................................... 小程序全局配置</span><br><span class="line">├── app.wxss .................................................... 小程序全局样式</span><br><span class="line">├── pages ....................................................... 所有页面目录</span><br><span class="line">│   ├── index ................................................... index页面目录</span><br><span class="line">│   │   ├── index.js ............................................ index页面业务逻辑</span><br><span class="line">│   │   ├── index.wxml .......................................... index页面布局结构</span><br><span class="line">│   │   └── index.wxss .......................................... index页面布局样式</span><br><span class="line">│   └── logs .................................................... logs页目录</span><br><span class="line">│       ├── logs.js ............................................. logs页面业务逻辑</span><br><span class="line">│       ├── logs.json ........................................... logs页面配置文件</span><br><span class="line">│       ├── logs.wxml ........................................... logs页面布局结构</span><br><span class="line">│       └── logs.wxss ........................................... logs页面布局样式</span><br><span class="line">├── project.config.json ......................................... 开发工具配置文件</span><br><span class="line">└── utils ....................................................... 公共逻辑</span><br><span class="line">    └── util.js ................................................. 实用工具</span><br></pre></td></tr></table></figure>
<h3 id="2-配置"><a href="#2-配置" class="headerlink" title="2. 配置"></a>2. 配置</h3><p>熟悉了小程序的基础知识后，接下来我们一起动手开发一个真正的小程序，首先从配置小程开始。</p>
<p>按着上一章节步骤创建一个小程序，不勾选<strong>建立普通快速启动模板</strong></p>
<p><img alt data-src="微信小程序笔记/img-25.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-25.jpg" class="lozad"></p>
<h4 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h4><blockquote>
<p>通过 app.json 文件对小程序进行全局配置，如页面文件的路径、窗口表现、设置网络超时时间、设置多 tab 等。</p>
</blockquote>
<p><strong>app.json 配置清单</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>pages</td>
<td>String Array</td>
<td>是</td>
<td>设置页面路径</td>
</tr>
<tr>
<td>window</td>
<td>Object</td>
<td>否</td>
<td>设置默认窗口表现</td>
</tr>
<tr>
<td>tabBar</td>
<td>Object</td>
<td>否</td>
<td>设置底部 tab 表现</td>
</tr>
<tr>
<td>networkTimeout</td>
<td>Object</td>
<td>否</td>
<td>设置网络超时时间</td>
</tr>
<tr>
<td>debug</td>
<td>Boolean</td>
<td>否</td>
<td>设置是否开启调试模式</td>
</tr>
</tbody>
</table>
<p>创建 app.json 文件</p>
<p>app.json 示例</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"pages"</span>:[</span><br><span class="line">    <span class="string">"pages/index/index"</span>,</span><br><span class="line">    <span class="string">"pages/detail/index"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"window"</span>:&#123;</span><br><span class="line">    <span class="attr">"backgroundTextStyle"</span>:<span class="string">"light"</span>,</span><br><span class="line">    <span class="attr">"navigationBarBackgroundColor"</span>: <span class="string">"#fff"</span>,</span><br><span class="line">    <span class="attr">"navigationBarTitleText"</span>: <span class="string">"WeChat"</span>,</span><br><span class="line">    <span class="attr">"navigationBarTextStyle"</span>:<span class="string">"black"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><strong>pages</strong></li>
</ol>
<p>数组类型，数组中每一项都是字符串，来指定小程序由哪些页面组成。每一项代表对应页面的【路径+文件名】信息，数组的第一项代表小程序的初始页面。小程序中新增/减少页面，都需要对 pages 数组进行修改。文件名不需要写文件后缀，因为框架会自动去寻找路径下 .json ,  .js,  .wxml ,  .wxss 四个文件进行整合。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 创建目录及文件</span><br><span class="line">// 习惯性的将页面统一放到名叫 pages 的目录中，不是强制要求，可以起任意名称的目录</span><br><span class="line">pages</span><br><span class="line">├── detail</span><br><span class="line">│   ├── index.js</span><br><span class="line">│   └── index.wxml</span><br><span class="line">└── index</span><br><span class="line">    ├── index.js</span><br><span class="line">    └── index.wxml</span><br></pre></td></tr></table></figure>
<p>编辑 app.json，添加字段 pages</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"pages"</span>: [</span><br><span class="line">    <span class="string">"pages/index/index"</span>,</span><br><span class="line">    <span class="string">"pages/detail/detail"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><strong>window</strong></li>
</ol>
<p>对象类型，用于设置小程序的状态栏、导航条、标题、窗口背景色。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>描述</th>
<th>兼容</th>
</tr>
</thead>
<tbody>
<tr>
<td>navigationBarBackgroundColor</td>
<td>HexColor</td>
<td>#000000</td>
<td>导航栏背景颜色，如”#000000”</td>
<td>-</td>
</tr>
<tr>
<td>navigationBarTextStyle</td>
<td>String</td>
<td>white</td>
<td>导航栏标题颜色，仅支持 black/white</td>
<td></td>
</tr>
<tr>
<td>navigationBarTitleText</td>
<td>String</td>
<td></td>
<td>导航栏标题文字内容</td>
<td></td>
</tr>
<tr>
<td>backgroundColor</td>
<td>HexColor</td>
<td>#ffffff</td>
<td>窗口的背景色</td>
</tr>
</tbody>
</table>
<p>查看window<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#window" target="_blank" rel="noopener">更多配置</a>属性</p>
<p><img alt data-src="微信小程序笔记/img-21.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-21.jpg" class="lozad"><br>编辑 app.json，添加字段 windows</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"window"</span>: &#123;</span><br><span class="line">     <span class="attr">"navigationBarBackgroundColor"</span>: <span class="string">"#262626"</span>,</span><br><span class="line">     <span class="attr">"navigationBarTitleText"</span>: <span class="string">"FC游乐园"</span>,</span><br><span class="line">     <span class="attr">"navigationBarTextStyle"</span>: <span class="string">"white"</span>,</span><br><span class="line">     <span class="attr">"backgroundColor"</span>: <span class="string">"#F0F0F0"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下图所示：</p>
<p><img alt data-src="微信小程序笔记/img-26.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-26.jpg" class="lozad"></p>
<ol>
<li><strong>tabBar</strong></li>
</ol>
<p>对象类型，配置项指定 tab 栏的表现，以及 tab 切换时显示的对应页面。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>color</td>
<td>HexColor</td>
<td>是</td>
<td></td>
<td>tab 上的文字默认颜色</td>
</tr>
<tr>
<td>selectedColor</td>
<td>HexColor</td>
<td>是</td>
<td></td>
<td>tab 上的文字选中时的颜色</td>
</tr>
<tr>
<td>backgroundColor</td>
<td>HexColor</td>
<td>是</td>
<td></td>
<td>tab 的背景色</td>
</tr>
<tr>
<td>borderStyle</td>
<td>String</td>
<td>否</td>
<td>black</td>
<td>tabbar上边框的颜色， 仅支持 black/white</td>
</tr>
<tr>
<td>list</td>
<td>Array</td>
<td>是</td>
<td></td>
<td>tab 的列表，最少2个、最多5个</td>
</tr>
<tr>
<td>position</td>
<td>String</td>
<td>否</td>
<td>bottom</td>
<td>可选值 bottom、top</td>
</tr>
</tbody>
</table>
<ol>
<li>当设置 position 为 top 时，将不会显示 icon</li>
<li>tabBar 中的 list 是一个数组，<strong>只能配置最少2个、最多5个 tab</strong>，tab 按数组的顺序排序。</li>
</ol>
<p>其中 list 接受一个数组，数组中的每个项都是一个对象，其属性值如下：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>pagePath</td>
<td>String</td>
<td>是</td>
<td>页面路径，必须在 pages 中先定义</td>
</tr>
<tr>
<td>text</td>
<td>String</td>
<td>是</td>
<td>tab 上按钮文字</td>
</tr>
<tr>
<td>iconPath</td>
<td>String</td>
<td>否</td>
<td>图片路径，icon 大小限制为40kb，建议尺寸为 81px * 81px，当 postion 为 top 时，此参数无效，不支持网络图片</td>
</tr>
<tr>
<td>selectedIconPath</td>
<td>String</td>
<td>否</td>
<td>选中时的图片路径，icon 大小限制为40kb，建议尺寸为 81px * 81px ，当 postion 为 top 时，此参数无效</td>
</tr>
</tbody>
</table>
<p><img alt data-src="微信小程序笔记/img-22.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-22.jpg" class="lozad"></p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// 到目前完整的目录结构</span><br><span class="line">FC</span><br><span class="line">├── app.js</span><br><span class="line">├── app.json</span><br><span class="line">├── icons</span><br><span class="line">│   ├── cards-active.png</span><br><span class="line">│   ├── cards-default.png</span><br><span class="line">│   ├── face-active.png</span><br><span class="line">│   ├── face-default.png</span><br><span class="line">│   ├── home-active.png</span><br><span class="line">│   └── home-default.png</span><br><span class="line">├── pages</span><br><span class="line">│   ├── cards</span><br><span class="line">│   │   ├── index.js</span><br><span class="line">│   │   └── index.wxml</span><br><span class="line">│   ├── center</span><br><span class="line">│   │   ├── index.js</span><br><span class="line">│   │   └── index.wxml</span><br><span class="line">│   ├── detail</span><br><span class="line">│   │   ├── index.js</span><br><span class="line">│   │   └── index.wxml</span><br><span class="line">│   └── index</span><br><span class="line">│       ├── index.js</span><br><span class="line">│       └── index.wxml</span><br><span class="line">└── project.config.json</span><br></pre></td></tr></table></figure>
<p>编辑 app.json，添加 tabBar 字段</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">"tabBar": &#123;</span><br><span class="line">  "color": "#D78B09",</span><br><span class="line">  "selectedColor": "#FFF",</span><br><span class="line">  "backgroundColor": "#FECA49",</span><br><span class="line">  "borderStyle": "white",</span><br><span class="line">  "list": [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"text"</span>: <span class="string">"首页"</span>,</span><br><span class="line">      <span class="attr">"pagePath"</span>: <span class="string">"pages/index/index"</span>,</span><br><span class="line">      <span class="attr">"iconPath"</span>: <span class="string">"icons/home-default.png"</span>,</span><br><span class="line">      <span class="attr">"selectedIconPath"</span>: <span class="string">"icons/home-active.png"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"text"</span>: <span class="string">"卡券"</span>,</span><br><span class="line">      <span class="attr">"pagePath"</span>: <span class="string">"pages/cards/index"</span>,</span><br><span class="line">      <span class="attr">"iconPath"</span>: <span class="string">"icons/cards-default.png"</span>,</span><br><span class="line">      <span class="attr">"selectedIconPath"</span>: <span class="string">"icons/cards-active.png"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"text"</span>: <span class="string">"我的"</span>,</span><br><span class="line">      <span class="attr">"pagePath"</span>: <span class="string">"pages/center/index"</span>,</span><br><span class="line">      <span class="attr">"iconPath"</span>: <span class="string">"icons/face-default.png"</span>,</span><br><span class="line">      <span class="attr">"selectedIconPath"</span>: <span class="string">"icons/face-active.png"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下图如所示：</p>
<p><img alt data-src="微信小程序笔记/img-27.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-27.jpg" class="lozad"></p>
<h4 id="页面配置"><a href="#页面配置" class="headerlink" title="页面配置"></a>页面配置</h4><blockquote>
<p>每个页面可以有不同的表现，通过 pages 目录下的 .json 文件，如 logs.json ，实现页面的局部配置。但是只能设置 app.json 中的 window 配置项的内容，页面中配置项会覆盖 app.json 的 window 中相同的配置项。</p>
</blockquote>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>navigationBarBackgroundColor</td>
<td>HexColor</td>
<td>#000</td>
<td>导航栏背景颜色</td>
</tr>
<tr>
<td>navigationBarTextStyle</td>
<td>String</td>
<td>white</td>
<td>导航栏标题颜色，仅支持 black/white</td>
</tr>
<tr>
<td>navigationBarTitleText</td>
<td>String</td>
<td></td>
<td>导航栏标题文字内容</td>
</tr>
<tr>
<td>backgroundColor</td>
<td>HexColor</td>
<td>#fff</td>
<td>窗口的背景色</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 在 pages/center 目录下创建 index.json</span><br><span class="line">FC/pages/center</span><br><span class="line">├── index.js</span><br><span class="line">├── index.json</span><br><span class="line">└── index.wxml</span><br></pre></td></tr></table></figure>
<p>如下所示，编辑 index.json</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"navigationBarBackgroundColor"</span>: <span class="string">"#ffffff"</span>,</span><br><span class="line">  <span class="attr">"navigationBarTextStyle"</span>: <span class="string">"white"</span>,</span><br><span class="line">  <span class="attr">"navigationBarTitleText"</span>: <span class="string">"我的"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下图所示：</p>
<p><img alt data-src="微信小程序笔记/img-28.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-28.jpg" class="lozad"></p>
<h3 id="3-布局"><a href="#3-布局" class="headerlink" title="3. 布局"></a>3. 布局</h3><blockquote>
<p>小程序与Web类似，也分为结构、表现、行为三部分，小程序使用标记语言 WXML 定义结构、使用 WXSS 定义表现、使用 JavaScript 定义行为。</p>
</blockquote>
<p>小程序的每一个页面都是由 .wxml、.wxss、.js 三部分构成，<strong>并且要求文件名一致</strong>，通常为了<strong>管理方便</strong>，会将小程序的每个页面单独归到同一个目录下，所有的页面又都归到了 pages 目录下。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">FC/pages ............................................................... 所有页面目录</span><br><span class="line">├── cards .............................................................. card 页面</span><br><span class="line">│   ├── index.js</span><br><span class="line">│   └── index.wxml</span><br><span class="line">├── center ............................................................. center 页面</span><br><span class="line">│   ├── index.js</span><br><span class="line">│   ├── index.json</span><br><span class="line">│   └── index.wxml</span><br><span class="line">├── detail ............................................................. detail 页面</span><br><span class="line">│   ├── index.js</span><br><span class="line">│   └── index.wxml</span><br><span class="line">└── index .............................................................. index 页面</span><br><span class="line">    ├── index.js ....................................................... 行为</span><br><span class="line">    ├── index.wxss ..................................................... 表现</span><br><span class="line">    └── index.wxml ..................................................... 结构</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>wxml</strong> 指的是 <strong>W</strong>ei <strong>X</strong>in <strong>M</strong>arkup <strong>L</strong>anguage，微信团队以 XML 为基础，而定义的一套用以实现小程序页面布局的标记语言，与HTML非常类似。</p>
<p>wxml有一套自已的标签（组件）如 form、input、textarea、button、audio、video、view、text等，其含义与html的标签也是一样的，其中 view、text 可分别与 html 中的 div、text 对应。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"items"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>姓名:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请填写您的真实姓名"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>手机:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请填写您的手机号"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>身份:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请选择您与宝宝的关系身份"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>验证码:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"六位数字验证码"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"verify"</span> <span class="attr">size</span>=<span class="string">"mini"</span>&gt;</span>获取验证码<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"submit"</span>&gt;</span>绑定并登录<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>wxss</strong> 指的是 <strong>W</strong>ei <strong>X</strong>in <strong>S</strong>tyle <strong>S</strong>heet，微信团队定义的一套用以实现小程序布局样式的层叠样式表，与CSS非常接近。</p>
<p>wxss 与css 非常类似，可以理解成是 css 的一个子集，也包括选择器、属性、值部分，同样具有层叠的特征。</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">page</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#F0F0F0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.items</span> &#123;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#FFF</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.items</span> <span class="selector-tag">view</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span> <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#3C3C3C</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#F0F0F0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.items</span> <span class="selector-tag">view</span><span class="selector-pseudo">:last-child</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">0</span> none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.items</span> <span class="selector-tag">label</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">input</span> &#123;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: right;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#C9C9C9</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> <span class="selector-class">.submit</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#FFF</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#FECA49</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">form</span> <span class="selector-class">.verify</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">3px</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#FFF</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#45B8FF</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">36px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(0, -5px);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下图所示：</p>
<p><img alt data-src=".微信小程序笔记/img-29.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-29.jpg" class="lozad"></p>
<h1 id="二、开发文档"><a href="#二、开发文档" class="headerlink" title="二、开发文档"></a>二、开发文档</h1><ul>
<li>掌握小程序常用组件的使用</li>
<li>能够使用 wxss 布局小程序界面</li>
<li>掌握小程序的数据绑定</li>
<li>能够处理列表数据</li>
<li>能够根据条件对数据实现控制</li>
<li>掌握小程序事件监听方法</li>
<li>理解小程序事件冒泡现象</li>
</ul>
<h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><p>创建一个小程序项目演示UI组件及样式。</p>
<p><img alt data-src=".微信小程序笔记/img-30.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-30.jpg" class="lozad"></p>
<h3 id="适配"><a href="#适配" class="headerlink" title="适配"></a>适配</h3><blockquote>
<p>众所周之移动设备种类较多，如操作系统有 Android、IOS、Windows Phone等，屏幕尺寸有 4寸、4.7寸、5.5寸等，甚至屏幕像素密码也存在差异，开发者不得不针对不同的操作系统和不同的屏幕尺寸进行处理。</p>
<p>开发小程序不用担心操作系统的差异，小程序运行在微信中，微信有 Android版本 和 IOS版本，天然可以实现跨平台（操作系统）运行。</p>
<p>为了保证小程序能够在任何尺寸的屏幕上都能正常显示，开发人员需要进行适配置处理，为此微信团队在底层做了专门处理，提供了一个<strong>新的尺寸单位 rpx</strong> <strong>，rpx是一个相对长度单位，会根据屏幕尺寸自动调整</strong>（有点类似百分比的意思）。</p>
</blockquote>
<p><strong>rpx（responsive pixel）可以根据屏幕宽度进行自适应。规定所有屏幕宽为750rpx。</strong></p>
<p>rpx 与 px 的换算关系：</p>
<table>
<thead>
<tr>
<th>设备</th>
<th>屏幕尺寸</th>
<th>rpx换算px (屏幕宽度/750)</th>
<th>px换算rpx (750/屏幕宽度)</th>
</tr>
</thead>
<tbody>
<tr>
<td>iPhone5</td>
<td>320px</td>
<td>1rpx = 0.42px</td>
<td>1px = 2.34rpx</td>
</tr>
<tr>
<td>小米MIX 2S</td>
<td>360px</td>
<td>1rpx = 0.48px</td>
<td>1px = 2.083rpx</td>
</tr>
<tr>
<td>iPhone6</td>
<td>375px</td>
<td>1rpx = 0.5px</td>
<td>1px = 2rpx</td>
</tr>
<tr>
<td>iPhone6 Plus</td>
<td>414px</td>
<td>1rpx = 0.552px</td>
<td>1px = 1.81rpx</td>
</tr>
<tr>
<td>HUAWEI Mate 10</td>
<td>480px</td>
<td>1rpx = 0.64px</td>
<td>1px = 1.562rpx</td>
</tr>
</tbody>
</table>
<p>上述表格展示了 rpx 与 px 的换算关系，但是是由微信小程序在执行过程中自动换算的，我们只需要了解换算关系就可以了。</p>
<p><strong>一句话：开发小程序时所有屏幕宽度都是 750rpx。</strong></p>
<p>注：开发微信小程序时设计师可以用 750px 作为视觉稿的标准，这样可以一定程序上避免换算带来的误差。</p>
<h3 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">└── FC</span><br><span class="line">    ├── app.js</span><br><span class="line">    ├── app.json</span><br><span class="line">    ├── app.wxss</span><br><span class="line">    ├── pages</span><br><span class="line">    │   └── style ................................................. 演示 wxss 的使用</span><br><span class="line">    │       ├── common.wxss</span><br><span class="line">    │       ├── index.js</span><br><span class="line">    │       ├── index.wxml</span><br><span class="line">    │       └── index.wxss</span><br><span class="line">    └── project.config.json</span><br></pre></td></tr></table></figure>
<blockquote>
<p>小程序会自动根据 wxml 文件名，自动将 wxss 进行加载，例如 当加载 pages/style/index.wxml 时，会自动将 pages/style/index.wxss 加载。</p>
</blockquote>
<ul>
<li><p>样式导入</p>
<p>使用 @import 语句可以导入外联样式表， @import 后跟需要导入的外联样式表的相对路径，用 ; 表示语句结束。</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** common.wxss **/</span></span><br><span class="line"><span class="selector-tag">page</span> &#123;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#F0F0F0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** index.wxss **/</span></span><br><span class="line">@<span class="keyword">import</span> <span class="string">"common.wxss"</span>;</span><br><span class="line"><span class="selector-tag">page</span> &#123;</span><br><span class="line">	<span class="attribute">background</span>: <span class="number">#F2F2F2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>内联样式</p>
<ul>
<li>通过 style 属性直接定义样式。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- index.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">"color: red"</span>&gt;</span>学习开发小程序<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>外部样式</p>
<ul>
<li>通过 class 属性指定样式规则，属性值为类选择器名称，可以同时指定多个样式规则，中间以空格进行分隔。</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** index.wxss **/</span></span><br><span class="line"><span class="selector-class">.demo</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">3750</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">background</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- index.wxml --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- demo 类选择器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"demo"</span>&gt;</span>学习小程序<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>通过 id 属性指定样式规则，属性值为 id 选择器名称。</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** index.wxss **/</span></span><br><span class="line"><span class="selector-class">.demo</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">375</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">background</span>: pink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#test</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">100</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">40</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- index.wxml --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- test id选择器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"demo"</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span>学习小程序<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>选择器</p>
<p>| 选择器 | 示例 | 描述 |<br>| —— | —- | —- |<br>|        |      |      |<br>|        |      |      |<br>|        |      |      |<br>|        |      |      |<br>|        |      |      |<br>|        |      |      |</p>
<pre><code>实际上小程序还支持更多的css的选择器，后续应用中逐步介绍。
</code></pre></li>
</ul>
<h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><blockquote>
<p>小程序里的组件其实指的是 wxml 的标签，如 input、form、view等。</p>
<p>创建 demo 目录，演示各组件的使用</p>
</blockquote>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">└── FC</span><br><span class="line">    ├── app.js</span><br><span class="line">    ├── app.json</span><br><span class="line">    ├── app.wxss</span><br><span class="line">    ├── pages</span><br><span class="line"><span class="addition">+   │   ├── demo ............................................... 演示各组件的使用</span></span><br><span class="line">    │   └── style</span><br><span class="line">    │       ├── common.wxss</span><br><span class="line">    │       ├── index.js</span><br><span class="line">    │       ├── index.wxml</span><br><span class="line">    │       └── index.wxss</span><br><span class="line">    └── project.config.json</span><br></pre></td></tr></table></figure>
<ol>
<li><p><strong>image 相当于 html 中的 img 标签，用来加载图片。</strong></p>
<p>创建 image.js 和 image.wxml，将提前准备好的 static 粘进来</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">└── FC</span><br><span class="line">    ├── app.js</span><br><span class="line">    ├── app.json</span><br><span class="line">    ├── app.wxss</span><br><span class="line">    ├── pages</span><br><span class="line">    │   ├── demo</span><br><span class="line"><span class="addition">+   │   │   ├── image.js</span></span><br><span class="line"><span class="addition">+   │   │   └── image.wxml .................................... 演示 image 组件</span></span><br><span class="line">    │   └── style</span><br><span class="line">    │       ├── common.wxss</span><br><span class="line">    │       ├── index.js</span><br><span class="line">    │       ├── index.wxml</span><br><span class="line">    │       └── index.wxss</span><br><span class="line">    ├── project.config.json</span><br><span class="line"><span class="addition">+   └── static</span></span><br><span class="line"><span class="addition">+       ├── images</span></span><br><span class="line"><span class="addition">+       │   ├── blank.png</span></span><br><span class="line"><span class="addition">+       │   ├── icon.png</span></span><br><span class="line"><span class="addition">+       │   ├── ......</span></span><br><span class="line"><span class="addition">+       │   └── ......</span></span><br><span class="line"><span class="addition">+       └── uploads</span></span><br><span class="line"><span class="addition">+           ├── content_1.png</span></span><br><span class="line"><span class="addition">+           ├── slide_3.jpg</span></span><br><span class="line"><span class="addition">+           ├── slide_4.jpg</span></span><br><span class="line"><span class="addition">+           ├── ......</span></span><br><span class="line"><span class="addition">+           └── ......</span></span><br></pre></td></tr></table></figure>
<p>image 组件的使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- image.wxml --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 通过 src 属性加载图片 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 通过 mode 属性调整 图片的的显示方式 (裁切/缩放) --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- image 组件默认宽度为300px，默认高度为225px --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">"../../static/uploads/item_1.png"</span> <span class="attr">mode</span>=<span class="string">"aspectFit"</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>关于 <a href="https://developers.weixin.qq.com/miniprogram/dev/component/image.html" target="_blank" rel="noopener">mode 有效值</a></p>
</li>
<li><p><strong>text  相当于 html 中的 span，用来定义文本</strong></p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">└── FC</span><br><span class="line">    ├── app.js</span><br><span class="line">    ├── app.json</span><br><span class="line">    ├── app.wxss</span><br><span class="line">    ├── pages</span><br><span class="line">    │   ├── demo</span><br><span class="line">    │   │   ├── image.js</span><br><span class="line">    │   │   ├── image.wxml</span><br><span class="line"><span class="addition">+   │   │   ├── text.js</span></span><br><span class="line"><span class="addition">+   │   │   └── text.wxml .................................... 演示 image 组件</span></span><br><span class="line">    │   └── style</span><br><span class="line">    │       ├── common.wxss</span><br><span class="line">    │       ├── index.js</span><br><span class="line">    │       ├── index.wxml</span><br><span class="line">    │       └── index.wxss</span><br><span class="line">    ├── project.config.json</span><br><span class="line">    └── static</span><br><span class="line">        ├── images</span><br><span class="line">        └── uploads</span><br></pre></td></tr></table></figure>
<p>text 组件的使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- text.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>世上本无事，庸人自扰之<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>view 相当于 html 中的 div，一般做为容器出现。</strong></p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">└── FC</span><br><span class="line">    ├── app.js</span><br><span class="line">    ├── app.json</span><br><span class="line">    ├── app.wxss</span><br><span class="line">    ├── pages</span><br><span class="line">    │   ├── demo</span><br><span class="line">    │   │   ├── image.js</span><br><span class="line">    │   │   ├── image.wxml</span><br><span class="line">    │   │   ├── text.js</span><br><span class="line">    │   │   ├── text.wxml</span><br><span class="line"><span class="addition">+   │   │   ├── view.js</span></span><br><span class="line"><span class="addition">+   │   │   └── view.wxml .................................... 演示 view 组件</span></span><br><span class="line">    │   └── style</span><br><span class="line">    ├── project.config.json</span><br><span class="line">    └── static</span><br><span class="line">        ├── images</span><br><span class="line">        └── uploads</span><br></pre></td></tr></table></figure>
<p>view 组件的使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- view.wxml --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 模仿 PC网页 布局结构 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 头部 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 主体 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"body"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 侧边栏 --&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"aside"</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 内容 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 底部 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>牛刀小试</strong></p>
<p> 到目前为止我们学习了 image、text、image 三个组件，下面使用这三个组件布局一个页面。</p>
<p> 创建 index 目录及 index.wxml、index.wxss、index.js 三个文件。</p>
 <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">└── FC</span><br><span class="line">    ├── app.js</span><br><span class="line">    ├── app.json</span><br><span class="line">    ├── app.wxss</span><br><span class="line">    ├── pages</span><br><span class="line">    │   ├── demo</span><br><span class="line">    │   │   ├── image.js</span><br><span class="line">    │   │   ├── image.wxml</span><br><span class="line">    │   │   ├── text.js</span><br><span class="line">    │   │   ├── text.wxml</span><br><span class="line">    │   │   ├── view.js</span><br><span class="line">    │   │   └── view.wxml</span><br><span class="line"><span class="addition">+   │   ├── index</span></span><br><span class="line"><span class="addition">+   │   │   ├── index.js</span></span><br><span class="line"><span class="addition">+   │   │   ├── index.wxml</span></span><br><span class="line"><span class="addition">+   │   │   └── index.wxss</span></span><br><span class="line">    │   └── style</span><br><span class="line">    ├── project.config.json</span><br><span class="line">    └── static</span><br><span class="line">        ├── images</span><br><span class="line">        └── uploads</span><br></pre></td></tr></table></figure>
<p> 效果如下图所示:</p>
<p> <img alt data-src="微信小程序笔记/img-31.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-31.jpg" class="lozad"></li>
<li><p><strong>swiper 滑块组件，可以用来实现类似轮播图布局效果。</strong></p>
 <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">└── FC</span><br><span class="line">    ├── app.js</span><br><span class="line">    ├── app.json</span><br><span class="line">    ├── app.wxss</span><br><span class="line">    ├── pages</span><br><span class="line">    │   ├── demo</span><br><span class="line">    │   │   ├── image.js</span><br><span class="line">    │   │   ├── image.wxml</span><br><span class="line"><span class="addition">+   │   │   ├── swiper.js</span></span><br><span class="line"><span class="addition">+   │   │   ├── swiper.wxml .................................. 演示 swiper 组件</span></span><br><span class="line"><span class="addition">+   │   │   ├── swiper.wxss</span></span><br><span class="line">    │   │   ├── text.js</span><br><span class="line">    │   │   ├── text.wxml</span><br><span class="line">    │   │   ├── view.js</span><br><span class="line">    │   │   └── view.wxml</span><br><span class="line">    │   ├── index</span><br><span class="line">    │   └── style</span><br><span class="line">    ├── project.config.json</span><br><span class="line">    └── static</span><br><span class="line">        ├── images</span><br><span class="line">        └── uploads</span><br></pre></td></tr></table></figure>
<p> swiper 使用如下</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- swiper.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">swiper</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span>1<span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span>2<span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span>&gt;</span>3<span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br></pre></td></tr></table></figure>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* swiper.wxss */</span></span><br><span class="line"><span class="selector-tag">swiper-item</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: pink;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">300</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">80</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>继续完善 index 页面，添加轮播图</p>
<p> <img alt data-src="微信小程序笔记/img-32.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-32.jpg" class="lozad">
<p><strong>通过学习 view、image、text、swiper 对组件有了基本了解，小程序还有<a href="https://developers.weixin.qq.com/miniprogram/dev/component/" target="_blank" rel="noopener">其它组件</a>，后续学习中在对应的应用场景再进行学习。也可以扫码查看可微信团队官方演示</strong></p>
</li>
</ol>
<p><img alt data-src="微信小程序笔记/demo.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/demo.jpg" class="lozad"></p>
<ol start="6">
<li><p><strong>真机访问</strong></p>
<p>写到这里相信不少同学已经尝试扫码进行真机调试了，然而会遇到一个错误警告！！！</p>
<p><img alt data-src="微信小程序笔记/img-34.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-34.jpg" class="lozad">
<p>原因在于小程序总大小（包括图片、字体等静态资源）不能超过 2MB。</p>
<p>这个问题也很好解决，可以将图片、字体等静态资源放到服务器（公司会购买）上，然后通网络地址进行访问，也可以使用当下比较流行的图床服务。</p>
<p>下面介绍一个新浪图床（免费）的使用：</p>
<ul>
<li>奇才</li>
<li>苦</li>
<li>苦</li>
</ul>
<p>然后将代码中图片路径换成网络地址，如下所示</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 原来路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">"../../static/uploads/item_1.png"</span> <span class="attr">mode</span>=<span class="string">"aspectFit"</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 新图片路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">"http://fc.botue.com/uploads/item_1.png"</span> <span class="attr">class</span>=<span class="string">"thumb"</span> <span class="attr">mode</span>=<span class="string">"aspectFit"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="弹性盒子"><a href="#弹性盒子" class="headerlink" title="弹性盒子"></a>弹性盒子</h3><p><img alt data-src="微信小程序笔记/img-33.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-33.jpg" class="lozad"></p>
<h2 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h2><blockquote>
<p>通过前面学习，掌握了小程序页面的布局，然而小程序页面中显示的内容都是静态（写列）的，真正线上运行的小程序内容都应该是动态的，接下来我们学习如何在小程序中处理页面数据。</p>
</blockquote>
<h3 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h3><blockquote>
<p>小程序内容数据是由 JavaScript 控制提供的。</p>
<p>我们知道每个页面都是由 .wxml、.wxss、.js、.json 构成，其中 wxml 定义结构，wxss 定义表现、json 进行配置，.js 则专门处理逻辑。</p>
<p>当加载页面时，同名的 js 文件会自动加载并执行，如加载 pages/demo/data.wxml 时，pages/demo/data.js 会自动被加载执行。</p>
</blockquote>
<p><strong>所谓数据绑定是指数据与页面中组件的关联关系。使用 Mustache 语法（双大括号）将数据变量包起来</strong>。</p>
<p>创建 data.js、data.wxml、data.wxss 三个文件</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">└── FC</span><br><span class="line">    ├── app.js</span><br><span class="line">    ├── app.json</span><br><span class="line">    ├── app.wxss</span><br><span class="line">    ├── pages</span><br><span class="line">    │   ├── demo</span><br><span class="line"><span class="addition">+   │   │   ├── data.js ........................................... 数据逻辑</span></span><br><span class="line"><span class="addition">+   │   │   ├── data.wxml ......................................... 演示数据处理</span></span><br><span class="line"><span class="addition">+   │   │   ├── data.wxss</span></span><br><span class="line">    │   │   ├── image.js</span><br><span class="line">    │   │   ├── image.wxml</span><br><span class="line">    │   │   ├── ......</span><br><span class="line">    │   │   ├── view.js</span><br><span class="line">    │   │   └── view.wxml</span><br><span class="line">    │   ├── index</span><br><span class="line">    │   └── style</span><br><span class="line">    ├── project.config.json</span><br><span class="line">    └── static</span><br><span class="line">        ├── images</span><br><span class="line">        └── uploads</span><br></pre></td></tr></table></figure>
<h4 id="简单数据-data"><a href="#简单数据-data" class="headerlink" title="简单数据(data)"></a>简单数据(data)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo/data.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Page 是全局提供的，用来创建一个页面实例</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="comment">// 通过 data 属性，初始化页面中用到的数据</span></span><br><span class="line">    data: &#123;</span><br><span class="line">        <span class="comment">// 字符串类型</span></span><br><span class="line">        message: <span class="string">'hello world!'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h5 id="data中的数据获取"><a href="#data中的数据获取" class="headerlink" title="data中的数据获取"></a>data中的数据获取</h5><h6 id="Page-prototype-setData-Object-data-Function-callback"><a href="#Page-prototype-setData-Object-data-Function-callback" class="headerlink" title="Page.prototype.setData(Object data, Function callback)"></a>Page.prototype.setData(Object data, Function callback)</h6><p><code>setData</code> 函数用于将数据从逻辑层发送到视图层（异步），同时改变对应的 <code>this.data</code> 的值（同步）。</p>
<h4 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h4><table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>Object</td>
<td>是</td>
<td>这次要改变的数据</td>
<td></td>
</tr>
<tr>
<td>callback</td>
<td>Function</td>
<td>否</td>
<td>setData引起的界面更新渲染完毕后的回调函数</td>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener">1.5.0</a></td>
</tr>
</tbody>
</table>
<p><code>Object</code> 以 <code>key: value</code> 的形式表示，将 <code>this.data</code> 中的 <code>key</code> 对应的值改变成 <code>value</code>。</p>
<p><strong>其中 key 可以以数据路径的形式给出，支持改变数组中的某一项或对象的某个属性，如 array[2].message，a.b.c.d，并且不需要在 this.data 中预先定义。</strong></p>
<p><strong>注意：</strong></p>
<ol>
<li><strong>直接修改 this.data 而不调用 this.setData 是无法改变页面的状态的，还会造成数据不一致</strong>。</li>
<li>仅支持设置可 JSON 化的数据。</li>
<li>单次设置的数据不能超过1024kB，请尽量避免一次设置过多的数据。</li>
<li>请不要把 data 中任何一项的 value 设为 <code>undefined</code> ，否则这一项将不被设置并可能遗留一些潜在问题。</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--index.wxml--&gt;</span><br><span class="line">&lt;view&gt;&#123;&#123;text&#125;&#125;&lt;<span class="regexp">/view&gt;</span></span><br><span class="line"><span class="regexp">&lt;button bindtap="changeText"&gt;Change normal data&lt;/</span>button&gt;</span><br><span class="line">&lt;view&gt;&#123;&#123;num&#125;&#125;&lt;<span class="regexp">/view&gt;</span></span><br><span class="line"><span class="regexp">&lt;button bindtap="changeNum"&gt;Change normal num&lt;/</span>button&gt;</span><br><span class="line">&lt;view&gt;&#123;&#123;array[<span class="number">0</span>].text&#125;&#125;&lt;<span class="regexp">/view&gt;</span></span><br><span class="line"><span class="regexp">&lt;button bindtap="changeItemInArray"&gt;Change Array data&lt;/</span>button&gt;</span><br><span class="line">&lt;view&gt;&#123;&#123;object.text&#125;&#125;&lt;<span class="regexp">/view&gt;</span></span><br><span class="line"><span class="regexp">&lt;button bindtap="changeItemInObject"&gt;Change Object data&lt;/</span>button&gt;</span><br><span class="line">&lt;view&gt;&#123;&#123;newField.text&#125;&#125;&lt;<span class="regexp">/view&gt;</span></span><br><span class="line"><span class="regexp">&lt;button bindtap="addNewField"&gt;Add new data&lt;/</span>button&gt;</span><br><span class="line"><span class="comment">// index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    text: <span class="string">'init data'</span>,</span><br><span class="line">    num: <span class="number">0</span>,</span><br><span class="line">    array: [&#123;<span class="attr">text</span>: <span class="string">'init data'</span>&#125;],</span><br><span class="line">    object: &#123;</span><br><span class="line">      text: <span class="string">'init data'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  changeText() &#123;</span><br><span class="line">    <span class="comment">// this.data.text = 'changed data' // 不要直接修改 this.data</span></span><br><span class="line">    <span class="comment">// 应该使用 setData</span></span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      text: <span class="string">'changed data'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  changeNum() &#123;</span><br><span class="line">    <span class="comment">// 或者，可以修改 this.data 之后马上用 setData 设置一下修改了的字段</span></span><br><span class="line">    <span class="keyword">this</span>.data.num = <span class="number">1</span></span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      num: <span class="keyword">this</span>.data.num</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  changeItemInArray() &#123;</span><br><span class="line">    <span class="comment">// 对于对象或数组字段，可以直接修改一个其下的子字段，这样做通常比修改整个对象或数组更好</span></span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      <span class="string">'array[0].text'</span>: <span class="string">'changed data'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  changeItemInObject() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      <span class="string">'object.text'</span>: <span class="string">'changed data'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  addNewField() &#123;</span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      <span class="string">'newField.text'</span>: <span class="string">'new data'</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>wxml文件中的获取</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"msg"</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/demo/data.wxss */</span></span><br><span class="line"><span class="selector-tag">page</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.msg</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img alt data-src="微信小程序笔记/img-35.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-35.jpg" class="lozad"></p>
<ol>
<li><p><strong>复杂数据</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo/data.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="comment">// 通过 data 属性，初始化页面中用到的数据</span></span><br><span class="line">    data: &#123;</span><br><span class="line">        user: &#123;</span><br><span class="line">            name: <span class="string">'小明'</span>,</span><br><span class="line">            age: <span class="number">16</span></span><br><span class="line">        &#125;,</span><br><span class="line">        courses: [<span class="string">'wxml'</span>, <span class="string">'wxss'</span>, <span class="string">'javascript'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>我叫&#123;&#123;user.name&#125;&#125;，我今年&#123;&#123;user.age&#125;&#125;岁了，我在学习&#123;&#123;courses[0]&#125;&#125;课程。<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>运算</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo/data.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="comment">// 通过 data 属性，初始化页面中用到的数据</span></span><br><span class="line">    data: &#123;</span><br><span class="line">        a: <span class="number">10</span>,</span><br><span class="line">        b: <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;a&#125;&#125; + &#123;&#123;b&#125;&#125; = &#123;&#123;a + b&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>组合</strong></p>
<p>视情况介绍</p>
</li>
</ol>
<h3 id="列表数据"><a href="#列表数据" class="headerlink" title="列表数据"></a>列表数据</h3><blockquote>
<p>将数组数据遍历绑定到组件中。通过 wx:for 属性实现。</p>
</blockquote>
<ol>
<li><p><strong>基本用法</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo/data.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="comment">// 通过 data 属性，初始化页面中用到的数据</span></span><br><span class="line">    data: &#123;</span><br><span class="line">        users: [</span><br><span class="line">            &#123;<span class="attr">name</span>: <span class="string">'小明'</span>, <span class="attr">age</span>: <span class="number">16</span>, <span class="attr">gender</span>: <span class="string">'男'</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">name</span>: <span class="string">'小刚'</span>, <span class="attr">age</span>: <span class="number">19</span>, <span class="attr">gender</span>: <span class="string">'男'</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">name</span>: <span class="string">'小红'</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">gender</span>: <span class="string">'女'</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">name</span>: <span class="string">'小丽'</span>, <span class="attr">age</span>: <span class="number">17</span>, <span class="attr">gender</span>: <span class="string">'女'</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;users&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;index+1&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.age&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.gender&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>wx:for 属性将当前组件按着数组的长度动态创建，并且通过 index 变量可以访问到数组的索引值，通过item变量可以访问到单元值。</strong></p>
<p><img alt data-src="微信小程序笔记/img-36.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-36.jpg" class="lozad">
</li>
</ol>
<ol start="2">
<li><p><strong>指定索引值变量、单元值变量</strong></p>
<blockquote>
<p>通过 wx:for 对数组数据进行遍历时，可以分别指定访问数组索引值变量和单元值的变量。</p>
<p>wx:for-index 指定索引值变量，wx:for-item 批定单元值变量。</p>
<p>wx:for 支持嵌套</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo/data.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="comment">// 通过 data 属性，初始化页面中用到的数据</span></span><br><span class="line">    data: &#123;</span><br><span class="line">        brands: [</span><br><span class="line">            &#123;</span><br><span class="line">                name: <span class="string">'耐克'</span>,</span><br><span class="line">                origin: <span class="string">'美国'</span>,</span><br><span class="line">                category: [<span class="string">'男装'</span>, <span class="string">'女装'</span>, <span class="string">'鞋'</span>, <span class="string">'体育用品'</span>]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                name: <span class="string">'SK-II'</span>,</span><br><span class="line">                origin: <span class="string">'韩国'</span>,</span><br><span class="line">                category: [<span class="string">'防晒霜'</span>,<span class="string">'面膜'</span>, <span class="string">'洗护'</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;brands&#125;&#125;"</span> <span class="attr">wx:for-index</span>=<span class="string">"k"</span> <span class="attr">wx:for-item</span>=<span class="string">"v"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;k+1&#125;&#125; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span> &#123;&#123;v.name&#125;&#125; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span> &#123;&#123;v.origin&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;v.category&#125;&#125;"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>执行结果</p>
<p><img alt data-src="微信小程序笔记/img-37.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-37.jpg" class="lozad">
</li>
</ol>
<ol start="3">
<li><p><strong>block</strong></p>
<blockquote>
<p>通过 block 可以将多个组件元素“包”到一起进行渲染，block 只是提供一种结构，并不会被渲染到页面中。一般这样做的目的是可以精简组件结构。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;users&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.age&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo/data.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="comment">// 通过 data 属性，初始化页面中用到的数据</span></span><br><span class="line">    data: &#123;</span><br><span class="line">        users: [</span><br><span class="line">            &#123;<span class="attr">name</span>: <span class="string">'小明'</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">name</span>: <span class="string">'小红'</span>, <span class="attr">age</span>: <span class="number">16</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>wx:key</strong></p>
<p>视情况</p>
</li>
</ol>
<h3 id="条件数据"><a href="#条件数据" class="headerlink" title="条件数据"></a>条件数据</h3><blockquote>
<p>根据条件控制是否渲染某个（些）组件，通过 wx:if 属性实现。</p>
</blockquote>
<ol>
<li><p><strong>基本用法</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;true&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>锄禾日当午<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>多分支</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;users&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;index+1&#125;&#125; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span> &#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span> &#123;&#123;item.age&#125;&#125; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;item.age &lt;= 14&#125;&#125;"</span>&gt;</span> 儿童<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">wx:elif</span>=<span class="string">"&#123;&#123;item.age &lt;= 18&#125;&#125;"</span>&gt;</span> 未成年<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">wx:else</span>&gt;</span> 成年人<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo/data.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="comment">// 通过 data 属性，初始化页面中用到的数据</span></span><br><span class="line">    data: &#123;</span><br><span class="line">        users: [</span><br><span class="line">            &#123;<span class="attr">name</span>: <span class="string">'小明'</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">name</span>: <span class="string">'小红'</span>, <span class="attr">age</span>: <span class="number">13</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">name</span>: <span class="string">'小丽'</span>, <span class="attr">age</span>: <span class="number">19</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img alt data-src="微信小程序笔记/img-38.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-38.jpg" class="lozad"></li>
<li><p><strong>block</strong></p>
<blockquote>
<p>将满足同一条件的组件“包”起来，同时控制是否渲染。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>序号 <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span> 姓名 <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span> 年龄 <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span> 成年 <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span> 批准<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;users&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;index+1&#125;&#125; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span> &#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span> &#123;&#123;item.age&#125;&#125; <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;item.age&gt;18&#125;&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>是<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>是<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:else</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>否<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>否<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo/data.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="comment">// 通过 data 属性，初始化页面中用到的数据</span></span><br><span class="line">    data: &#123;</span><br><span class="line">        users: [</span><br><span class="line">            &#123;<span class="attr">name</span>: <span class="string">'小明'</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">name</span>: <span class="string">'小红'</span>, <span class="attr">age</span>: <span class="number">16</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">name</span>: <span class="string">'小丽'</span>, <span class="attr">age</span>: <span class="number">19</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img alt data-src="微信小程序笔记/img-39.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-39.jpg" class="lozad">
</li>
</ol>
<h3 id="共同属性"><a href="#共同属性" class="headerlink" title="共同属性"></a>共同属性</h3><p>所有wxml 标签都支持的属性称之为共同属性，如表2-1所示。</p>
<p>表2-1 共同属性</p>
<table>
<thead>
<tr>
<th><strong>属性名</strong></th>
<th><strong>类型</strong></th>
<th><strong>描述</strong></th>
<th><strong>注解</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>String</td>
<td>组件的唯一标识</td>
<td>整个页面唯一</td>
</tr>
<tr>
<td>class</td>
<td>String</td>
<td>组件的样式类</td>
<td>在对应的 WXSS 中定义的样式类</td>
</tr>
<tr>
<td>style</td>
<td>String</td>
<td>组件的内联样式</td>
<td>可以动态设置的内联样式</td>
</tr>
<tr>
<td>hidden</td>
<td>Boolean</td>
<td>组件是否显示</td>
<td>所有组件默认显示</td>
</tr>
<tr>
<td>data-*</td>
<td>Any</td>
<td>自定义属性</td>
<td>组件上触发的事件时，会发送给事件处理函数</td>
</tr>
<tr>
<td>bind<em>/catch</em></td>
<td>EventHandler</td>
<td>组件的事件</td>
</tr>
</tbody>
</table>
<h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><blockquote>
<p>小程序中的事件同 DOM 中的事件含义一样，只是语法及及其执行细节上有些差异。</p>
</blockquote>
<h3 id="页面-Page"><a href="#页面-Page" class="headerlink" title="页面 Page"></a>页面 Page</h3><h4 id="Page-Object-构造器"><a href="#Page-Object-构造器" class="headerlink" title="Page(Object) 构造器"></a>Page(Object) 构造器</h4><p><code>Page(Object)</code> 函数用来注册一个页面。接受一个 <code>Object</code> 类型参数，其指定页面的初始数据、生命周期回调、事件处理函数等。</p>
<p><strong>Object 参数说明：</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#data" target="_blank" rel="noopener">data</a></td>
<td>Object</td>
<td>页面的初始数据</td>
</tr>
<tr>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#onloadobject-query" target="_blank" rel="noopener">onLoad</a></td>
<td>Function</td>
<td>生命周期回调—监听页面加载</td>
</tr>
<tr>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#onshow" target="_blank" rel="noopener">onShow</a></td>
<td>Function</td>
<td>生命周期回调—监听页面显示</td>
</tr>
<tr>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#onready" target="_blank" rel="noopener">onReady</a></td>
<td>Function</td>
<td>生命周期回调—监听页面初次渲染完成</td>
</tr>
<tr>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#onhide" target="_blank" rel="noopener">onHide</a></td>
<td>Function</td>
<td>生命周期回调—监听页面隐藏</td>
</tr>
<tr>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#onunload" target="_blank" rel="noopener">onUnload</a></td>
<td>Function</td>
<td>生命周期回调—监听页面卸载</td>
</tr>
<tr>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#onpulldownrefresh" target="_blank" rel="noopener">onPullDownRefresh</a></td>
<td>Function</td>
<td>监听用户下拉动作</td>
</tr>
<tr>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#onreachbottom" target="_blank" rel="noopener">onReachBottom</a></td>
<td>Function</td>
<td>页面上拉触底事件的处理函数</td>
</tr>
<tr>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#onshareappmessageobject" target="_blank" rel="noopener">onShareAppMessage</a></td>
<td>Function</td>
<td>用户点击右上角转发</td>
</tr>
<tr>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#onpagescrollobject" target="_blank" rel="noopener">onPageScroll</a></td>
<td>Function</td>
<td>页面滚动触发事件的处理函数</td>
</tr>
<tr>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#onresize" target="_blank" rel="noopener">onResize</a></td>
<td>Function</td>
<td>页面尺寸改变时触发，详见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/resizable.html#%E5%9C%A8%E6%89%8B%E6%9C%BA%E4%B8%8A%E5%90%AF%E7%94%A8%E5%B1%8F%E5%B9%95%E6%97%8B%E8%BD%AC%E6%94%AF%E6%8C%81" target="_blank" rel="noopener">响应显示区域变化</a></td>
</tr>
<tr>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#ontabitemtapobject" target="_blank" rel="noopener">onTabItemTap</a></td>
<td>Function</td>
<td>当前是 tab 页时，点击 tab 时触发</td>
</tr>
<tr>
<td>其他</td>
<td>Any</td>
<td>开发者可以添加任意的函数或数据到 <code>Object</code> 参数中，在页面的函数中用 <code>this</code> 可以访问</td>
</tr>
</tbody>
</table>
<p><strong>示例代码：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">// index.js</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    text: &apos;This is page data.&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad(options) &#123;</span><br><span class="line">    // Do some initialize when page load.</span><br><span class="line">  &#125;,</span><br><span class="line">  onReady() &#123;</span><br><span class="line">    // Do something when page ready.</span><br><span class="line">  &#125;,</span><br><span class="line">  onShow() &#123;</span><br><span class="line">    // Do something when page show.</span><br><span class="line">  &#125;,</span><br><span class="line">  onHide() &#123;</span><br><span class="line">    // Do something when page hide.</span><br><span class="line">  &#125;,</span><br><span class="line">  onUnload() &#123;</span><br><span class="line">    // Do something when page close.</span><br><span class="line">  &#125;,</span><br><span class="line">  onPullDownRefresh() &#123;</span><br><span class="line">    // Do something when pull down.</span><br><span class="line">  &#125;,</span><br><span class="line">  onReachBottom() &#123;</span><br><span class="line">    // Do something when page reach bottom.</span><br><span class="line">  &#125;,</span><br><span class="line">  onShareAppMessage() &#123;</span><br><span class="line">    // return custom share data when user share.</span><br><span class="line">  &#125;,</span><br><span class="line">  onPageScroll() &#123;</span><br><span class="line">    // Do something when page scroll</span><br><span class="line">  &#125;,</span><br><span class="line">  onResize() &#123;</span><br><span class="line">    // Do something when page resize</span><br><span class="line">  &#125;,</span><br><span class="line">  onTabItemTap(item) &#123;</span><br><span class="line">    console.log(item.index)</span><br><span class="line">    console.log(item.pagePath)</span><br><span class="line">    console.log(item.text)</span><br><span class="line">  &#125;,</span><br><span class="line">  // Event handler.</span><br><span class="line">  viewTap() &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      text: &apos;Set some data for updating view.&apos;</span><br><span class="line">    &#125;, function () &#123;</span><br><span class="line">      // this is setData callback</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  customData: &#123;</span><br><span class="line">    hi: &apos;MINA&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>除了 <code>Page</code> ，作为高级用法，页面可以像自定义组件一样使用 <code>Component</code> 来创建，这样就可以使用自定义组件的特性，如 <code>behaviors</code> 等。具体细节请阅读 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/component.html" target="_blank" rel="noopener"><code>Component</code> 构造器</a> 章节。</p>
<h5 id="data"><a href="#data" class="headerlink" title="data"></a>data</h5><p><code>data</code> 是页面第一次渲染使用的<strong>初始数据</strong>。</p>
<p>页面加载时，<code>data</code> 将会以<code>JSON</code>字符串的形式由逻辑层传至渲染层，因此<code>data</code>中的数据必须是可以转成<code>JSON</code>的类型：字符串，数字，布尔值，对象，数组。</p>
<p>渲染层可以通过 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/index.html" target="_blank" rel="noopener">WXML</a> 对数据进行绑定。</p>
<p><strong>示例代码：</strong></p>
<p><a href="https://developers.weixin.qq.com/s/2PeBsKmn6EZ9" target="_blank" rel="noopener">在开发者工具中预览效果</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;&#123;&#123;text&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;view&gt;&#123;&#123;array[0].msg&#125;&#125;&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    text: &apos;init data&apos;,</span><br><span class="line">    array: [&#123;msg: &apos;1&apos;&#125;, &#123;msg: &apos;2&apos;&#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="生命周期回调函数"><a href="#生命周期回调函数" class="headerlink" title="生命周期回调函数"></a>生命周期回调函数</h4><p>生命周期的触发以及页面的路由方式<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/route.html" target="_blank" rel="noopener">详见</a></p>
<h5 id="onLoad-Object-query"><a href="#onLoad-Object-query" class="headerlink" title="onLoad(Object query)"></a>onLoad(Object query)</h5><p>页面加载时触发。一个页面只会调用一次，可以在 onLoad 的参数中获取打开当前页面<strong>路径中的参数</strong>。</p>
<p><strong>参数说明</strong></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>query</td>
<td>Object</td>
<td>打开当前页面路径中的参数</td>
</tr>
</tbody>
</table>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a.wxml页面</span><br><span class="line">通过路径传递参数：id</span><br><span class="line">&lt;navigator url=<span class="string">"./detail?mid=&#123;&#123;item.id&#125;&#125;"</span> wx:<span class="keyword">for</span>=<span class="string">"&#123;&#123;hots.pageData&#125;&#125;"</span> wx:key=<span class="string">"id"</span>&gt;</span><br><span class="line"></span><br><span class="line">b.js页面</span><br><span class="line">通过onload事件获取参数</span><br><span class="line">onLoad: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(options); <span class="comment">// 参数即为a页面的数据： &#123;mid: "1235560"&#125;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h5 id="onShow"><a href="#onShow" class="headerlink" title="onShow()"></a>onShow()</h5><p>页面显示/切入前台时触发。</p>
<h5 id="onReady"><a href="#onReady" class="headerlink" title="onReady()"></a>onReady()</h5><p>页面初次渲染完成时触发。一个页面只会调用一次，代表页面已经准备妥当，可以和视图层进行交互。</p>
<p>注意：对界面内容进行设置的 API 如<a href="https://developers.weixin.qq.com/miniprogram/dev/api/wx.setNavigationBarTitle.html" target="_blank" rel="noopener"><code>wx.setNavigationBarTitle</code></a>，请在<code>onReady</code>之后进行。详见<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/page.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F" target="_blank" rel="noopener">生命周期</a></p>
<h5 id="onHide"><a href="#onHide" class="headerlink" title="onHide()"></a>onHide()</h5><p>页面隐藏/切入后台时触发。 如 <code>navigateTo</code> 或底部 <code>tab</code> 切换到其他页面，小程序切入后台等。</p>
<h5 id="onUnload"><a href="#onUnload" class="headerlink" title="onUnload()"></a>onUnload()</h5><p>页面卸载时触发。如<code>redirectTo</code>或<code>navigateBack</code>到其他页面时。</p>
<h4 id="页面事件处理函数"><a href="#页面事件处理函数" class="headerlink" title="页面事件处理函数"></a>页面事件处理函数</h4><h5 id="onPullDownRefresh"><a href="#onPullDownRefresh" class="headerlink" title="onPullDownRefresh()"></a>onPullDownRefresh()</h5><p>监听用户下拉刷新事件。</p>
<ul>
<li>需要在<code>app.json</code>的<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#window" target="_blank" rel="noopener"><code>window</code></a>选项中或<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">页面配置</a>中开启<code>enablePullDownRefresh</code>。</li>
<li>可以通过<a href="https://developers.weixin.qq.com/miniprogram/dev/api/wx.startPullDownRefresh.html" target="_blank" rel="noopener"><code>wx.startPullDownRefresh</code></a>触发下拉刷新，调用后触发下拉刷新动画，效果与用户手动下拉刷新一致。</li>
<li>当处理完数据刷新后，<a href="https://developers.weixin.qq.com/miniprogram/dev/api/wx.stopPullDownRefresh.html" target="_blank" rel="noopener"><code>wx.stopPullDownRefresh</code></a>可以停止当前页面的下拉刷新。</li>
</ul>
<h5 id="onReachBottom"><a href="#onReachBottom" class="headerlink" title="onReachBottom()"></a>onReachBottom()</h5><p>监听用户上拉触底事件。</p>
<ul>
<li>可以在<code>app.json</code>的<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#window" target="_blank" rel="noopener"><code>window</code></a>选项中或<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">页面配置</a>中设置触发距离<code>onReachBottomDistance</code>。</li>
<li>在触发距离内滑动期间，本事件只会被触发一次。</li>
</ul>
<h5 id="onPageScroll-Object"><a href="#onPageScroll-Object" class="headerlink" title="onPageScroll(Object)"></a>onPageScroll(Object)</h5><p>监听用户滑动页面事件。</p>
<p><strong>Object 参数说明：</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>scrollTop</td>
<td>Number</td>
<td>页面在垂直方向已滚动的距离（单位px）</td>
</tr>
</tbody>
</table>
<p><strong>注意：请只在需要的时候才在 page 中定义此方法，不要定义空方法。以减少不必要的事件派发对渲染层-逻辑层通信的影响。</strong> <strong>注意：请避免在 onPageScroll 中过于频繁的执行 setData 等引起逻辑层-渲染层通信的操作。尤其是每次传输大量数据，会影响通信耗时。</strong></p>
<h5 id="onShareAppMessage-Object"><a href="#onShareAppMessage-Object" class="headerlink" title="onShareAppMessage(Object)"></a>onShareAppMessage(Object)</h5><p>监听用户点击页面内转发按钮（<a href="https://developers.weixin.qq.com/miniprogram/dev/component/button.html" target="_blank" rel="noopener"><code></code></a> 组件 <code>open-type=&quot;share&quot;</code>）或右上角菜单“转发”按钮的行为，并自定义转发内容。</p>
<p><strong>注意：只有定义了此事件处理函数，右上角菜单才会显示“转发”按钮</strong></p>
<p><strong>Object 参数说明：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>from</td>
<td>String</td>
<td>转发事件来源。 <code>button</code>：页面内转发按钮； <code>menu</code>：右上角转发菜单</td>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener">1.2.4</a></td>
</tr>
<tr>
<td>target</td>
<td>Object</td>
<td>如果 <code>from</code> 值是 <code>button</code>，则 <code>target</code> 是触发这次转发事件的 <code>button</code>，否则为 <code>undefined</code></td>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener">1.2.4</a></td>
</tr>
<tr>
<td>webViewUrl</td>
<td>String</td>
<td>页面中包含<a href="https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html" target="_blank" rel="noopener"><code></code></a>组件时，返回当前<a href="https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html" target="_blank" rel="noopener"><code></code></a>的url</td>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener">1.6.4</a></td>
</tr>
</tbody>
</table>
<p>此事件需要 return 一个 Object，用于自定义转发内容，返回内容如下：</p>
<p><strong>自定义转发内容</strong></p>
<table>
<thead>
<tr>
<th>字段</th>
<th>说明</th>
<th>默认值</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td>转发标题</td>
<td>当前小程序名称</td>
<td></td>
</tr>
<tr>
<td>path</td>
<td>转发路径</td>
<td>当前页面 path ，必须是以 / 开头的完整路径</td>
<td></td>
</tr>
<tr>
<td>imageUrl</td>
<td>自定义图片路径，可以是本地文件路径、代码包文件路径或者网络图片路径。支持PNG及JPG。显示图片长宽比是 5:4。</td>
<td>使用默认截图</td>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener">1.5.0</a></td>
</tr>
</tbody>
</table>
<p><strong>示例代码</strong></p>
<p><a href="https://developers.weixin.qq.com/s/mffqUKmr6fZU" target="_blank" rel="noopener">在开发者工具中预览效果</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  onShareAppMessage(res) &#123;</span><br><span class="line">    if (res.from === &apos;button&apos;) &#123;</span><br><span class="line">      // 来自页面内转发按钮</span><br><span class="line">      console.log(res.target)</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      title: &apos;自定义转发标题&apos;,</span><br><span class="line">      path: &apos;/page/user?id=123&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="onResize-object"><a href="#onResize-object" class="headerlink" title="onResize(object)"></a>onResize(object)</h5><blockquote>
<p>基础库 2.4.0 开始支持，低版本需做<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener">兼容处理</a>。</p>
</blockquote>
<p>小程序屏幕旋转时触发。详见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/resizable.html#%E5%9C%A8%E6%89%8B%E6%9C%BA%E4%B8%8A%E5%90%AF%E7%94%A8%E5%B1%8F%E5%B9%95%E6%97%8B%E8%BD%AC%E6%94%AF%E6%8C%81" target="_blank" rel="noopener">响应显示区域变化</a></p>
<h5 id="onTabItemTap-Object"><a href="#onTabItemTap-Object" class="headerlink" title="onTabItemTap(Object)"></a>onTabItemTap(Object)</h5><blockquote>
<p>基础库 1.9.0 开始支持，低版本需做<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener">兼容处理</a>。</p>
</blockquote>
<p>点击 tab 时触发</p>
<p><strong>Object 参数说明：</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>说明</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>index</td>
<td>String</td>
<td>被点击tabItem的序号，从0开始</td>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener">1.9.0</a></td>
</tr>
<tr>
<td>pagePath</td>
<td>String</td>
<td>被点击tabItem的页面路径</td>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener">1.9.0</a></td>
</tr>
<tr>
<td>text</td>
<td>String</td>
<td>被点击tabItem的按钮文字</td>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener">1.9.0</a></td>
</tr>
</tbody>
</table>
<p><strong>示例代码：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  onTabItemTap(item) &#123;</span><br><span class="line">    console.log(item.index)</span><br><span class="line">    console.log(item.pagePath)</span><br><span class="line">    console.log(item.text)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="组件事件处理函数"><a href="#组件事件处理函数" class="headerlink" title="组件事件处理函数"></a>组件事件处理函数</h4><p><code>Page</code> 中还可以定义组件事件处理函数。在渲染层的组件中加入<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html" target="_blank" rel="noopener">事件绑定</a>，当事件被触发时，就会执行 Page 中定义的事件处理函数。</p>
<p><strong>示例代码：</strong></p>
<p><a href="https://developers.weixin.qq.com/s/vUf6fKmX64Zn" target="_blank" rel="noopener">在开发者工具中预览效果</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;view bindtap=&quot;viewTap&quot;&gt;click me&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  viewTap() &#123;</span><br><span class="line">    console.log(&apos;view tap&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="Page-route"><a href="#Page-route" class="headerlink" title="Page.route"></a>Page.route</h5><blockquote>
<p>基础库 1.2.0 开始支持，低版本需做<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener">兼容处理</a>。</p>
</blockquote>
<p>到当前页面的路径，类型为<code>String</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  onShow() &#123;</span><br><span class="line">    console.log(this.route)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h5 id="Page-prototype-setData-Object-data-Function-callback-1"><a href="#Page-prototype-setData-Object-data-Function-callback-1" class="headerlink" title="Page.prototype.setData(Object data, Function callback)"></a>Page.prototype.setData(Object data, Function callback)</h5><p><code>setData</code> 函数用于将数据从逻辑层发送到视图层（异步），同时改变对应的 <code>this.data</code> 的值（同步）。</p>
<h5 id="参数说明-1"><a href="#参数说明-1" class="headerlink" title="参数说明"></a>参数说明</h5><table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
<th>最低版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>Object</td>
<td>是</td>
<td>这次要改变的数据</td>
<td></td>
</tr>
<tr>
<td>callback</td>
<td>Function</td>
<td>否</td>
<td>setData引起的界面更新渲染完毕后的回调函数</td>
<td><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener">1.5.0</a></td>
</tr>
</tbody>
</table>
<p><code>Object</code> 以 <code>key: value</code> 的形式表示，将 <code>this.data</code> 中的 <code>key</code> 对应的值改变成 <code>value</code>。</p>
<p><strong>其中 key 可以以数据路径的形式给出，支持改变数组中的某一项或对象的某个属性，如 array[2].message，a.b.c.d，并且不需要在 this.data 中预先定义。</strong></p>
<p><strong>注意：</strong></p>
<ol>
<li><strong>直接修改 this.data 而不调用 this.setData 是无法改变页面的状态的，还会造成数据不一致</strong>。</li>
<li>仅支持设置可 JSON 化的数据。</li>
<li>单次设置的数据不能超过1024kB，请尽量避免一次设置过多的数据。</li>
<li>请不要把 data 中任何一项的 value 设为 <code>undefined</code> ，否则这一项将不被设置并可能遗留一些潜在问题。</li>
</ol>
<p><strong>示例代码：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--index.wxml--&gt;</span><br><span class="line">&lt;view&gt;&#123;&#123;text&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;button bindtap=&quot;changeText&quot;&gt;Change normal data&lt;/button&gt;</span><br><span class="line">&lt;view&gt;&#123;&#123;num&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;button bindtap=&quot;changeNum&quot;&gt;Change normal num&lt;/button&gt;</span><br><span class="line">&lt;view&gt;&#123;&#123;array[0].text&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;button bindtap=&quot;changeItemInArray&quot;&gt;Change Array data&lt;/button&gt;</span><br><span class="line">&lt;view&gt;&#123;&#123;object.text&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;button bindtap=&quot;changeItemInObject&quot;&gt;Change Object data&lt;/button&gt;</span><br><span class="line">&lt;view&gt;&#123;&#123;newField.text&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;button bindtap=&quot;addNewField&quot;&gt;Add new data&lt;/button&gt;</span><br><span class="line">// index.js</span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    text: &apos;init data&apos;,</span><br><span class="line">    num: 0,</span><br><span class="line">    array: [&#123;text: &apos;init data&apos;&#125;],</span><br><span class="line">    object: &#123;</span><br><span class="line">      text: &apos;init data&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  changeText() &#123;</span><br><span class="line">    // this.data.text = &apos;changed data&apos; // 不要直接修改 this.data</span><br><span class="line">    // 应该使用 setData</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      text: &apos;changed data&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  changeNum() &#123;</span><br><span class="line">    // 或者，可以修改 this.data 之后马上用 setData 设置一下修改了的字段</span><br><span class="line">    this.data.num = 1</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      num: this.data.num</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  changeItemInArray() &#123;</span><br><span class="line">    // 对于对象或数组字段，可以直接修改一个其下的子字段，这样做通常比修改整个对象或数组更好</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      &apos;array[0].text&apos;: &apos;changed data&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  changeItemInObject() &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      &apos;object.text&apos;: &apos;changed data&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  addNewField() &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      &apos;newField.text&apos;: &apos;new data&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="事件监听"><a href="#事件监听" class="headerlink" title="事件监听"></a>事件监听</h3><p>小程中通过属性为组件添加事件的监听。例如 tap 事件（相当于 html 中的 click事件）</p>
<p><strong>语法格式： bind:事件名称=”回调函数”</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 为button组件绑定了 tap 事件，当用户点击了，会执行 sayHi 函数 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">bind:tap</span>=<span class="string">"sayHi"</span>&gt;</span>点我试试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo/data.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="comment">// 事件回调函数</span></span><br><span class="line">    sayHi: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Hi~'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>监听表单的 blur、 focus事件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo/data.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="comment">// 事件回调函数</span></span><br><span class="line">    sayHi: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Hi~'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    sayBye: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Bye~'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>姓名: <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">bind:focus</span>=<span class="string">"sayHi"</span> <span class="attr">bind:blur</span>=<span class="string">"sayBye"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>密码: <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>以前在学习 DOM 时见到的事件，绝大多数在小程序中都是被支持的。</strong></p>
<h3 id="事件冒泡"><a href="#事件冒泡" class="headerlink" title="事件冒泡"></a>事件冒泡</h3><blockquote>
<p>小程序事件处理机制与DOM类似，<strong>冒泡现象依然存在</strong>，但并非所有事件都会冒泡。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"parent"</span> <span class="attr">bind:tap</span>=<span class="string">"foo"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"child"</span> <span class="attr">bind:tap</span>=<span class="string">"bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo/data.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="comment">// 事件回调函数</span></span><br><span class="line">    foo: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'parent'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    bar: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'child'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如下图所示，当点击 .child 盒子时，同时触发了 .child 和 .parent 的 tap事件</p>
<h3 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h3><blockquote>
<p>同 DOM 一样，当某个事件被触发时，通过一个对象可以获得被触发事件的相关信息，例如 事件类型、触发元素等。</p>
<p>事件对象，通过回调函数的第一个参数来接收，习惯命名为 ev。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/demo/data.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="comment">// 事件回调函数</span></span><br><span class="line">    sayHi: <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(ev);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/demo/data.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">bind:tap</span>=<span class="string">"sayHi"</span>&gt;</span>点我试试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img alt data-src="微信小程序笔记/img-40.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-40.jpg" class="lozad"></p>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p><strong>以下内容你不需要立马完全弄明白，不过以后它会有帮助。</strong></p>
<p>下图说明了 Page 实例的生命周期。</p>
<p><img alt data-src="微信小程序笔记/mina-lifecycle.png" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/mina-lifecycle.png" class="lozad"></p>
<h1 id="三、开发实战"><a href="#三、开发实战" class="headerlink" title="三、开发实战"></a>三、开发实战</h1><ul>
<li>能够使用wxml、wxss实现界面布局</li>
<li>熟练掌握小程序组件的使用</li>
<li>熟练掌握弹性盒子的使用</li>
<li>掌握小程序事件的处理</li>
<li>掌握小程序数据绑定的使用</li>
</ul>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p><img alt data-src="微信小程序笔记/img-73.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-73.jpg" class="lozad"><br>创建文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">MaoYan</span><br><span class="line">├── app.js ............................................ 小程序入口</span><br><span class="line">├── app.json .......................................... 全局配置</span><br><span class="line">├── app.wxss .......................................... 全局样式</span><br><span class="line">├── assets ............................................ 静态资源</span><br><span class="line">│   └── icons ......................................... Tab 图标</span><br><span class="line">│       ├── cinema.png</span><br><span class="line">│       ├── cinema_selected.png</span><br><span class="line">│       ├── movie.png</span><br><span class="line">│       ├── movie_selected.png</span><br><span class="line">│       ├── user.png</span><br><span class="line">│       └── user_selected.png</span><br><span class="line">├── pages ............................................. UI界面</span><br><span class="line">│   ├── center</span><br><span class="line">│   │   ├── index.js</span><br><span class="line">│   │   └── index.wxml</span><br><span class="line">│   ├── cinema</span><br><span class="line">│   │   ├── index.js</span><br><span class="line">│   │   └── index.wxml</span><br><span class="line">│   └── movie</span><br><span class="line">│       ├── index.js</span><br><span class="line">│       └── index.wxml</span><br><span class="line">├── project.config.json ............................... 工具配置</span><br><span class="line">├── utils ............................................. 公共函数</span><br><span class="line">└── vendor ............................................ 第三方扩展</span><br></pre></td></tr></table></figure>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><blockquote>
<p>根据 UI 图对小程序页面及窗口进行配置</p>
</blockquote>
<p><img alt data-src="微信小程序笔记/img-74.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-74.jpg" class="lozad"></p>
<ul>
<li>配置页面</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"pages"</span>: [</span><br><span class="line">        <span class="string">"pages/movie/index"</span>,</span><br><span class="line">        <span class="string">"pages/cinema/index"</span>,</span><br><span class="line">        <span class="string">"pages/center/index"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>配置窗口</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"pages"</span>: [</span><br><span class="line">        <span class="string">"pages/movie/index"</span>,</span><br><span class="line">        <span class="string">"pages/movie/detail"</span>,</span><br><span class="line">        <span class="string">"pages/movie/video"</span>,</span><br><span class="line">        <span class="string">"pages/cinema/index"</span>,</span><br><span class="line">        <span class="string">"pages/center/index"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"window"</span>: &#123;</span><br><span class="line">        <span class="attr">"navigationBarBackgroundColor"</span>: <span class="string">"#e54847"</span>,</span><br><span class="line">        <span class="attr">"navigationBarTitleText"</span>: <span class="string">"猫眼电影"</span>,</span><br><span class="line">        <span class="attr">"backgroundColor"</span>: <span class="string">"#F6F6F6"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>配置底部tab</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"pages"</span>: [</span><br><span class="line">        <span class="string">"pages/movie/index"</span>,</span><br><span class="line">        <span class="string">"pages/movie/detail"</span>,</span><br><span class="line">        <span class="string">"pages/movie/video"</span>,</span><br><span class="line">        <span class="string">"pages/cinema/index"</span>,</span><br><span class="line">        <span class="string">"pages/center/index"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"window"</span>: &#123;</span><br><span class="line">        <span class="attr">"navigationBarBackgroundColor"</span>: <span class="string">"#e54847"</span>,</span><br><span class="line">        <span class="attr">"navigationBarTitleText"</span>: <span class="string">"猫眼电影"</span>,</span><br><span class="line">        <span class="attr">"backgroundColor"</span>: <span class="string">"#F6F6F6"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"tabBar"</span>: &#123;</span><br><span class="line">        <span class="attr">"backgroundColor"</span>: <span class="string">"#FFF"</span>,</span><br><span class="line">        <span class="attr">"selectedColor"</span>: <span class="string">"#f03d37"</span>,</span><br><span class="line">        <span class="attr">"color"</span>: <span class="string">"#696969"</span>,</span><br><span class="line">        <span class="attr">"list"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"text"</span>: <span class="string">"电影"</span>,</span><br><span class="line">                <span class="attr">"pagePath"</span>: <span class="string">"pages/movie/index"</span>,</span><br><span class="line">                <span class="attr">"iconPath"</span>: <span class="string">"assets/icons/movie.png"</span>,</span><br><span class="line">                <span class="attr">"selectedIconPath"</span>: <span class="string">"assets/icons/movie_selected.png"</span></span><br><span class="line"></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"text"</span>: <span class="string">"影院"</span>,</span><br><span class="line">                <span class="attr">"pagePath"</span>: <span class="string">"pages/cinema/index"</span>,</span><br><span class="line">                <span class="attr">"iconPath"</span>: <span class="string">"assets/icons/cinema.png"</span>,</span><br><span class="line">                <span class="attr">"selectedIconPath"</span>: <span class="string">"assets/icons/cinema_selected.png"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"text"</span>: <span class="string">"我的"</span>,</span><br><span class="line">                <span class="attr">"pagePath"</span>: <span class="string">"pages/center/index"</span>,</span><br><span class="line">                <span class="attr">"iconPath"</span>: <span class="string">"assets/icons/user.png"</span>,</span><br><span class="line">                <span class="attr">"selectedIconPath"</span>: <span class="string">"assets/icons/user_selected.png"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="电影"><a href="#电影" class="headerlink" title="电影"></a>电影</h2><blockquote>
<p>利用 wxml、wxss完成界面布局，并配合 javascript 实现基本界面交互。</p>
</blockquote>
<h3 id="首页"><a href="#首页" class="headerlink" title="首页"></a>首页</h3><p><img alt data-src="微信小程序笔记/img-75.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-75.jpg" class="lozad"></p>
<ul>
<li>头部</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/movie/index.wxml --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 头部 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 位置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">hover-class</span>=<span class="string">"none"</span> <span class="attr">class</span>=<span class="string">"location"</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 切换 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"tabs"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"current"</span>&gt;</span>热映<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>待映<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 搜索 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">hover-class</span>=<span class="string">"none"</span> <span class="attr">class</span>=<span class="string">"search"</span>&gt;</span><span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** pages/movie/index.wxss **/</span></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#FFF</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.location</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">120</span>rpx;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> <span class="selector-class">.location</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">8</span>rpx;</span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="number">#666</span> transparent transparent transparent;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">4</span>rpx;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">8</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<ul>
<li>电影列表</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/movie/index.wxml --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 电影列表 热映 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"items hots"</span> <span class="attr">hidden</span>=<span class="string">"&#123;&#123;tabIndex != 'hots'&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">"./detail"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 播放按钮 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"play"</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">"http://maoyan.botue.com/movie-1.jpg"</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 信息 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"meta"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"name"</span>&gt;</span>侏罗纪世界2<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"type"</span>&gt;</span>动作,冒险,科幻<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"actor"</span>&gt;</span>主演: 克里斯·帕拉特,布莱丝·达拉斯·霍华德,泰德·拉文<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>今天205家影院放映4445场<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 状态 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"status"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"extra"</span>&gt;</span></span><br><span class="line">                    8.5<span class="tag">&lt;<span class="name">text</span>&gt;</span>分<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span>购票<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line">    ......</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** pages/movie/index.wxss **/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.items</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#FFF</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.plan</span> &#123;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1</span>rpx solid <span class="number">#E6E6E6</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.items</span> <span class="selector-tag">image</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">128</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">180</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">24</span>rpx <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">30</span>rpx;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#E6E6E6</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-class">.play</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">39</span>rpx;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">25</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<ul>
<li>tab切换及下拉刷新</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/movie/index/index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        tabIndex: <span class="string">'hots'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">switch</span>: <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span><br><span class="line">		<span class="comment">// </span></span><br><span class="line">        <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">            tabIndex: ev.target.dataset.tabIndex</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    onPullDownRefresh: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 模拟延时</span></span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            wx.stopPullDownRefresh();</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/movie/index/index.wxml --&gt;</span></span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"><span class="comment">&lt;!-- 切换 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"tabs"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">bind:tap</span>=<span class="string">"switch"</span> <span class="attr">data-tab-index</span>=<span class="string">"hots"</span> <span class="attr">class</span>=<span class="string">"&#123;&#123;tabIndex == 'hots' ? 'current' : ''&#125;&#125;"</span>&gt;</span>热映<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">bind:tap</span>=<span class="string">"switch"</span> <span class="attr">data-tab-index</span>=<span class="string">"plan"</span> <span class="attr">class</span>=<span class="string">"&#123;&#123;(tabIndex == 'plan') ? 'current' : ''&#125;&#125;"</span>&gt;</span>待映<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h1 id="四、小程序API和公众号"><a href="#四、小程序API和公众号" class="headerlink" title="四、小程序API和公众号"></a>四、小程序API和公众号</h1><ul>
<li>能够调用小程序的界面交互</li>
<li>能够使用小程序API发起网络请求并获得数据</li>
<li>能够通过公众平台管理公众号</li>
<li>掌握公众号开发的基本配置</li>
<li>能够使用JSSDK对微信进行调用</li>
<li>掌握WeUI的使用</li>
</ul>
<h2 id="小程序API"><a href="#小程序API" class="headerlink" title="小程序API"></a>小程序API</h2><blockquote>
<p>API（<strong>A</strong>pplication <strong>P</strong>rogramming <strong>I</strong>nterface）是一些预先定义的函数，将小程序的某些特性开放给开发人员，如网络请求、地理定位、硬件访问等。开发者无需要关心其内部实现。</p>
</blockquote>
<p>创建一个项目练习使用小程序提供的API。</p>
<p><img alt data-src="微信小程序笔记/img-41.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-41.jpg" class="lozad"></p>
<h4 id="界面交互"><a href="#界面交互" class="headerlink" title="界面交互"></a>界面交互</h4><p>为了提升用户体验，小程序提供了友善的、风格统一的信息反馈机制。</p>
<p>例如，用户点击了某个按钮，用户会立即得到一个信息反馈，用来告知点击产生的结果。</p>
<ol>
<li><p><strong>Toast</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/feedback/index.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"feedback"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">"toast"</span>&gt;</span>Toast<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/feedback/index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    toast: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.showToast(&#123;</span><br><span class="line">            title: <span class="string">'成功'</span>,</span><br><span class="line">            icon: <span class="string">'success'</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img alt data-src="微信小程序笔记/toast.gif" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/toast.gif" class="lozad"></li>
<li><p><strong>Loading</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/feedback/index.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"feedback"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">"toast"</span>&gt;</span>Toast<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">buttn</span> <span class="attr">bind:tap</span>=<span class="string">"loading"</span>&gt;</span>Loading<span class="tag">&lt;/<span class="name">buttn</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/feedback/index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    toast: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.showToast(&#123;</span><br><span class="line">            title: <span class="string">'成功'</span>,</span><br><span class="line">            icon: <span class="string">'success'</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    loading: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.showLoading(&#123;</span><br><span class="line">            title: <span class="string">'正在加载...'</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img alt data-src="微信小程序笔记/loading.gif" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/loading.gif" class="lozad"></li>
<li><p><strong>Modal</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/feedback/index.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"feedback"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">"toast"</span>&gt;</span>Toast<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">"loading"</span>&gt;</span>Loading<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">"modal"</span>&gt;</span>Modal<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/feedback/index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    toast: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.showToast(&#123;</span><br><span class="line">            title: <span class="string">'成功'</span>,</span><br><span class="line">            icon: <span class="string">'success'</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    loading: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.showLoading(&#123;</span><br><span class="line">            title: <span class="string">'正在加载...'</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    modal: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.showModal(&#123;</span><br><span class="line">            title: <span class="string">'确定要删除吗？'</span>,</span><br><span class="line">            content: <span class="string">'删除后不可恢复'</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img alt data-src="微信小程序笔记/modal.gif" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/modal.gif" class="lozad"></li>
<li><p><strong>ActionSheet</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/feedback/index.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"feedback"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">"toast"</span>&gt;</span>Toast<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">"loading"</span>&gt;</span>Loading<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"feedback"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">"modal"</span>&gt;</span>Modal<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">"sheet"</span>&gt;</span>ActionSheet<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/feedback/index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    toast: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.showToast(&#123;</span><br><span class="line">            title: <span class="string">'成功'</span>,</span><br><span class="line">            icon: <span class="string">'success'</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    loading: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.showLoading(&#123;</span><br><span class="line">            title: <span class="string">'正在加载...'</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    modal: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.showModal(&#123;</span><br><span class="line">            title: <span class="string">'确定要删除吗？'</span>,</span><br><span class="line">            content: <span class="string">'删除后不可恢复'</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    sheet: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.showActionSheet(&#123;</span><br><span class="line">            itemList: [<span class="string">'拍照'</span>, <span class="string">'从手机相册选择'</span>]</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><img alt data-src="微信小程序笔记/actionsheet.gif" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/actionsheet.gif" class="lozad"></li>
<li><p><strong>补充1</strong></p>
</li>
<li><p><strong>补充2</strong></p>
</li>
<li><p><strong>……</strong></p>
</li>
</ol>
<h4 id="网络请求"><a href="#网络请求" class="headerlink" title="网络请求"></a>网络请求</h4><blockquote>
<p>还记得 Ajax 吗？小程序也具备同 Ajax 相同的网络请求的能力。</p>
</blockquote>
<ol>
<li><p>基本使用</p>
<p>使用 Express 框架启动一个服务器。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Server/app.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    res.send(<span class="string">'&lt;h1&gt;hello minprogram&lt;/h1&gt;'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> Server</span><br><span class="line">$ node app.js</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/network/index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    sayHi: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 发起请求</span></span><br><span class="line">        wx.request(&#123;</span><br><span class="line">           url: <span class="string">'http://localhost:3000/'</span> </span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/network/index.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">"sayHi"</span>&gt;</span>打个招呼<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>出于安全考虑，小程序强制要求使用HTTPS协议。下图报错是因为请求地址不是 https 协议。</p>
<p><img alt data-src="微信小程序笔记/img-42.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-42.jpg" class="lozad">
<p>配置开发工具不进行请求协义的验证（只针对开发测试阶段生效）。</p>
<p><img alt data-src="微信小程序笔记/img-43.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-43.jpg" class="lozad">
</li>
</ol>
<p>   最终执行结果：</p>
<p>   <img alt data-src="微信小程序笔记/request.gif" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/request.gif" class="lozad"></p>
<p>   <strong>其它可配置的参数</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>必填</th>
<th>默认值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>url</td>
<td>String</td>
<td>是</td>
<td></td>
<td>接口地址</td>
</tr>
<tr>
<td>data</td>
<td>Object、String、ArrayBuffer</td>
<td>否</td>
<td></td>
<td>请求参数</td>
</tr>
<tr>
<td>header</td>
<td>Object</td>
<td>否</td>
<td></td>
<td>设置请求头</td>
</tr>
<tr>
<td>method</td>
<td>String</td>
<td>否</td>
<td>GET</td>
<td>设置请求方式</td>
</tr>
<tr>
<td>dataType</td>
<td>String</td>
<td>否</td>
<td>json</td>
<td>是否对响应数据调用 JSON.parse()</td>
</tr>
<tr>
<td>success</td>
<td>Function</td>
<td>否</td>
<td></td>
<td>响应成功的回调函数</td>
</tr>
<tr>
<td>fail</td>
<td>Function</td>
<td>否</td>
<td></td>
<td>响应失败的回调函数</td>
</tr>
<tr>
<td>complete</td>
<td>Function</td>
<td>否</td>
<td></td>
<td>响应完成的回调函数</td>
</tr>
</tbody>
</table>
<ol>
<li><p><strong>数据渲染</strong></p>
<p>将网络请求来的数据展示到组件中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Server/app.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    <span class="comment">// res.send('&lt;h1&gt;hello minprogram&lt;/h1&gt;');</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 接收请求数据</span></span><br><span class="line">    <span class="keyword">let</span> &#123;query&#125; = url.parse(req.url, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 响应 json 数据格式</span></span><br><span class="line">    res.json(query);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/network/index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    sayHi: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.request(&#123;</span><br><span class="line">            url: <span class="string">'http://localhost:3000/'</span>,</span><br><span class="line">            data: &#123;</span><br><span class="line">                name: <span class="string">'小明'</span>,</span><br><span class="line">                age: <span class="number">16</span></span><br><span class="line">            &#125;,</span><br><span class="line">            success: <span class="function">(<span class="params">info</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// console.log(info);</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// 设置 message</span></span><br><span class="line">                <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">                    message: <span class="string">'你好 '</span> + info.data.name + <span class="string">'同学'</span></span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/network/index.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"msg"</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">"sayHi"</span>&gt;</span>打个招呼<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>实战</strong></p>
<p>请求猫眼数据接口。</p>
</li>
</ol>
<h4 id="地理定位"><a href="#地理定位" class="headerlink" title="地理定位"></a>地理定位</h4><blockquote>
<p>LBS（<strong>L</strong>ocation <strong>B</strong>ased <strong>S</strong>ervice）基于位置的服务，是指通过电信移动运营商的无线电通讯网络或外部定位方式，获取移动终端用户的位置信息，为用户提供相应服务的一种增值业务。如滴滴打车、美团外卖，地图等，主要是基于用户位置提供服务。</p>
<p>小程序为开发开放了获取用户位置的接口。</p>
</blockquote>
<ol>
<li>基本使用</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/location/index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    onLoad: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 获取经纬度</span></span><br><span class="line">        wx.getLocation(&#123;</span><br><span class="line">            success: <span class="function">(<span class="params">info</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// latitude 纬度</span></span><br><span class="line">                <span class="comment">// longitude 经度</span></span><br><span class="line">                <span class="keyword">let</span> &#123;longitude, latitude&#125; = info;</span><br><span class="line">                <span class="built_in">console</span>.log(longitude, latitude);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>为了保护用户隐私，需要经过用户允许才能获取用户的位置信息，如下图：</p>
<p><img alt data-src="微信小程序笔记/img-44.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-44.jpg" class="lozad"></p>
<p>显示地图</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/location/index.js</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    onLoad: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 获取经纬度</span></span><br><span class="line">        wx.getLocation(&#123;</span><br><span class="line">            success: <span class="function">(<span class="params">info</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// latitude 纬度</span></span><br><span class="line">                <span class="comment">// longitude 经度</span></span><br><span class="line">                <span class="keyword">let</span> &#123;longitude, latitude&#125; = info;</span><br><span class="line">                <span class="comment">// 设置数据</span></span><br><span class="line">                <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">                    longitude: longitude,</span><br><span class="line">                    latitude: latitude</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- pages/location/index.wxml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">map</span> <span class="attr">longitude</span>=<span class="string">"&#123;&#123;longitude&#125;&#125;"</span> <span class="attr">latitude</span>=<span class="string">"&#123;&#123;latitude&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/location/index.wxss */</span></span><br><span class="line"><span class="selector-tag">page</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">map</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行结果，如下图所示：</p>
<p><img alt data-src="微信小程序笔记/img-45.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-45.jpg" class="lozad"></p>
<ol>
<li><p>实战</p>
<p>应用到猫眼电影</p>
</li>
</ol>
<h4 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h4><h5 id="数据缓存"><a href="#数据缓存" class="headerlink" title="数据缓存"></a>数据缓存</h5><h5 id="设备信息"><a href="#设备信息" class="headerlink" title="设备信息"></a>设备信息</h5><h2 id="公众平台"><a href="#公众平台" class="headerlink" title="公众平台"></a>公众平台</h2><blockquote>
<p>微信公众平台，简称公众号。微信推出的自媒体平台，提供一对多的媒体性活动，如消息推送、品牌传播、分享等，已经形成了一种主流的营销方式。</p>
<p><a href="http://kf.qq.com/faq/120911VrYVrA130805byM32u.html" target="_blank" rel="noopener">订阅号与服务号的区别</a></p>
</blockquote>
<p><img alt data-src="微信小程序笔记/img-46.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-46.jpg" class="lozad"></p>
<h4 id="1-申请账号"><a href="#1-申请账号" class="headerlink" title="1. 申请账号"></a>1. <a href="https://mp.weixin.qq.com/cgi-bin/registermidpage?action=index&amp;lang=zh_CN" target="_blank" rel="noopener">申请账号</a></h4><p><img alt data-src="微信小程序笔记/img-6.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-6.jpg" class="lozad"><br>不同类型账号功能介绍，如下图：</p>
<p><img alt data-src="微信小程序笔记/img-47.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-47.jpg" class="lozad"><br>根据需要选择合适的账号类型，按着注程引导完成注册。</p>
<p><strong>注：个人只能申请注册订阅号</strong></p>
<h4 id="2-账号管理"><a href="#2-账号管理" class="headerlink" title="2. 账号管理"></a>2. 账号管理</h4><blockquote>
<p>微信公众平台官方提供的后台对公众号进行管理。</p>
</blockquote>
<h5 id="粉丝管理"><a href="#粉丝管理" class="headerlink" title="粉丝管理"></a>粉丝管理</h5><ol>
<li><strong>打标签、黑名单</strong></li>
</ol>
<p><img alt data-src="微信小程序笔记/img-48.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-48.jpg" class="lozad"></p>
<ol>
<li><strong>发送消息</strong></li>
</ol>
<p><img alt data-src="微信小程序笔记/img-49.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-49.jpg" class="lozad"></p>
<h5 id="自动回复"><a href="#自动回复" class="headerlink" title="自动回复"></a>自动回复</h5><ol>
<li><p>关注时回复</p>
<p>当公众号被关注时，自动回复一条消息，消息可以是文字、图片、语音、视频等类型。</p>
<p><img alt data-src="微信小程序笔记/img-50.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-50.jpg" class="lozad">
</li>
</ol>
<p>   效果如下图所示：</p>
<p>   <img alt data-src="微信小程序笔记/img-51.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-51.jpg" class="lozad"></p>
<ol start="2">
<li><p>关键词回复</p>
<p>管理者预先设置好关键词，当粉丝发送消息时，自动根据关键词对消息内容进行匹配，匹配成后自动回复批定内容，消息可以是图文消息、文字、图片、语音、视频。</p>
<p><img alt data-src="微信小程序笔记/img-52.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-52.jpg" class="lozad">
<p>效果如下图所示：</p>
<p><img alt data-src="微信小程序笔记/img-53.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-53.jpg" class="lozad"></li>
<li><p>收到消息回复</p>
<p>粉丝发送任意一条消息时，系统自动回复一条消息，消息可以是文字、图片、语音、视频等类型。</p>
<p><img alt data-src="微信小程序笔记/img-54.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-54.jpg" class="lozad">
<p>效果如下图所示：</p>
<p><img alt data-src="微信小程序笔记/img-55.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-55.jpg" class="lozad">
<h5 id="自定义菜单"><a href="#自定义菜单" class="headerlink" title="自定义菜单"></a>自定义菜单</h5></li>
</ol>
<p>设置公众号底部菜单，当粉丝点击这些菜单时可以回复一条消息、跳转到某个网页、打开某个小程序等。最多设置3个一级菜单、每个一级菜单最多设置5个二级菜单。</p>
<p><img alt data-src="微信小程序笔记/img-56.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-56.jpg" class="lozad"></p>
<h5 id="关联小程序"><a href="#关联小程序" class="headerlink" title="关联小程序"></a>关联小程序</h5><blockquote>
<p>为公众号关联小程序，增加了访问小程序的入口，通过小程序也可丰富公众号的内容。</p>
</blockquote>
<p>查看公众号主页，如下图所示：</p>
<p><img alt data-src="微信小程序笔记/img-57.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-57.jpg" class="lozad"></p>
<h4 id="3-开发配置"><a href="#3-开发配置" class="headerlink" title="3. 开发配置"></a>3. 开发配置</h4><ul>
<li><p>成为开发者</p>
<p><img alt data-src="微信小程序笔记/img-58.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-58.jpg" class="lozad"></li>
<li><p>启用密码</p>
<p><img alt data-src="微信小程序笔记/img-59.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-59.jpg" class="lozad"></li>
<li><p>授权</p>
<p><img alt data-src="微信小程序笔记/img-60.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-60.jpg" class="lozad"></li>
<li><p>保存 AppSecret</p>
<p><strong>注：妥善保管 AppSecret，如果忘记了需要进行重置。</strong></p>
<p><img alt data-src="微信小程序笔记/img-61.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-61.jpg" class="lozad"></li>
<li><p>完成</p>
<p><img alt data-src="微信小程序笔记/img-62.jpg" class="lozad"></p>
<img data-src="/2019/10/24/微信小程序笔记/img-62.jpg" class="lozad">
<p>经过上述操作后获得 AppID、AppSecret这个开发必不可少的信息。</p>
</li>
</ul>
<h4 id="4-接口权限"><a href="#4-接口权限" class="headerlink" title="4. 接口权限"></a>4. 接口权限</h4><blockquote>
<p>微信以接口的形式将众多功能开放出来，供具有开发能力的公司结合自身业务进行定制开发，然而这其中有一些接口如微信支付、微信分享，需要服务号或着认证后才可以被调用。</p>
</blockquote>
<p>如下图所示：</p>
<p><img alt data-src="微信小程序笔记/img-64.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-64.jpg" class="lozad"></p>
<h4 id="5-测试账号"><a href="#5-测试账号" class="headerlink" title="5. 测试账号"></a>5. 测试账号</h4><blockquote>
<p>微信官方为每个公众号开放了一个测试账号，可以获得大部分的接口权限，一般只用于开发测试阶段。</p>
</blockquote>
<p>登录公众号后，选择开发者工具</p>
<p><img alt data-src="微信小程序笔记/img-65.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-65.jpg" class="lozad"><br>再选择公众平台测试账号</p>
<p><img alt data-src="微信小程序笔记/img-66.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-66.jpg" class="lozad"><br>获得供开发测试的 appID、appsecret，如图所示：</p>
<p><img alt data-src="微信小程序笔记/img-67.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-67.jpg" class="lozad"><br>查看粉丝列表</p>
<p><img alt data-src="微信小程序笔记/img-68.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-68.jpg" class="lozad"><br>接口权限列表</p>
<p><img alt data-src="微信小程序笔记/img-69.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-69.jpg" class="lozad"></p>
<h4 id="6-JSSDK"><a href="#6-JSSDK" class="headerlink" title="6. JSSDK"></a>6. JSSDK</h4><blockquote>
<p>在微信中浏览器 H5 页面时，可以调用微信扩展的功能，如自定义分享、微信支付、摇一摇、扫码、语音识别等高级特性。</p>
</blockquote>
<p>登录公众号后，选择开发者工具，然后再选择开发者文档，如下图所示：</p>
<p><img alt data-src="微信小程序笔记/img-70.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-70.jpg" class="lozad"></p>
<h5 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h5><p>为了提高接口调用的安全性，微信官方需要对企业域名进行验证，</p>
<p>登录公众号后，选择公从号设置</p>
<p><img alt data-src="微信小程序笔记/img-71.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-71.jpg" class="lozad"><br><strong>每个公从号最多可以设置3个域名，且必须通过ICP备案的验证。只能通过设置好的域名才能访问JSSDK的接口。</strong></p>
<p>开发阶段一般使用测试账号，测试账号也需要配置安全域名，但是步骤比简单：</p>
<p><img alt data-src="微信小程序笔记/img-72.jpg" class="lozad"><br><img data-src="/2019/10/24/微信小程序笔记/img-72.jpg" class="lozad"></p>
<h5 id="验证配置"><a href="#验证配置" class="headerlink" title="验证配置"></a>验证配置</h5><blockquote>
<p>配置了安全域名后，还必须按着微信官方的验证规则进行验证，要实现这个步骤需要进行编码操作，关于实现逻辑可以参考微信官方的<a href="https://mp.weixin.qq.com/wiki?t=assets/res_main&amp;id=mp1421141115#-6-demo-" target="_blank" rel="noopener">示例</a>。</p>
<p><a href="http://demo.open.weixin.qq.com/jssdk/sample.zip" target="_blank" rel="noopener">下载示例</a></p>
</blockquote>
<p>官方提供了 java、php、node、python的示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">sample</span><br><span class="line">├── java .................................................. java 示例</span><br><span class="line">│   └── sign.java</span><br><span class="line">├── node .................................................. node 示例</span><br><span class="line">│   ├── check_sign.js</span><br><span class="line">│   ├── node_modules</span><br><span class="line">│   │   └── jssha</span><br><span class="line">│   │       ├── CHANGELOG</span><br><span class="line">│   │       ├── LICENSE</span><br><span class="line">│   │       ├── README.md</span><br><span class="line">│   │       ├── bower.json</span><br><span class="line">│   │       ├── package.json</span><br><span class="line">│   │       └── src</span><br><span class="line">│   │           └── sha.js</span><br><span class="line">│   ├── package.json</span><br><span class="line">│   └── sign.js</span><br><span class="line">├── php .................................................. php 示例</span><br><span class="line">│   ├── access_token.php</span><br><span class="line">│   ├── jsapi_ticket.php</span><br><span class="line">│   ├── jssdk.php</span><br><span class="line">│   └── sample.php</span><br><span class="line">├── python ............................................... python 示例</span><br><span class="line">│   └── sign.py</span><br><span class="line">└── readme.txt</span><br></pre></td></tr></table></figure>
<p>以我们熟悉的 node 为例:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> Server;</span><br><span class="line">$ npm install wechat-jssdk --save</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Server/app.js</span></span><br><span class="line"><span class="keyword">const</span> Wechat = <span class="built_in">require</span>(<span class="string">'wechat-jssdk'</span>);</span><br><span class="line"><span class="keyword">const</span> wx = <span class="keyword">new</span> Wechat(&#123;</span><br><span class="line">    appId: <span class="string">'Your appid'</span>,</span><br><span class="line">    appSecret: <span class="string">'Your appsecret'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/weixin'</span>, (req, res) =&gt; &#123;</span><br><span class="line">    wx.jssdk.getSignature(<span class="string">'Your url'</span>).then(<span class="function"><span class="params">signatureData</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(signatureData);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"appId"</span>: <span class="string">"wx7cfd1bd1af42d511"</span>,</span><br><span class="line">    <span class="attr">"timestamp"</span>: <span class="string">"1528286021"</span>,</span><br><span class="line">    <span class="attr">"nonceStr"</span>: <span class="string">"8emetkwjlhh"</span>,</span><br><span class="line">    <span class="attr">"signature"</span>: <span class="string">"ff6a515c33b44c02b021dd7cf4b8cdd7badbe2b1"</span>,</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"/"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="调用接口"><a href="#调用接口" class="headerlink" title="调用接口"></a>调用接口</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- view/jssdk/index.html --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSSDK使用<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn1"</span>&gt;</span>分享到朋友圈<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn2"</span>&gt;</span>分享给朋友<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/libs/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入 jssdk --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://res.wx.qq.com/open/js/jweixin-1.2.0.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 注入配置信息</span></span></span><br><span class="line">        wx.config(&#123;</span><br><span class="line"><span class="actionscript">            debug: <span class="literal">true</span>, </span></span><br><span class="line"><span class="actionscript">            appId: <span class="string">'&#123;&#123;appId&#125;&#125;'</span>,</span></span><br><span class="line"><span class="actionscript">            timestamp: <span class="string">'&#123;&#123;timestamp&#125;&#125;'</span>,</span></span><br><span class="line"><span class="actionscript">            nonceStr: <span class="string">'&#123;&#123;nonceStr&#125;&#125;'</span>,</span></span><br><span class="line"><span class="actionscript">            signature: <span class="string">'&#123;&#123;signature&#125;&#125;'</span>,</span></span><br><span class="line">            jsApiList: [</span><br><span class="line"><span class="actionscript">                <span class="string">'onMenuShareTimeline'</span>,</span></span><br><span class="line"><span class="actionscript">                <span class="string">'onMenuShareAppMessage'</span></span></span><br><span class="line">            ]</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line"><span class="actionscript">        <span class="comment">// 调用接口</span></span></span><br><span class="line"><span class="actionscript">        wx.ready(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line">            </span><br><span class="line"><span class="actionscript">            <span class="comment">// 分享到朋友圈</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'.btn1'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">                wx.onMenuShareTimeline(&#123;</span><br><span class="line"><span class="actionscript">                    title: <span class="string">''</span>, <span class="comment">// 分享标题</span></span></span><br><span class="line"><span class="actionscript">                    link: <span class="string">''</span>, <span class="comment">// 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致</span></span></span><br><span class="line"><span class="actionscript">                    imgUrl: <span class="string">''</span>, <span class="comment">// 分享图标</span></span></span><br><span class="line"><span class="actionscript">                    success: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="comment">// 用户点击了分享后执行的回调函数</span></span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line"><span class="actionscript">            <span class="comment">// 分享给朋友</span></span></span><br><span class="line"><span class="javascript">            $(<span class="string">'.btn2'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line">                wx.onMenuShareAppMessage(&#123;</span><br><span class="line"><span class="actionscript">                    title: <span class="string">''</span>, <span class="comment">// 分享标题</span></span></span><br><span class="line"><span class="actionscript">                    desc: <span class="string">''</span>, <span class="comment">// 分享描述</span></span></span><br><span class="line"><span class="actionscript">                    link: <span class="string">''</span>, <span class="comment">// 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致</span></span></span><br><span class="line"><span class="actionscript">                    imgUrl: <span class="string">''</span>, <span class="comment">// 分享图标</span></span></span><br><span class="line"><span class="actionscript">                    type: <span class="string">''</span>, <span class="comment">// 分享类型,music、video或link，不填默认为link</span></span></span><br><span class="line"><span class="actionscript">                    dataUrl: <span class="string">''</span>, <span class="comment">// 如果type是music或video，则要提供数据链接，默认为空</span></span></span><br><span class="line"><span class="actionscript">                    success: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                    	<span class="comment">// 用户点击了分享后执行的回调函数</span></span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="其它接口"><a href="#其它接口" class="headerlink" title="其它接口"></a>其它接口</h5><h4 id="7-WeUI"><a href="#7-WeUI" class="headerlink" title="7. WeUI"></a>7. WeUI</h4><blockquote>
<p><a href="https://weui.io/" target="_blank" rel="noopener">WeUI</a> 是一套同微信原生视觉体验一致的基础样式库，由微信官方设计团队为微信内网页和微信小程序量身设计，令用户的使用感知更加统一。</p>
<p>其本质就是微信官方事先写好CSS，开发时直接将其引入页面即可。</p>
</blockquote>
<p>在微信网页或小程序中使用 WeUI，有如下优势：</p>
<ol>
<li>同微信客户端一致的视觉效果，令所有微信用户都能更容易地使用你的网站或小程序</li>
<li>便捷获取快速使用，降低开发和设计成本</li>
<li>微信设计团队精心打造，清晰明确，简洁大方</li>
</ol>
<p><a href="https://github.com/Tencent/weui/wiki" target="_blank" rel="noopener">使用文档</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">雪海の无涯</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://wuguolong.com/2019/10/24/微信小程序笔记/">http://wuguolong.com/2019/10/24/微信小程序笔记/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://wuguolong.com">云海雪原</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/小程序/">小程序    </a></div><div class="post_share"><div class="social-share" data-image="/img/xiaochengxu.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2019/10/24/《ECMAScript 6入门 》/《ECMAScript 6入门 》/"><img class="prev_cover lozad" data-src="/img/ES6.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>ES6</span></div></a></div><div class="next-post pull-right"><a href="/2019/10/24/webpack基本配置/"><img class="next_cover lozad" data-src="https://s2.ax1x.com/2019/10/24/KUV0KS.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>webpack</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = false == true ? true : false;
var verify = false == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'QOWvG4y52wLGETHWOBorduMj-gzGzoHsz',
  appKey:'92vutIllr4PBQhRIlGCkGJPU',
  placeholder:'Please leave your footprints',
  avatar:'monsterid',
  guest_info:guest_info,
  pageSize:'10',
  lang:'en',
  recordIP: true
});</script></div></div></div><footer><div id="footer"><div class="copyright">&copy;2018 - 2020 By 雪海の无涯</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换">繁</a><i class="nightshift fa fa-moon-o" id="nightshift" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="/js/nightshift.js"></script><script color="0,0,255" opacity="0.7" zindex="-1" count="99" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/js/canvas-nest.js"></script><script src="/js/baidupush.js"> </script><script src="/js/activate-power-mode.js"></script><script>POWERMODE.colorful = true; // make power mode colorful
POWERMODE.shake = true; // turn off shake
document.body.addEventListener('input', POWERMODE);
</script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();
</script></body></html>